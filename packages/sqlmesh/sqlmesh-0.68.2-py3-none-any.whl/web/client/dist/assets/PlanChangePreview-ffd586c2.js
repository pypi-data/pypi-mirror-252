import{r as i,K as Q,au as pe,D as X,I as Z,y as ee,X as te,z as N,R as y,aa as _e,ae as me,Q as T,av as ie,Y as W,aw as le,G as Ie,ab as $e,ac as Fe,ad as Le,ax as Be,ay as Ge,U as oe,B as ze,$ as Se,j as a,ag as q,al as ce,d as k,t as Ue,a as We,e as fe,a6 as de,q as Ve}from"./index-7a9ec5e5.js";import{L as He}from"./context-93456590.js";import qe from"./ModelLineage-69bc7eca.js";import{P as Ke}from"./PlusIcon-ec85cc4a.js";import{T as Ye,p as Je,e as Qe}from"./ListboxShow-de3a25ae.js";import{v as M,M as xe,P as ge}from"./disclosure-95053817.js";function Xe({title:e,titleId:t,...r},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z",clipRule:"evenodd"}))}const Ze=i.forwardRef(Xe),ve=Ze;function et({title:e,titleId:t,...r},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const tt=i.forwardRef(et),rt=tt;function at({container:e,accept:t,walk:r,enabled:n=!0}){let s=i.useRef(t),o=i.useRef(r);i.useEffect(()=>{s.current=t,o.current=r},[t,r]),Q(()=>{if(!e||!n)return;let c=pe(e);if(!c)return;let p=s.current,d=o.current,P=Object.assign(A=>p(A),{acceptNode:p}),R=c.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,P,!1);for(;R.nextNode();)d(R.currentNode)},[e,n,s,o])}let he=i.createContext(null);function be(){let e=i.useContext(he);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,be),t}return e}function we(){let[e,t]=i.useState([]);return[e.length>0?e.join(" "):void 0,i.useMemo(()=>function(r){let n=N(o=>(t(c=>[...c,o]),()=>t(c=>{let p=c.slice(),d=p.indexOf(o);return d!==-1&&p.splice(d,1),p}))),s=i.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props}),[n,r.slot,r.name,r.props]);return y.createElement(he.Provider,{value:s},r.children)},[t])]}let st="label";function nt(e,t){let r=Z(),{id:n=`headlessui-label-${r}`,passive:s=!1,...o}=e,c=be(),p=ee(t);Q(()=>c.register(n),[n,c.register]);let d={ref:p,...c.props,id:n};return s&&("onClick"in d&&(delete d.htmlFor,delete d.onClick),"onClick"in o&&delete o.onClick),te({ourProps:d,theirProps:o,slot:c.slot||{},defaultTag:st,name:c.name||"Label"})}let it=X(nt),lt=Object.assign(it,{});var ot=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(ot||{});let ct={0(e,t){let r=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:Se(r,n=>n.element.current)}},1(e,t){let r=e.options.slice(),n=e.options.findIndex(s=>s.id===t.id);return n===-1?e:(r.splice(n,1),{...e,options:r})}},re=i.createContext(null);re.displayName="RadioGroupDataContext";function Re(e){let t=i.useContext(re);if(t===null){let r=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Re),r}return t}let ae=i.createContext(null);ae.displayName="RadioGroupActionsContext";function je(e){let t=i.useContext(ae);if(t===null){let r=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,je),r}return t}function dt(e,t){return ze(t.type,ct,e,t)}let ut="div";function pt(e,t){let r=Z(),{id:n=`headlessui-radiogroup-${r}`,value:s,defaultValue:o,form:c,name:p,onChange:d,by:P=(l,x)=>l===x,disabled:R=!1,...A}=e,C=N(typeof P=="string"?(l,x)=>{let f=P;return(l==null?void 0:l[f])===(x==null?void 0:x[f])}:P),[_,I]=i.useReducer(dt,{options:[]}),v=_.options,[G,K]=we(),[E,$]=me(),F=i.useRef(null),Y=ee(F,t),[h,z]=Ye(s,d,o),b=i.useMemo(()=>v.find(l=>!l.propsRef.current.disabled),[v]),O=i.useMemo(()=>v.some(l=>C(l.propsRef.current.value,h)),[v,h]),w=N(l=>{var x;if(R||C(l,h))return!1;let f=(x=v.find(D=>C(D.propsRef.current.value,l)))==null?void 0:x.propsRef.current;return f!=null&&f.disabled?!1:(z==null||z(l),!0)});at({container:F.current,accept(l){return l.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let J=N(l=>{let x=F.current;if(!x)return;let f=pe(x),D=v.filter(m=>m.propsRef.current.disabled===!1).map(m=>m.element.current);switch(l.key){case T.Enter:Je(l.currentTarget);break;case T.ArrowLeft:case T.ArrowUp:if(l.preventDefault(),l.stopPropagation(),ie(D,W.Previous|W.WrapAround)===le.Success){let m=v.find(L=>L.element.current===(f==null?void 0:f.activeElement));m&&w(m.propsRef.current.value)}break;case T.ArrowRight:case T.ArrowDown:if(l.preventDefault(),l.stopPropagation(),ie(D,W.Next|W.WrapAround)===le.Success){let m=v.find(L=>L.element.current===(f==null?void 0:f.activeElement));m&&w(m.propsRef.current.value)}break;case T.Space:{l.preventDefault(),l.stopPropagation();let m=v.find(L=>L.element.current===(f==null?void 0:f.activeElement));m&&w(m.propsRef.current.value)}break}}),j=N(l=>(I({type:0,...l}),()=>I({type:1,id:l.id}))),S=i.useMemo(()=>({value:h,firstOption:b,containsCheckedOption:O,disabled:R,compare:C,..._}),[h,b,O,R,C,_]),De=i.useMemo(()=>({registerOption:j,change:w}),[j,w]),Te={ref:Y,id:n,role:"radiogroup","aria-labelledby":G,"aria-describedby":E,onKeyDown:J},Me=i.useMemo(()=>({value:h}),[h]),U=i.useRef(null),Ae=Ie();return i.useEffect(()=>{U.current&&o!==void 0&&Ae.addEventListener(U.current,"reset",()=>{w(o)})},[U,w]),y.createElement($,{name:"RadioGroup.Description"},y.createElement(K,{name:"RadioGroup.Label"},y.createElement(ae.Provider,{value:De},y.createElement(re.Provider,{value:S},p!=null&&h!=null&&Qe({[p]:h}).map(([l,x],f)=>y.createElement($e,{features:Fe.Hidden,ref:f===0?D=>{var m;U.current=(m=D==null?void 0:D.closest("form"))!=null?m:null}:void 0,...Le({key:l,as:"input",type:"radio",checked:x!=null,hidden:!0,readOnly:!0,form:c,name:l,value:x})})),te({ourProps:Te,theirProps:A,slot:Me,defaultTag:ut,name:"RadioGroup"})))))}var mt=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(mt||{});let ft="div";function xt(e,t){var r;let n=Z(),{id:s=`headlessui-radiogroup-option-${n}`,value:o,disabled:c=!1,...p}=e,d=i.useRef(null),P=ee(d,t),[R,A]=we(),[C,_]=me(),{addFlag:I,removeFlag:v,hasFlag:G}=Be(1),K=Ge({value:o,disabled:c}),E=Re("RadioGroup.Option"),$=je("RadioGroup.Option");Q(()=>$.registerOption({id:s,element:d,propsRef:K}),[s,$,d,e]);let F=N(j=>{var S;if(oe(j.currentTarget))return j.preventDefault();$.change(o)&&(I(2),(S=d.current)==null||S.focus())}),Y=N(j=>{if(oe(j.currentTarget))return j.preventDefault();I(2)}),h=N(()=>v(2)),z=((r=E.firstOption)==null?void 0:r.id)===s,b=E.disabled||c,O=E.compare(E.value,o),w={ref:P,id:s,role:"radio","aria-checked":O?"true":"false","aria-labelledby":R,"aria-describedby":C,"aria-disabled":b?!0:void 0,tabIndex:(()=>b?-1:O||!E.containsCheckedOption&&z?0:-1)(),onClick:b?void 0:F,onFocus:b?void 0:Y,onBlur:b?void 0:h},J=i.useMemo(()=>({checked:O,disabled:b,active:G(2)}),[O,b,G]);return y.createElement(_,{name:"RadioGroup.Description"},y.createElement(A,{name:"RadioGroup.Label"},te({ourProps:w,theirProps:p,slot:J,defaultTag:ft,name:"RadioGroup.Option"})))}let gt=X(pt),vt=X(xt),V=Object.assign(gt,{Option:vt,Label:lt,Description:_e});const g={ResetPlanOptions:"reset-plan-options",ResetPlanDates:"reset-plan-dates",PlanOptions:"plan-options",Dates:"dates",DateStart:"date-start",DateEnd:"date-end",Category:"category",External:"external",ResetTestsReport:"reset-tests-report",TestsReportErrors:"tests-report-errors",TestsReportMessages:"tests-report-messages"},u={Add:"add",Remove:"remove",Direct:"direct",Indirect:"indirect",Metadata:"metadata",Default:"default"},ue={BreakingChange:"breaking-change",NonBreakingChange:"non-breaking-change"},[ht,bt]=jt(),ye={skip_tests:!1,no_gaps:!1,skip_backfill:!1,forward_only:!1,auto_apply:!1,no_auto_categorization:!1,include_unmodified:!0,restate_models:void 0,create_from:"prod"},Ne={start:void 0,end:void 0},se={...Ne,...ye,categories:bt,defaultCategory:ht,change_categorization:new Map,virtualUpdateDescription:"All changes and their downstream dependencies can be fully previewed before they get promoted. If during plan creation no data gaps have been detected and only references to new model versions need to be updated, then such an update is referred to as a Virtual Update. Virtual Updates impose no additional runtime overhead or cost.",isInitialPlanRun:!1,errors:[],testsReportErrors:void 0,testsReportMessages:void 0},ke=i.createContext(se),Pe=i.createContext(()=>{});function At({children:e}){const[t,r]=i.useReducer(wt,Object.assign(se));return a.jsx(ke.Provider,{value:Object.assign(t),children:a.jsx(Pe.Provider,{value:r,children:e})})}function ne(){return i.useContext(ke)}function Ce(){return i.useContext(Pe)}function wt(e,t){return t=Array.isArray(t)?t:[t],t.reduce(Rt,e)}function Rt(e=se,{type:t,...r}){switch(t){case g.ResetPlanDates:return Object.assign({},e,Ne);case g.ResetPlanOptions:return Object.assign({},e,ye);case g.ResetTestsReport:return Object.assign({},e,{testsReportErrors:void 0,testsReportMessages:void 0});case g.PlanOptions:return Object.assign({},e,r);case g.Dates:return Object.assign({},e,{start:r.start,end:r.end});case g.External:return Object.assign({},e,{isInitialPlanRun:r.isInitialPlanRun??!1});case g.DateStart:return Object.assign({},e,{start:r.start});case g.DateEnd:return Object.assign({},e,{end:r.end});case g.TestsReportErrors:return Object.assign({},e,{testsReportErrors:r.testsReportErrors});case g.TestsReportMessages:return Object.assign({},e,{testsReportMessages:r.testsReportMessages});case g.Category:{const{change:n,category:s}=r;return q(n==null?void 0:n.name)&&e.change_categorization.set(n.name,{category:s,change:n}),Object.assign({},e,{change_categorization:new Map(e.change_categorization)})}default:return Object.assign({},e)}}function jt(){const e={id:ue.BreakingChange,name:"Breaking Change",description:"It will rebuild all models",value:ce.NUMBER_1},t=[e,{id:ue.NonBreakingChange,name:"Non-Breaking Change",description:"It will exclude all indirect models caused by this change",value:ce.NUMBER_2}];return[e,t]}function B({children:e,headline:t,type:r,className:n}){return a.jsxs("div",{className:k("flex flex-col rounded-md p-4",r===u.Add&&"bg-success-5",r===u.Remove&&"bg-danger-5",r===u.Direct&&"bg-secondary-5",r===u.Indirect&&"bg-warning-5",r===u.Default&&"bg-neutral-5",n),children:[q(t)&&a.jsx("h4",{className:k("mb-2 font-bold whitespace-nowrap",r===u.Add&&"text-success-600 dark:text-success-300",r===u.Remove&&"text-danger-600 dark:text-danger-300",r===u.Direct&&"text-secondary-600 dark:text-secondary-300",r===u.Indirect&&"text-warning-600 dark:text-warning-300",r===u.Default&&"text-neutral-600 dark:text-neutral-300"),children:t}),e]})}function yt({changes:e=[],type:t}){return a.jsx("ul",{children:e.map(r=>a.jsxs("li",{className:k("flex items-center px-1 leading-5 mb-1",t===u.Add&&"text-success-600 dark:text-success-300",t===u.Remove&&"text-danger-600 dark:text-danger-300",t===u.Direct&&"text-secondary-600 dark:text-secondary-300",t===u.Indirect&&"text-warning-600 dark:text-warning-300",t===u.Default&&"text-neutral-600 dark:text-neutral-300"),children:[t===u.Add?a.jsx(Ke,{className:"h-3 mr-2"}):t===u.Remove?a.jsx(rt,{className:"h-3 mr-2"}):a.jsx(ve,{className:"h-4 mr-2"}),a.jsx("small",{title:r.displayViewName,className:"w-full text-xs whitespace-nowrap text-ellipsis overflow-hidden",children:Ue(r.displayViewName,50,25)})]},r.name))})}function Nt({changes:e=[]}){const t=Ce(),{categories:r}=ne(),n=We(s=>s.models);return i.useEffect(()=>{t(e.map(s=>({type:g.Category,category:r.find(({value:o})=>o===s.change_category),change:s})))},[e]),a.jsx("ul",{children:e.map(s=>a.jsx("li",{className:"text-secondary-500 dark:text-primary-500 mt-1",children:a.jsx(M,{children:({open:o})=>a.jsxs(a.Fragment,{children:[a.jsxs(M.Button,{className:"flex items-center w-full justify-between rounded-lg text-left",children:[a.jsx(H,{className:"w-full",change:s}),(()=>{const c=o?xe:ge;return a.jsx(c,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500"})})()]}),a.jsxs(M.Panel,{className:"text-sm px-4 mb-4 overflow-hidden",children:[fe(s.indirect)&&a.jsx(Ee,{type:"indirect",models:s.indirect}),a.jsx(de,{className:"border-neutral-200 mt-2"}),a.jsx(kt,{change:s}),a.jsx(de,{className:"border-neutral-200 mt-2"}),a.jsxs("div",{className:"flex flex-col w-full h-full overflow-hidden overflow-y-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal",children:[q(s==null?void 0:s.diff)&&a.jsx(Oe,{diff:s==null?void 0:s.diff}),(()=>{var p;const c=n.get(s.name);return Ve(c)?a.jsx(a.Fragment,{}):a.jsx("div",{className:"h-[16rem] bg-theme-lighter rounded-xl p-2",children:a.jsx(He,{withColumns:!1,children:a.jsx(qe,{model:c,highlightedNodes:{"border-4 border-secondary-500":[c.name],"border-4 border-warning-500":((p=s.indirect)==null?void 0:p.map(d=>d.name))??[],"*":["opacity-50 hover:opacity-100"]}})})})})()]})]})]})})},s.name))})}function kt({change:e}){var s;const t=Ce(),{change_categorization:r,categories:n}=ne();return a.jsx(V,{className:"flex flex-col mt-2",value:((s=r.get(e.name))==null?void 0:s.category.value)??e.change_category,onChange:o=>{t({type:g.Category,category:n.find(({value:c})=>c===o),change:e})},children:n.map(o=>a.jsx(V.Option,{value:o.value,className:()=>k("relative flex rounded-md"),children:({checked:c})=>a.jsxs("div",{className:k("text-sm flex items-center px-2 py-1 w-full rounded-lg",c?"text-secondary-500 dark:text-primary-300":"text-prose"),children:[a.jsx("div",{className:"mt-[0.125rem] mr-2 border-2 border-neutral-400 min-w-[1rem] h-4 rounded-full flex justify-center items-center",children:c&&a.jsx("span",{className:"inline-block w-2 h-2 bg-secondary-500 dark:bg-primary-300 rounded-full"})}),a.jsxs("div",{children:[a.jsx(V.Label,{as:"p",children:o.name}),a.jsx(V.Description,{as:"span",className:"text-xs text-neutral-500",children:o.description})]})]})},o.name))})}function Pt({changes:e=[]}){return a.jsx("ul",{children:e.map(t=>a.jsx("li",{className:"text-warning-700 dark:text-warning-500",children:fe(t.direct)?a.jsx(M,{children:({open:r})=>a.jsxs(a.Fragment,{children:[a.jsxs(M.Button,{className:"flex items-center w-full justify-between rounded-lg text-left",children:[a.jsx(H,{change:t}),(()=>{const n=r?xe:ge;return a.jsx(n,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500 mt-0.5"})})()]}),a.jsx(M.Panel,{className:"text-sm px-4 mb-4",children:a.jsx(Ee,{type:"direct",models:t.direct??[]})})]})}):a.jsx(H,{change:t})},t.name))})}function H({change:e,className:t}){var s;const{change_categorization:r}=ne(),n=(s=r.get(e.name))==null?void 0:s.category;return a.jsxs("div",{className:k("flex items-center font-bold",t),children:[a.jsx(ve,{className:"h-4 mr-2"}),a.jsx("small",{className:"w-full text-xs whitespace-nowrap text-ellipsis overflow-hidden",children:e.displayViewName}),q(n)&&a.jsx("span",{className:"ml-2 text-xs px-1 bg-neutral-400 text-neutral-100  dark:bg-neutral-400 dark:text-neutral-800 rounded whitespace-nowrap mr-2",children:n.name})]})}function Ee({type:e,models:t}){return a.jsx("ul",{className:k("mt-2 ml-4",e==="indirect"&&"text-warning-700 dark:text-warning-500",e==="direct"&&"text-secondary-500 dark:text-primary-500"),children:t.map(r=>a.jsxs("li",{className:"flex",children:[a.jsx("span",{className:"h-3 w-3 border-l-2 border-b-2 inline-block mr-2"}),r.displayViewName]},r.name))})}function Oe({diff:e}){return a.jsx("div",{className:"my-4 bg-dark-lighter rounded-lg overflow-hidden",children:a.jsx("pre",{className:"p-4 text-primary-100 max-h-[30vh] text-xs overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal",children:e.split(`
`).map((t,r)=>a.jsx("p",{className:k(t.startsWith("+")&&"text-success-500 bg-success-500/10 px-2",t.startsWith("-")&&"text-danger-500 bg-danger-500/10 px-2",t.startsWith("@@")&&"text-primary-300 my-5 px-2"),children:t},`${t}-${r}`))})})}B.Default=yt;B.Direct=Nt;B.Indirect=Pt;B.Diff=Oe;B.Title=H;export{u as E,at as F,we as H,lt as M,B as P,Ce as a,g as b,At as c,ne as u};
