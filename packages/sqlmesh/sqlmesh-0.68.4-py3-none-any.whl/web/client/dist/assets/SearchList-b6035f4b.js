import{r as u,p as O,j as l,d as v,a5 as U,q as j,i as G,c as m,R as Y,t as q,ag as J}from"./index-f823a46d.js";import{I as P}from"./Input-7f1ddde5.js";import{k as T}from"./popover-cf930454.js";const g="",M=40;function _(t,n){return t.replaceAll(n,`<b class="inline-block text-brand-500 bg-brand-10">${n}</b>`)}function Q(t=[],n){return n=n.toLocaleLowerCase(),t.reduce((a,[r,s])=>{const o=s.toLocaleLowerCase().indexOf(n);if(o<0)return a;if(s.length<M)a.push([r,s]);else{const c=Math.max(0,o-M),i=Math.min(s.length-1,o+n.length+M);a.push([r,`${c>0?"...":g}${s.slice(c,i)}${i<s.length?"...":g}`])}return a},[])}function C({nativeEvent:t}){return window.TouchEvent?t instanceof TouchEvent:"touches"in t}function F(t){return t.nativeEvent instanceof MouseEvent}function V(t){const n=u.useRef(null),a=u.useRef(t);return u.useLayoutEffect(()=>{a.current=t}),u.useEffect(()=>{const r=s=>{const o=n.current;o&&!o.contains(s.target)&&a.current(s)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[]),n}function ee(t,n={}){const{threshold:a=400,onStart:r,onFinish:s,onCancel:o}=n,c=u.useRef(!1),i=u.useRef(!1),h=u.useRef();return u.useMemo(()=>{if(typeof t!="function")return{};const w=f=>{!F(f)&&!C(f)||(r&&r(f),i.current=!0,h.current=setTimeout(()=>{t(f),c.current=!0},a))},p=f=>{!F(f)&&!C(f)||(c.current?s&&s(f):i.current&&o&&o(f),c.current=!1,i.current=!1,h.current&&window.clearTimeout(h.current))};return{...{onMouseDown:w,onMouseUp:p,onMouseLeave:p},...{onTouchStart:w,onTouchEnd:p}}},[t,a,o,s,r])}const W=Y.forwardRef(function({value:n,type:a,placeholder:r,size:s=m.md,autoFocus:o=!1,onInput:c,onKeyDown:i,className:h},w){return l.jsx(P,{className:h,size:s,children:({className:p})=>l.jsx(P.Textfield,{ref:w,type:a,className:v(p,"w-full"),autoFocus:o,placeholder:r,value:n,onInput:c,onKeyDown:i})})});function te({list:t,size:n=m.sm,searchBy:a,displayBy:r,descriptionBy:s,onSelect:o,to:c,placeholder:i="Search",autoFocus:h=!1,isFullWidth:w=!1,showIndex:p=!0,className:R}){const I=O(),f=u.useRef(null),S=u.useRef(null),$=u.useMemo(()=>t.map(e=>[e,e[a]]),[t,a]),[L,b]=u.useState(g),[x,N]=u.useState(0),K=V(()=>{b(g)}),k=L!==g,y=Q($,L);function A(){var e;N(0),b(g),(e=S.current)==null||e.focus()}function D(){var d;const e=(d=y[x])==null?void 0:d[0];j(e)||(j(c)?o==null||o(e):I(c(e)),A())}return l.jsx("div",{className:v("px-2 py-1 relative",R),ref:K,onKeyDown:e=>{e.key==="Escape"&&A()},children:l.jsxs(T,{className:"relative flex",children:[l.jsx(T.Button,{ref:S,as:W,className:"w-full !m-0",type:"search",size:n,value:L,placeholder:i,onInput:e=>{b(e.target.value.trim())},onKeyDown:e=>{var d;(e.key==="ArrowDown"||e.key==="ArrowUp")&&((d=f.current)==null||d.focus())},autoFocus:h}),l.jsx(U,{show:k,as:u.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:l.jsx(T.Panel,{static:!0,focus:!0,className:v("absolute z-50 transform cursor-pointer rounded-lg bg-theme border-2 border-neutral-200","p-2 bg-theme dark:bg-theme-lighter overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal shadow-2xl",n===m.sm&&"mt-7 max-h-[30vh]",n===m.md&&"mt-9 max-h-[40vh]",n===m.lg&&"mt-12 max-h-[50vh]",w?"w-full":"w-full max-w-[20rem]"),ref:f,onKeyDown:e=>{e.key==="ArrowUp"&&x>0&&N(x-1),e.key==="ArrowDown"&&x<y.length-1&&N(x+1),e.key==="Enter"&&(e.preventDefault(),D())},onMouseOver:e=>{e.stopPropagation();const d=e.target.closest('[role="menuitem"]');if(j(d))return;const E=Number(d.dataset.index);N(Number(E))},children:G(y)&&k?l.jsx("div",{className:v(n===m.sm&&"p-1",n===m.md&&"p-2",n===m.lg&&"p-3"),children:"No Results Found"},"not-found"):y.map(([e,d],E)=>l.jsx("div",{role:"menuitem","data-index":E,className:v("cursor-pointer rounded-lg",x===E&&"bg-neutral-5"),children:l.jsx(X,{item:e,index:d,search:L,displayBy:r,descriptionBy:s,size:n,showIndex:p,onClick:H=>{H.stopPropagation(),H.preventDefault(),D()}})},e[a]))})})]})})}function X({item:t,index:n,search:a,displayBy:r,descriptionBy:s,size:o,showIndex:c=!0,onClick:i}){return l.jsxs("div",{onClick:i,className:v("font-normal w-full overflow-hidden whitespace-nowrap overflow-ellipsis px-2",o===m.sm&&"text-sm py-1",o===m.md&&"text-md py-2",o===m.lg&&"text-lg py-3"),children:[c?l.jsxs(l.Fragment,{children:[l.jsx("span",{title:t[r],className:"font-bold",children:q(t[r],50,20)}),l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",dangerouslySetInnerHTML:{__html:_(n,a)}})]}):l.jsx("span",{title:t[r],className:"font-bold",dangerouslySetInnerHTML:{__html:_(t[r],a)}}),J(s)&&l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",children:t[s]})]})}export{te as S,ee as u};
