import{r as u,ay as oe,K as E,z as f,w as _,D as F,y as k,B as C,x as Re,M as Se,T as Le,G as H,R as Q,A as Ie,F as V,ab as Te,ac as De,ad as $e,X as N,I as q,J as we,au as Pe,Q as g,U as Ce,V as X,$ as Ee,j as I,a5 as Fe,d as ee,m as ke}from"./index-f823a46d.js";import{s as Ne}from"./popover-cf930454.js";import{C as Ae,B as je}from"./Input-7f1ddde5.js";function ie(e,n){let[r,i]=u.useState(e),o=oe(e);return E(()=>i(o.current),[o,i,...n]),r}function Me(e){throw new Error("Unexpected object: "+e)}var S=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(S||{});function Be(e,n){let r=n.resolveItems();if(r.length<=0)return null;let i=n.resolveActiveIndex(),o=i??-1,a=(()=>{switch(e.focus){case 0:return r.findIndex(t=>!n.resolveDisabled(t));case 1:{let t=r.slice().reverse().findIndex((l,p,b)=>o!==-1&&b.length-p-1>=o?!1:!n.resolveDisabled(l));return t===-1?t:r.length-1-t}case 2:return r.findIndex((t,l)=>l<=o?!1:!n.resolveDisabled(t));case 3:{let t=r.slice().reverse().findIndex(l=>!n.resolveDisabled(l));return t===-1?t:r.length-1-t}case 4:return r.findIndex(t=>n.resolveId(t)===e.id);case 5:return null;default:Me(e)}})();return a===-1?i:a}function ae(e={},n=null,r=[]){for(let[i,o]of Object.entries(e))se(r,le(n,i),o);return r}function le(e,n){return e?e+"["+n+"]":n}function se(e,n,r){if(Array.isArray(r))for(let[i,o]of r.entries())se(e,le(n,i.toString()),o);else r instanceof Date?e.push([n,r.toISOString()]):typeof r=="boolean"?e.push([n,r?"1":"0"]):typeof r=="string"?e.push([n,r]):typeof r=="number"?e.push([n,`${r}`]):r==null?e.push([n,""]):ae(r,n,e)}function vt(e){var n,r;let i=(n=e==null?void 0:e.form)!=null?n:e.closest("form");if(i){for(let o of i.elements)if(o!==e&&(o.tagName==="INPUT"&&o.type==="submit"||o.tagName==="BUTTON"&&o.type==="submit"||o.nodeName==="INPUT"&&o.type==="image")){o.click();return}(r=i.requestSubmit)==null||r.call(i)}}function Ue(e,n,r){let[i,o]=u.useState(r),a=e!==void 0,t=u.useRef(a),l=u.useRef(!1),p=u.useRef(!1);return a&&!t.current&&!l.current?(l.current=!0,t.current=a,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!a&&t.current&&!p.current&&(p.current=!0,t.current=a,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[a?e:i,f(b=>(a||o(b),n==null?void 0:n(b)))]}function te(e){return[e.screenX,e.screenY]}function Qe(){let e=u.useRef([-1,-1]);return{wasMoved(n){let r=te(n);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(n){e.current=te(n)}}}let re=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ne(e){var n,r;let i=(n=e.innerText)!=null?n:"",o=e.cloneNode(!0);if(!(o instanceof HTMLElement))return i;let a=!1;for(let l of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))l.remove(),a=!0;let t=a?(r=o.innerText)!=null?r:"":i;return re.test(t)&&(t=t.replace(re,"")),t}function ze(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let r=e.getAttribute("aria-labelledby");if(r){let i=r.split(" ").map(o=>{let a=document.getElementById(o);if(a){let t=a.getAttribute("aria-label");return typeof t=="string"?t.trim():ne(a).trim()}return null}).filter(Boolean);if(i.length>0)return i.join(", ")}return ne(e).trim()}function He(e){let n=u.useRef(""),r=u.useRef("");return f(()=>{let i=e.current;if(!i)return"";let o=i.innerText;if(n.current===o)return r.current;let a=ze(i).trim().toLowerCase();return n.current=o,r.current=a,a})}var Ve=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ve||{}),qe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(qe||{}),Ge=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ge||{}),Ke=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Ke||{});function W(e,n=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,i=Ee(n(e.options.slice()),a=>a.dataRef.current.domRef.current),o=r?i.indexOf(r):null;return o===-1&&(o=null),{options:i,activeOptionIndex:o}}let We={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let n=e.activeOptionIndex,{isSelected:r}=e.dataRef.current,i=e.options.findIndex(o=>r(o.dataRef.current.value));return i!==-1&&(n=i),{...e,listboxState:0,activeOptionIndex:n}},2(e,n){var r;if(e.dataRef.current.disabled||e.listboxState===1)return e;let i=W(e),o=Be(n,{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});return{...e,...i,searchQuery:"",activeOptionIndex:o,activationTrigger:(r=n.trigger)!=null?r:1}},3:(e,n)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,i=e.searchQuery+n.value.toLowerCase(),o=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(t=>{var l;return!t.dataRef.current.disabled&&((l=t.dataRef.current.textValue)==null?void 0:l.startsWith(i))}),a=o?e.options.indexOf(o):-1;return a===-1||a===e.activeOptionIndex?{...e,searchQuery:i}:{...e,searchQuery:i,activeOptionIndex:a,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,n)=>{let r={id:n.id,dataRef:n.dataRef},i=W(e,o=>[...o,r]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(n.dataRef.current.value)&&(i.activeOptionIndex=i.options.indexOf(r)),{...e,...i}},6:(e,n)=>{let r=W(e,i=>{let o=i.findIndex(a=>a.id===n.id);return o!==-1&&i.splice(o,1),i});return{...e,...r,activationTrigger:1}},7:(e,n)=>({...e,labelId:n.id})},J=u.createContext(null);J.displayName="ListboxActionsContext";function A(e){let n=u.useContext(J);if(n===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,A),r}return n}let Y=u.createContext(null);Y.displayName="ListboxDataContext";function j(e){let n=u.useContext(Y);if(n===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,j),r}return n}function Xe(e,n){return C(n.type,We,e,n)}let Je=u.Fragment;function Ye(e,n){let{value:r,defaultValue:i,form:o,name:a,onChange:t,by:l=(c,d)=>c===d,disabled:p=!1,horizontal:b=!1,multiple:h=!1,...T}=e;const w=b?"horizontal":"vertical";let D=k(n),[y=h?[]:void 0,L]=Ue(r,t,i),[m,s]=u.useReducer(Xe,{dataRef:u.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),v=u.useRef({static:!1,hold:!1}),P=u.useRef(null),M=u.useRef(null),G=u.useRef(null),O=f(typeof l=="string"?(c,d)=>{let R=l;return(c==null?void 0:c[R])===(d==null?void 0:d[R])}:l),$=u.useCallback(c=>C(x.mode,{1:()=>y.some(d=>O(d,c)),0:()=>O(y,c)}),[y]),x=u.useMemo(()=>({...m,value:y,disabled:p,mode:h?1:0,orientation:w,compare:O,isSelected:$,optionsPropsRef:v,labelRef:P,buttonRef:M,optionsRef:G}),[y,p,h,m]);E(()=>{m.dataRef.current=x},[x]),Re([x.buttonRef,x.optionsRef],(c,d)=>{var R;s({type:1}),Se(d,Le.Loose)||(c.preventDefault(),(R=x.buttonRef.current)==null||R.focus())},x.listboxState===0);let ue=u.useMemo(()=>({open:x.listboxState===0,disabled:p,value:y}),[x,p,y]),ce=f(c=>{let d=x.options.find(R=>R.id===c);d&&K(d.dataRef.current.value)}),de=f(()=>{if(x.activeOptionIndex!==null){let{dataRef:c,id:d}=x.options[x.activeOptionIndex];K(c.current.value),s({type:2,focus:S.Specific,id:d})}}),pe=f(()=>s({type:0})),fe=f(()=>s({type:1})),be=f((c,d,R)=>c===S.Specific?s({type:2,focus:S.Specific,id:d,trigger:R}):s({type:2,focus:c,trigger:R})),ve=f((c,d)=>(s({type:5,id:c,dataRef:d}),()=>s({type:6,id:c}))),xe=f(c=>(s({type:7,id:c}),()=>s({type:7,id:null}))),K=f(c=>C(x.mode,{0(){return L==null?void 0:L(c)},1(){let d=x.value.slice(),R=d.findIndex(U=>O(U,c));return R===-1?d.push(c):d.splice(R,1),L==null?void 0:L(d)}})),me=f(c=>s({type:3,value:c})),ge=f(()=>s({type:4})),he=u.useMemo(()=>({onChange:K,registerOption:ve,registerLabel:xe,goToOption:be,closeListbox:fe,openListbox:pe,selectActiveOption:de,selectOption:ce,search:me,clearSearch:ge}),[]),ye={ref:D},B=u.useRef(null),Oe=H();return u.useEffect(()=>{B.current&&i!==void 0&&Oe.addEventListener(B.current,"reset",()=>{L==null||L(i)})},[B,L]),Q.createElement(J.Provider,{value:he},Q.createElement(Y.Provider,{value:x},Q.createElement(Ie,{value:C(x.listboxState,{0:V.Open,1:V.Closed})},a!=null&&y!=null&&ae({[a]:y}).map(([c,d],R)=>Q.createElement(Te,{features:De.Hidden,ref:R===0?U=>{var Z;B.current=(Z=U==null?void 0:U.closest("form"))!=null?Z:null}:void 0,...$e({key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:o,name:c,value:d})})),N({ourProps:ye,theirProps:T,slot:ue,defaultTag:Je,name:"Listbox"}))))}let Ze="button";function _e(e,n){var r;let i=q(),{id:o=`headlessui-listbox-button-${i}`,...a}=e,t=j("Listbox.Button"),l=A("Listbox.Button"),p=k(t.buttonRef,n),b=H(),h=f(m=>{switch(m.key){case g.Space:case g.Enter:case g.ArrowDown:m.preventDefault(),l.openListbox(),b.nextFrame(()=>{t.value||l.goToOption(S.First)});break;case g.ArrowUp:m.preventDefault(),l.openListbox(),b.nextFrame(()=>{t.value||l.goToOption(S.Last)});break}}),T=f(m=>{switch(m.key){case g.Space:m.preventDefault();break}}),w=f(m=>{if(Ce(m.currentTarget))return m.preventDefault();t.listboxState===0?(l.closeListbox(),b.nextFrame(()=>{var s;return(s=t.buttonRef.current)==null?void 0:s.focus({preventScroll:!0})})):(m.preventDefault(),l.openListbox())}),D=ie(()=>{if(t.labelId)return[t.labelId,o].join(" ")},[t.labelId,o]),y=u.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.value}),[t]),L={ref:p,id:o,type:Ne(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":(r=t.optionsRef.current)==null?void 0:r.id,"aria-expanded":t.listboxState===0,"aria-labelledby":D,disabled:t.disabled,onKeyDown:h,onKeyUp:T,onClick:w};return N({ourProps:L,theirProps:a,slot:y,defaultTag:Ze,name:"Listbox.Button"})}let et="label";function tt(e,n){let r=q(),{id:i=`headlessui-listbox-label-${r}`,...o}=e,a=j("Listbox.Label"),t=A("Listbox.Label"),l=k(a.labelRef,n);E(()=>t.registerLabel(i),[i]);let p=f(()=>{var h;return(h=a.buttonRef.current)==null?void 0:h.focus({preventScroll:!0})}),b=u.useMemo(()=>({open:a.listboxState===0,disabled:a.disabled}),[a]);return N({ourProps:{ref:l,id:i,onClick:p},theirProps:o,slot:b,defaultTag:et,name:"Listbox.Label"})}let rt="ul",nt=_.RenderStrategy|_.Static;function ot(e,n){var r;let i=q(),{id:o=`headlessui-listbox-options-${i}`,...a}=e,t=j("Listbox.Options"),l=A("Listbox.Options"),p=k(t.optionsRef,n),b=H(),h=H(),T=we(),w=(()=>T!==null?(T&V.Open)===V.Open:t.listboxState===0)();u.useEffect(()=>{var s;let v=t.optionsRef.current;v&&t.listboxState===0&&v!==((s=Pe(v))==null?void 0:s.activeElement)&&v.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let D=f(s=>{switch(h.dispose(),s.key){case g.Space:if(t.searchQuery!=="")return s.preventDefault(),s.stopPropagation(),l.search(s.key);case g.Enter:if(s.preventDefault(),s.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:v}=t.options[t.activeOptionIndex];l.onChange(v.current.value)}t.mode===0&&(l.closeListbox(),X().nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})}));break;case C(t.orientation,{vertical:g.ArrowDown,horizontal:g.ArrowRight}):return s.preventDefault(),s.stopPropagation(),l.goToOption(S.Next);case C(t.orientation,{vertical:g.ArrowUp,horizontal:g.ArrowLeft}):return s.preventDefault(),s.stopPropagation(),l.goToOption(S.Previous);case g.Home:case g.PageUp:return s.preventDefault(),s.stopPropagation(),l.goToOption(S.First);case g.End:case g.PageDown:return s.preventDefault(),s.stopPropagation(),l.goToOption(S.Last);case g.Escape:return s.preventDefault(),s.stopPropagation(),l.closeListbox(),b.nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})});case g.Tab:s.preventDefault(),s.stopPropagation();break;default:s.key.length===1&&(l.search(s.key),h.setTimeout(()=>l.clearSearch(),350));break}}),y=ie(()=>{var s,v,P;return(P=(s=t.labelRef.current)==null?void 0:s.id)!=null?P:(v=t.buttonRef.current)==null?void 0:v.id},[t.labelRef.current,t.buttonRef.current]),L=u.useMemo(()=>({open:t.listboxState===0}),[t]),m={"aria-activedescendant":t.activeOptionIndex===null||(r=t.options[t.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":y,"aria-orientation":t.orientation,id:o,onKeyDown:D,role:"listbox",tabIndex:0,ref:p};return N({ourProps:m,theirProps:a,slot:L,defaultTag:rt,features:nt,visible:w,name:"Listbox.Options"})}let it="li";function at(e,n){let r=q(),{id:i=`headlessui-listbox-option-${r}`,disabled:o=!1,value:a,...t}=e,l=j("Listbox.Option"),p=A("Listbox.Option"),b=l.activeOptionIndex!==null?l.options[l.activeOptionIndex].id===i:!1,h=l.isSelected(a),T=u.useRef(null),w=He(T),D=oe({disabled:o,value:a,domRef:T,get textValue(){return w()}}),y=k(n,T);E(()=>{if(l.listboxState!==0||!b||l.activationTrigger===0)return;let O=X();return O.requestAnimationFrame(()=>{var $,x;(x=($=T.current)==null?void 0:$.scrollIntoView)==null||x.call($,{block:"nearest"})}),O.dispose},[T,b,l.listboxState,l.activationTrigger,l.activeOptionIndex]),E(()=>p.registerOption(i,D),[D,i]);let L=f(O=>{if(o)return O.preventDefault();p.onChange(a),l.mode===0&&(p.closeListbox(),X().nextFrame(()=>{var $;return($=l.buttonRef.current)==null?void 0:$.focus({preventScroll:!0})}))}),m=f(()=>{if(o)return p.goToOption(S.Nothing);p.goToOption(S.Specific,i)}),s=Qe(),v=f(O=>s.update(O)),P=f(O=>{s.wasMoved(O)&&(o||b||p.goToOption(S.Specific,i,0))}),M=f(O=>{s.wasMoved(O)&&(o||b&&p.goToOption(S.Nothing))}),G=u.useMemo(()=>({active:b,selected:h,disabled:o}),[b,h,o]);return N({ourProps:{id:i,ref:y,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":h,disabled:void 0,onClick:L,onFocus:m,onPointerEnter:v,onMouseEnter:v,onPointerMove:P,onMouseMove:P,onPointerLeave:M,onMouseLeave:M},theirProps:t,slot:G,defaultTag:it,name:"Listbox.Option"})}let lt=F(Ye),st=F(_e),ut=F(tt),ct=F(ot),dt=F(at),z=Object.assign(lt,{Button:st,Label:ut,Options:ct,Option:dt});function xt({options:e,value:n=[]}){const[r,i]=u.useState([]);return u.useEffect(()=>{i(n)},[n]),I.jsx(z,{value:r,onChange:o=>{var a;i(o);for(const t in e)(a=e[t])==null||a.call(e,o.includes(t))},multiple:!0,children:I.jsxs("div",{className:"relative flex",children:[I.jsxs(z.Button,{className:"flex items-center relative w-full cursor-default bg-primary-10 text-xs rounded-full text-primary-500 py-1 px-2 text-center focus:outline-none focus-visible:border-accent-500 focus-visible:ring-2 focus-visible:ring-light focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-brand-300",children:[I.jsx("span",{className:"block truncate",children:"Show"}),I.jsx(Ae,{className:"ml-2 h-4 w-4","aria-hidden":"true"})]}),I.jsx(Fe,{as:u.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:I.jsx(z.Options,{className:"absolute top-8 right-0 z-50 max-h-60 min-w-16 overflow-auto rounded-md bg-theme py-2 shadow-lg ring-2 ring-primary-10 ring-opacity-5 focus:outline-none sm:text-sm",children:Object.keys(e).filter(o=>e[o]).map(o=>I.jsx(z.Option,{className:({active:a,disabled:t})=>ee("relative cursor-default select-none py-1 pl-10 pr-4",t?"opacity-50 cursor-not-allowed":"",a?"bg-primary-10 text-primary-500":"text-neutral-700 dark:text-neutral-300"),value:o,disabled:ke(!!e[o]),children:({selected:a})=>I.jsxs(I.Fragment,{children:[I.jsx("span",{children:o}),I.jsx("span",{className:ee("absolute inset-y-0 left-0 flex items-center pl-3 text-primary-500",a?"block":"hidden"),children:I.jsx(je,{className:"h-4 w-4","aria-hidden":"true"})})]})},o))})})]})})}export{xt as L,Ue as T,S as a,He as b,ae as e,vt as p,Qe as u,Be as x};
