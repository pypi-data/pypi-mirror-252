import{S as be,i as ve,s as we,D as me,Z as ae,_ as re,m as w,h as u,n as $,$ as Se,b as F,a0 as h,K as Ye,a1 as J,M as ye,Q as ze,q as L,r as Z,u as ne,w as Me,U as Te,k as I,y as Y,a as G,l as M,z as q,c as Q,A as j,V as Ae,g as D,v as ie,f as oe,d as T,B as W,a2 as qe,N as Rt,F as Ce,G as Qe,a7 as je,a8 as $t,L as Dt,a6 as xe,p as Ke,O as Ie,o as Nt,ab as Pe,e as Le,ag as Vt}from"./index.ad1b71d6.js";import{g as Ct}from"./navigation.2146f391.js";import{P as Bt,e as We,$ as De,bf as Ft,D as Ge,bg as Je,S as Ot,as as It,bh as Ht,bi as Lt,bj as Zt,bk as Ut,b8 as Yt,d as Mt,b as qt,am as Be,an as Fe,ae as Oe,bl as jt,bm as Wt,bn as Tt,aU as et,ah as Gt,bo as Qt,be as At,E as St,a as Kt,i as Jt,bp as Xt}from"./Commands.597b0ae1.js";import{T as Xe}from"./ToastNotification.9069cf03.js";import{S as xt,T as yt,a as zt}from"./StringSpanHighlight.a79658ef.js";import{D as Pt,E as He}from"./DatasetFieldEmbeddingSelector.c2ed8650.js";import{T as el}from"./TrashCan.29665d4a.js";import{g as tl}from"./settingsStore.f700f14f.js";import{T as ll}from"./TextArea.37012f7e.js";import{c as tt}from"./colors.f6cbcb11.js";function lt(s){let e,t;return{c(){e=ae("title"),t=L(s[1])},l(l){e=re(l,"title",{});var n=w(e);t=Z(n,s[1]),n.forEach(u)},m(l,n){F(l,e,n),h(e,t)},p(l,n){n&2&&ne(t,l[1])},d(l){l&&u(e)}}}function nl(s){let e,t,l,n=s[1]&&lt(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],i={};for(let a=0;a<o.length;a+=1)i=me(i,o[a]);return{c(){e=ae("svg"),n&&n.c(),t=ae("path"),l=ae("path"),this.h()},l(a){e=re(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=w(e);n&&n.l(r),t=re(r,"path",{d:!0}),w(t).forEach(u),l=re(r,"path",{d:!0}),w(l).forEach(u),r.forEach(u),this.h()},h(){$(t,"d","M11,11V21H21V11Zm8,8H13V13h6Z"),$(l,"d","M30,13V11H26V8a2,2,0,0,0-2-2H21V2H19V6H13V2H11V6H8A2,2,0,0,0,6,8v3H2v2H6v6H2v2H6v3a2,2,0,0,0,2,2h3v4h2V26h6v4h2V26h3a2,2,0,0,0,2-2V21h4V19H26V13ZM24,24H8V8H24Z"),Se(e,i)},m(a,r){F(a,e,r),n&&n.m(e,null),h(e,t),h(e,l)},p(a,[r]){a[1]?n?n.p(a,r):(n=lt(a),n.c(),n.m(e,t)):n&&(n.d(1),n=null),Se(e,i=Ye(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:a[0]},r&1&&{height:a[0]},r&4&&a[2],r&8&&a[3]]))},i:J,o:J,d(a){a&&u(e),n&&n.d()}}}function sl(s,e,t){let l,n;const o=["size","title"];let i=ye(e,o),{size:a=16}=e,{title:r=void 0}=e;return s.$$set=f=>{t(5,e=me(me({},e),ze(f))),t(3,i=ye(e,o)),"size"in f&&t(0,a=f.size),"title"in f&&t(1,r=f.title)},s.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ze(e),[a,r,n,i,l]}class nt extends be{constructor(e){super(),ve(this,e,sl,nl,we,{size:0,title:1})}}function st(s){let e,t;return{c(){e=ae("title"),t=L(s[1])},l(l){e=re(l,"title",{});var n=w(e);t=Z(n,s[1]),n.forEach(u)},m(l,n){F(l,e,n),h(e,t)},p(l,n){n&2&&ne(t,l[1])},d(l){l&&u(e)}}}function al(s){let e,t,l=s[1]&&st(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let i=0;i<n.length;i+=1)o=me(o,n[i]);return{c(){e=ae("svg"),l&&l.c(),t=ae("path"),this.h()},l(i){e=re(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=w(e);l&&l.l(a),t=re(a,"path",{d:!0}),w(t).forEach(u),a.forEach(u),this.h()},h(){$(t,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),Se(e,o)},m(i,a){F(i,e,a),l&&l.m(e,null),h(e,t)},p(i,[a]){i[1]?l?l.p(i,a):(l=st(i),l.c(),l.m(e,t)):l&&(l.d(1),l=null),Se(e,o=Ye(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:i[0]},a&1&&{height:i[0]},a&4&&i[2],a&8&&i[3]]))},i:J,o:J,d(i){i&&u(e),l&&l.d()}}}function rl(s,e,t){let l,n;const o=["size","title"];let i=ye(e,o),{size:a=16}=e,{title:r=void 0}=e;return s.$$set=f=>{t(5,e=me(me({},e),ze(f))),t(3,i=ye(e,o)),"size"in f&&t(0,a=f.size),"title"in f&&t(1,r=f.title)},s.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ze(e),[a,r,n,i,l]}class wn extends be{constructor(e){super(),ve(this,e,rl,al,we,{size:0,title:1})}}function at(s){let e,t;return{c(){e=ae("title"),t=L(s[1])},l(l){e=re(l,"title",{});var n=w(e);t=Z(n,s[1]),n.forEach(u)},m(l,n){F(l,e,n),h(e,t)},p(l,n){n&2&&ne(t,l[1])},d(l){l&&u(e)}}}function il(s){let e,t,l,n=s[1]&&at(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],i={};for(let a=0;a<o.length;a+=1)i=me(i,o[a]);return{c(){e=ae("svg"),n&&n.c(),t=ae("path"),l=ae("path"),this.h()},l(a){e=re(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=w(e);n&&n.l(r),t=re(r,"path",{d:!0}),w(t).forEach(u),l=re(r,"path",{d:!0}),w(l).forEach(u),r.forEach(u),this.h()},h(){$(t,"d","M30.94,15.66A16.69,16.69,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16.69,16.69,0,0,0,16,27,16.69,16.69,0,0,0,30.94,16.34,1,1,0,0,0,30.94,15.66ZM16,25c-5.3,0-10.9-3.93-12.93-9C5.1,10.93,10.7,7,16,7s10.9,3.93,12.93,9C26.9,21.07,21.3,25,16,25Z"),$(l,"d","M16,10a6,6,0,1,0,6,6A6,6,0,0,0,16,10Zm0,10a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z"),Se(e,i)},m(a,r){F(a,e,r),n&&n.m(e,null),h(e,t),h(e,l)},p(a,[r]){a[1]?n?n.p(a,r):(n=at(a),n.c(),n.m(e,t)):n&&(n.d(1),n=null),Se(e,i=Ye(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:a[0]},r&1&&{height:a[0]},r&4&&a[2],r&8&&a[3]]))},i:J,o:J,d(a){a&&u(e),n&&n.d()}}}function ol(s,e,t){let l,n;const o=["size","title"];let i=ye(e,o),{size:a=16}=e,{title:r=void 0}=e;return s.$$set=f=>{t(5,e=me(me({},e),ze(f))),t(3,i=ye(e,o)),"size"in f&&t(0,a=f.size),"title"in f&&t(1,r=f.title)},s.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ze(e),[a,r,n,i,l]}class cl extends be{constructor(e){super(),ve(this,e,ol,il,we,{size:0,title:1})}}function rt(s){let e,t;return{c(){e=ae("title"),t=L(s[1])},l(l){e=re(l,"title",{});var n=w(e);t=Z(n,s[1]),n.forEach(u)},m(l,n){F(l,e,n),h(e,t)},p(l,n){n&2&&ne(t,l[1])},d(l){l&&u(e)}}}function fl(s){let e,t,l,n=s[1]&&rt(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],i={};for(let a=0;a<o.length;a+=1)i=me(i,o[a]);return{c(){e=ae("svg"),n&&n.c(),t=ae("path"),l=ae("path"),this.h()},l(a){e=re(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=w(e);n&&n.l(r),t=re(r,"path",{d:!0}),w(t).forEach(u),l=re(r,"path",{d:!0}),w(l).forEach(u),r.forEach(u),this.h()},h(){$(t,"d","M5.24,22.51l1.43-1.42A14.06,14.06,0,0,1,3.07,16C5.1,10.93,10.7,7,16,7a12.38,12.38,0,0,1,4,.72l1.55-1.56A14.72,14.72,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16,16,0,0,0,5.24,22.51Z"),$(l,"d","M12 15.73a4 4 0 013.7-3.7l1.81-1.82a6 6 0 00-7.33 7.33zM30.94 15.66A16.4 16.4 0 0025.2 8.22L30 3.41 28.59 2 2 28.59 3.41 30l5.1-5.1A15.29 15.29 0 0016 27 16.69 16.69 0 0030.94 16.34 1 1 0 0030.94 15.66zM20 16a4 4 0 01-6 3.44L19.44 14A4 4 0 0120 16zm-4 9a13.05 13.05 0 01-6-1.58l2.54-2.54a6 6 0 008.35-8.35l2.87-2.87A14.54 14.54 0 0128.93 16C26.9 21.07 21.3 25 16 25z"),Se(e,i)},m(a,r){F(a,e,r),n&&n.m(e,null),h(e,t),h(e,l)},p(a,[r]){a[1]?n?n.p(a,r):(n=rt(a),n.c(),n.m(e,t)):n&&(n.d(1),n=null),Se(e,i=Ye(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:a[0]},r&1&&{height:a[0]},r&4&&a[2],r&8&&a[3]]))},i:J,o:J,d(a){a&&u(e),n&&n.d()}}}function ul(s,e,t){let l,n;const o=["size","title"];let i=ye(e,o),{size:a=16}=e,{title:r=void 0}=e;return s.$$set=f=>{t(5,e=me(me({},e),ze(f))),t(3,i=ye(e,o)),"size"in f&&t(0,a=f.size),"title"in f&&t(1,r=f.title)},s.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ze(e),[a,r,n,i,l]}class dl extends be{constructor(e){super(),ve(this,e,ul,fl,we,{size:0,title:1})}}function it(s,e,t){const l=s.slice();return l[7]=e[t],l}function ot(s){let e,t,l=s[7].text+"",n,o,i,a,r,f,c,p,d,_,g;r=new el({props:{size:16}});function b(){return s[6](s[7])}return{c(){e=I("div"),t=I("span"),n=L(l),o=G(),i=I("div"),a=I("button"),Y(r.$$.fragment),p=G(),this.h()},l(v){e=M(v,"DIV",{class:!0});var m=w(e);t=M(m,"SPAN",{class:!0});var k=w(t);n=Z(k,l),k.forEach(u),o=Q(m),i=M(m,"DIV",{});var V=w(i);a=M(V,"BUTTON",{title:!0,class:!0});var E=w(a);q(r.$$.fragment,E),E.forEach(u),V.forEach(u),p=Q(m),m.forEach(u),this.h()},h(){$(t,"class","shrink"),$(a,"title","Remove sample"),$(a,"class","shrink-0 opacity-50 hover:text-red-400 hover:opacity-100"),a.disabled=f=!s[1],Ce(i,"opacity-40",!s[1]),$(e,"class","flex w-full justify-between gap-x-2 border-b border-gray-200 p-2 hover:bg-gray-50")},m(v,m){F(v,e,m),h(e,t),h(t,n),h(e,o),h(e,i),h(i,a),j(r,a,null),h(e,p),d=!0,_||(g=[Qe(a,"click",b),je(c=We.call(null,i,{text:s[1]?"":"User does not have access to edit this concept."}))],_=!0)},p(v,m){s=v,(!d||m&1)&&l!==(l=s[7].text+"")&&ne(n,l),(!d||m&2&&f!==(f=!s[1]))&&(a.disabled=f),c&&$t(c.update)&&m&2&&c.update.call(null,{text:s[1]?"":"User does not have access to edit this concept."}),(!d||m&2)&&Ce(i,"opacity-40",!s[1])},i(v){d||(D(r.$$.fragment,v),d=!0)},o(v){T(r.$$.fragment,v),d=!1},d(v){v&&u(e),W(r),_=!1,Dt(g)}}}function ml(s){let e,t,l,n,o,i;function a(d){s[4](d)}let r={labelText:"Add example"};s[2]!==void 0&&(r.value=s[2]),t=new Bt({props:r}),Me.push(()=>Te(t,"value",a)),t.$on("keydown",s[5]);let f=[...s[0]].reverse(),c=[];for(let d=0;d<f.length;d+=1)c[d]=ot(it(s,f,d));const p=d=>T(c[d],1,1,()=>{c[d]=null});return{c(){e=I("div"),Y(t.$$.fragment),n=G(),o=I("div");for(let d=0;d<c.length;d+=1)c[d].c();this.h()},l(d){e=M(d,"DIV",{class:!0});var _=w(e);q(t.$$.fragment,_),_.forEach(u),n=Q(d),o=M(d,"DIV",{class:!0});var g=w(o);for(let b=0;b<c.length;b+=1)c[b].l(g);g.forEach(u),this.h()},h(){$(e,"class",""),$(o,"class","flex h-full w-full flex-col overflow-y-auto overflow-x-clip border border-gray-200")},m(d,_){F(d,e,_),j(t,e,null),F(d,n,_),F(d,o,_);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(o,null);i=!0},p(d,[_]){const g={};if(!l&&_&4&&(l=!0,g.value=d[2],Ae(()=>l=!1)),t.$set(g),_&11){f=[...d[0]].reverse();let b;for(b=0;b<f.length;b+=1){const v=it(d,f,b);c[b]?(c[b].p(v,_),D(c[b],1)):(c[b]=ot(v),c[b].c(),D(c[b],1),c[b].m(o,null))}for(ie(),b=f.length;b<c.length;b+=1)p(b);oe()}},i(d){if(!i){D(t.$$.fragment,d);for(let _=0;_<f.length;_+=1)D(c[_]);i=!0}},o(d){T(t.$$.fragment,d),c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)T(c[_]);i=!1},d(d){d&&u(e),W(t),d&&u(n),d&&u(o),qe(c,d)}}}function hl(s,e,t){let{data:l}=e,{canEditConcept:n}=e,o;const i=Rt();function a(c){o=c,t(2,o)}const r=c=>{c.key==="Enter"&&(i("add",o),t(2,o=""))},f=c=>i("remove",c.id);return s.$$set=c=>{"data"in c&&t(0,l=c.data),"canEditConcept"in c&&t(1,n=c.canEditConcept)},[l,n,o,i,a,r,f]}class ct extends be{constructor(e){super(),ve(this,e,hl,ml,we,{data:0,canEditConcept:1})}}const Ze={not_good:"text-red-600",ok:"text-yellow-600",good:"text-green-600",very_good:"text-blue-600",great:"text-purple-600"},Ue={not_good:"Not good",ok:"OK",good:"Good",very_good:"Very good",great:"Great"};function _l(s){let e,t,l,n,o,i=Ue[s[0].overall]+"",a,r,f,c,p,d,_,g=De(s[0].f1)+"",b,v,m,k,V,E,S=De(s[0].recall)+"",C,z,N,K,B,P,y=De(s[0].precision)+"",x,O,X,ee,he,ue,_e=De(s[0].roc_auc)+"",ke;return{c(){e=I("table"),t=I("tr"),l=I("td"),n=L("Overall score"),o=I("td"),a=L(i),f=G(),c=I("tr"),p=I("td"),d=L("F1"),_=I("td"),b=L(g),v=G(),m=I("tr"),k=I("td"),V=L("Recall"),E=I("td"),C=L(S),z=G(),N=I("tr"),K=I("td"),B=L("Precision"),P=I("td"),x=L(y),O=G(),X=I("tr"),ee=I("td"),he=L("Area under ROC"),ue=I("td"),ke=L(_e),this.h()},l(A){e=M(A,"TABLE",{class:!0});var U=w(e);t=M(U,"TR",{});var Ve=w(t);l=M(Ve,"TD",{class:!0});var se=w(l);n=Z(se,"Overall score"),se.forEach(u),o=M(Ve,"TD",{class:!0});var Re=w(o);a=Z(Re,i),Re.forEach(u),Ve.forEach(u),f=Q(U),c=M(U,"TR",{});var le=w(c);p=M(le,"TD",{class:!0});var te=w(p);d=Z(te,"F1"),te.forEach(u),_=M(le,"TD",{class:!0});var Ne=w(_);b=Z(Ne,g),Ne.forEach(u),le.forEach(u),v=Q(U),m=M(U,"TR",{});var R=w(m);k=M(R,"TD",{class:!0});var H=w(k);V=Z(H,"Recall"),H.forEach(u),E=M(R,"TD",{class:!0});var ce=w(E);C=Z(ce,S),ce.forEach(u),R.forEach(u),z=Q(U),N=M(U,"TR",{});var fe=w(N);K=M(fe,"TD",{class:!0});var Ee=w(K);B=Z(Ee,"Precision"),Ee.forEach(u),P=M(fe,"TD",{class:!0});var $e=w(P);x=Z($e,y),$e.forEach(u),fe.forEach(u),O=Q(U),X=M(U,"TR",{});var de=w(X);ee=M(de,"TD",{class:!0});var pe=w(ee);he=Z(pe,"Area under ROC"),pe.forEach(u),ue=M(de,"TD",{class:!0});var ge=w(ue);ke=Z(ge,_e),ge.forEach(u),de.forEach(u),U.forEach(u),this.h()},h(){$(l,"class","svelte-zc5pc5"),$(o,"class",r=xe(Ze[s[0].overall])+" svelte-zc5pc5"),$(p,"class","svelte-zc5pc5"),$(_,"class","svelte-zc5pc5"),$(k,"class","svelte-zc5pc5"),$(E,"class","svelte-zc5pc5"),$(K,"class","svelte-zc5pc5"),$(P,"class","svelte-zc5pc5"),$(ee,"class","svelte-zc5pc5"),$(ue,"class","svelte-zc5pc5"),$(e,"class","svelte-zc5pc5")},m(A,U){F(A,e,U),h(e,t),h(t,l),h(l,n),h(t,o),h(o,a),h(e,f),h(e,c),h(c,p),h(p,d),h(c,_),h(_,b),h(e,v),h(e,m),h(m,k),h(k,V),h(m,E),h(E,C),h(e,z),h(e,N),h(N,K),h(K,B),h(N,P),h(P,x),h(e,O),h(e,X),h(X,ee),h(ee,he),h(X,ue),h(ue,ke)},p(A,[U]){U&1&&i!==(i=Ue[A[0].overall]+"")&&ne(a,i),U&1&&r!==(r=xe(Ze[A[0].overall])+" svelte-zc5pc5")&&$(o,"class",r),U&1&&g!==(g=De(A[0].f1)+"")&&ne(b,g),U&1&&S!==(S=De(A[0].recall)+"")&&ne(C,S),U&1&&y!==(y=De(A[0].precision)+"")&&ne(x,y),U&1&&_e!==(_e=De(A[0].roc_auc)+"")&&ne(ke,_e)},i:J,o:J,d(A){A&&u(e)}}}function pl(s,e,t){let{metrics:l}=e;return s.$$set=n=>{"metrics"in n&&t(0,l=n.metrics)},[l]}class ft extends be{constructor(e){super(),ve(this,e,pl,_l,we,{metrics:0})}}function gl(s){const e=s.slice(),t=!0;return e[7]=t,e}function bl(s){let e,t;function l(){return s[6](s[7])}return e=new Ge({props:{icon:s[4].isLoading?Je:nt,class:"w-28 text-3xl",$$slots:{default:[kl]},$$scope:{ctx:s}}}),e.$on("click",l),{c(){Y(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){j(e,n,o),t=!0},p(n,o){s=n;const i={};o&16&&(i.icon=s[4].isLoading?Je:nt),o&256&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){W(e,n)}}}function vl(s){let e,t=Ue[s[2].metrics.overall]+"",l,n,o,i,a;return{c(){e=I("div"),l=L(t),this.h()},l(r){e=M(r,"DIV",{class:!0});var f=w(e);l=Z(f,t),f.forEach(u),this.h()},h(){$(e,"class",n="concept-score-pill cursor-default text-2xl font-light "+Ze[s[2].metrics.overall])},m(r,f){F(r,e,f),h(e,l),i||(a=je(o=We.call(null,e,{component:ft,props:{metrics:s[2].metrics}})),i=!0)},p(r,f){f&4&&t!==(t=Ue[r[2].metrics.overall]+"")&&ne(l,t),f&4&&n!==(n="concept-score-pill cursor-default text-2xl font-light "+Ze[r[2].metrics.overall])&&$(e,"class",n),o&&$t(o.update)&&f&4&&o.update.call(null,{component:ft,props:{metrics:r[2].metrics}})},i:J,o:J,d(r){r&&u(e),i=!1,a()}}}function wl(s){let e,t,l;return t=new Je({}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var o=w(e);q(t.$$.fragment,o),o.forEach(u),this.h()},h(){$(e,"class","flex flex-col items-center")},m(n,o){F(n,e,o),j(t,e,null),l=!0},p:J,i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){T(t.$$.fragment,n),l=!1},d(n){n&&u(e),W(t)}}}function kl(s){let e;return{c(){e=L("Compute")},l(t){e=Z(t,"Compute")},m(t,l){F(t,e,l)},d(t){t&&u(e)}}}function El(s){let e,t,l,n,o,i,a;const r=[wl,vl,bl],f=[];function c(d,_){var g;return d[3]?0:(g=d[2])!=null&&g.metrics?1:2}function p(d,_){return _===2?gl(d):d}return o=c(s),i=f[o]=r[o](p(s,o)),{c(){e=I("div"),t=I("div"),l=L(s[1]),n=G(),i.c(),this.h()},l(d){e=M(d,"DIV",{class:!0,style:!0});var _=w(e);t=M(_,"DIV",{class:!0});var g=w(t);l=Z(g,s[1]),g.forEach(u),n=Q(_),i.l(_),_.forEach(u),this.h()},h(){$(t,"class","text-gray-500"),$(e,"class","flex w-36 flex-col items-center gap-y-2 rounded-md border border-b-0 border-gray-200 p-4 shadow-md"),Ke(e,"height","103px")},m(d,_){F(d,e,_),h(e,t),h(t,l),h(e,n),f[o].m(e,null),a=!0},p(d,[_]){(!a||_&2)&&ne(l,d[1]);let g=o;o=c(d),o===g?f[o].p(p(d,o),_):(ie(),T(f[g],1,1,()=>{f[g]=null}),oe(),i=f[o],i?i.p(p(d,o),_):(i=f[o]=r[o](p(d,o)),i.c()),D(i,1),i.m(e,null))},i(d){a||(D(i),a=!0)},o(d){T(i),a=!1},d(d){d&&u(e),f[o].d()}}}function $l(s,e,t){let l,{concept:n}=e,{embedding:o}=e,{model:i}=e,{isFetching:a}=e;const r=Ft();Ie(s,r,c=>t(4,l=c));const f=c=>l.mutate([n.namespace,n.concept_name,o,c]);return s.$$set=c=>{"concept"in c&&t(0,n=c.concept),"embedding"in c&&t(1,o=c.embedding),"model"in c&&t(2,i=c.model),"isFetching"in c&&t(3,a=c.isFetching)},[n,o,i,a,l,r,f]}class Dl extends be{constructor(e){super(),ve(this,e,$l,El,we,{concept:0,embedding:1,model:2,isFetching:3})}}function ut(s,e,t){const l=s.slice();return l[22]=e[t],l}function Vl(s){let e;return{c(){e=L("Compute")},l(t){e=Z(t,"Compute")},m(t,l){F(t,e,l)},d(t){t&&u(e)}}}function dt(s){let e,t;return e=new qt({props:{value:s[22].name}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const o={};n&1024&&(o.value=l[22].name),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Cl(s){var i;let e,t,l=((i=s[10])==null?void 0:i.data)||[],n=[];for(let a=0;a<l.length;a+=1)n[a]=dt(ut(s,l,a));const o=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Le()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=Le()},m(a,r){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(a,r);F(a,e,r),t=!0},p(a,r){var f;if(r&1024){l=((f=a[10])==null?void 0:f.data)||[];let c;for(c=0;c<l.length;c+=1){const p=ut(a,l,c);n[c]?(n[c].p(p,r),D(n[c],1)):(n[c]=dt(p),n[c].c(),D(n[c],1),n[c].m(e.parentNode,e))}for(ie(),c=l.length;c<n.length;c+=1)o(c);oe()}},i(a){if(!t){for(let r=0;r<l.length;r+=1)D(n[r]);t=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)T(n[r]);t=!1},d(a){qe(n,a),a&&u(e)}}}function Il(s){let e,t,l,n,o,i=s[2].toFixed(3)+"",a,r,f,c;return f=new xt({props:{text:s[0],row:s[5],spanPaths:s[7],spanValueInfos:s[6],embeddings:s[1]?[s[1]]:[]}}),{c(){e=I("div"),t=I("span"),l=L("Max score:"),n=G(),o=I("span"),a=L(i),r=G(),Y(f.$$.fragment),this.h()},l(p){e=M(p,"DIV",{class:!0});var d=w(e);t=M(d,"SPAN",{class:!0});var _=w(t);l=Z(_,"Max score:"),_.forEach(u),n=Q(d),o=M(d,"SPAN",{class:!0});var g=w(o);a=Z(g,i),g.forEach(u),d.forEach(u),r=Q(p),q(f.$$.fragment,p),this.h()},h(){$(t,"class","font-medium"),$(o,"class","rounded p-0.5"),Ke(o,"background-color",tt(s[2])),$(e,"class","my-2")},m(p,d){F(p,e,d),h(e,t),h(t,l),h(e,n),h(e,o),h(o,a),F(p,r,d),j(f,p,d),c=!0},p(p,d){(!c||d&4)&&i!==(i=p[2].toFixed(3)+"")&&ne(a,i),d&4&&Ke(o,"background-color",tt(p[2]));const _={};d&1&&(_.text=p[0]),d&32&&(_.row=p[5]),d&128&&(_.spanPaths=p[7]),d&64&&(_.spanValueInfos=p[6]),d&2&&(_.embeddings=p[1]?[p[1]]:[]),f.$set(_)},i(p){c||(D(f.$$.fragment,p),c=!0)},o(p){T(f.$$.fragment,p),c=!1},d(p){p&&u(e),p&&u(r),W(f,p)}}}function Ml(s){let e,t;return e=new Mt({}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:J,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Tl(s){let e,t,l,n,o,i,a,r,f,c,p,d,_,g,b,v;l=new ll({props:{value:s[4],cols:50,placeholder:"Paste text to try the concept.",rows:6,class:"mb-2"}}),l.$on("input",s[13]),a=new Ge({props:{$$slots:{default:[Vl]},$$scope:{ctx:s}}}),a.$on("click",s[19]);function m(C){s[20](C)}let k={labelText:"Embedding",$$slots:{default:[Cl]},$$scope:{ctx:s}};s[1]!==void 0&&(k.selected=s[1]),c=new Ot({props:k}),Me.push(()=>Te(c,"selected",m));const V=[Ml,Il],E=[];function S(C,z){var N;return C[8]&&((N=C[3])!=null&&N.isFetching)?0:C[5]!=null&&C[0]!=null?1:-1}return~(g=S(s))&&(b=E[g]=V[g](s)),{c(){e=I("div"),t=I("div"),Y(l.$$.fragment),n=G(),o=I("div"),i=I("div"),Y(a.$$.fragment),r=G(),f=I("div"),Y(c.$$.fragment),d=G(),_=I("div"),b&&b.c(),this.h()},l(C){e=M(C,"DIV",{class:!0});var z=w(e);t=M(z,"DIV",{});var N=w(t);q(l.$$.fragment,N),n=Q(N),o=M(N,"DIV",{class:!0});var K=w(o);i=M(K,"DIV",{class:!0});var B=w(i);q(a.$$.fragment,B),B.forEach(u),r=Q(K),f=M(K,"DIV",{class:!0});var P=w(f);q(c.$$.fragment,P),P.forEach(u),K.forEach(u),N.forEach(u),d=Q(z),_=M(z,"DIV",{class:!0});var y=w(_);b&&b.l(y),y.forEach(u),z.forEach(u),this.h()},h(){$(i,"class","pt-4"),$(f,"class","mb-2 w-32"),$(o,"class","flex flex-row justify-between"),$(_,"class","mt-4 border-gray-200"),Ce(_,"border-t",s[0]!=null),$(e,"class","flex flex-col gap-x-8")},m(C,z){F(C,e,z),h(e,t),j(l,t,null),h(t,n),h(t,o),h(o,i),j(a,i,null),h(o,r),h(o,f),j(c,f,null),h(e,d),h(e,_),~g&&E[g].m(_,null),v=!0},p(C,[z]){const N={};z&16&&(N.value=C[4]),l.$set(N);const K={};z&33554432&&(K.$$scope={dirty:z,ctx:C}),a.$set(K);const B={};z&33555456&&(B.$$scope={dirty:z,ctx:C}),!p&&z&2&&(p=!0,B.selected=C[1],Ae(()=>p=!1)),c.$set(B);let P=g;g=S(C),g===P?~g&&E[g].p(C,z):(b&&(ie(),T(E[P],1,1,()=>{E[P]=null}),oe()),~g?(b=E[g],b?b.p(C,z):(b=E[g]=V[g](C),b.c()),D(b,1),b.m(_,null)):b=null),(!v||z&1)&&Ce(_,"border-t",C[0]!=null)},i(C){v||(D(l.$$.fragment,C),D(a.$$.fragment,C),D(c.$$.fragment,C),D(b),v=!0)},o(C){T(l.$$.fragment,C),T(a.$$.fragment,C),T(c.$$.fragment,C),T(b),v=!1},d(C){C&&u(e),W(l),W(a),W(c),~g&&E[g].d()}}}function Al(s,e,t){var x;let l,n,o,i,a=J,r=()=>(a(),a=Pe(o,O=>t(3,i=O)),o),f,c=J,p=()=>(c(),c=Pe(n,O=>t(18,f=O)),n),d,_;s.$$.on_destroy.push(()=>a()),s.$$.on_destroy.push(()=>c());let{concept:g}=e,{example:b}=e;const v=It();Ie(s,v,O=>t(10,_=O));const m=tl();Ie(s,m,O=>t(21,d=O));let k=(x=b.text)==null?void 0:x.trim();Nt(()=>{C()});function V(O){t(4,k=O.target.value),t(0,E=void 0)}let E,S=d.embedding;function C(){t(0,E=k)}let z,N,K,B;const P=()=>C();function y(O){S=O,t(1,S)}return s.$$set=O=>{"concept"in O&&t(15,g=O.concept),"example"in O&&t(16,b=O.example)},s.$$.update=()=>{var O;if(s.$$.dirty&65536&&b.text&&(t(4,k=b.text.trim()),t(0,E=void 0)),s.$$.dirty&32770&&t(17,l={signal_name:"concept_score",concept_name:g.concept_name,namespace:g.namespace,embedding:S}),s.$$.dirty&131072&&p(t(9,n=l.embedding?Ht({signal:l}):void 0)),s.$$.dirty&32771&&r(t(8,o=S!=null&&E!=null?Lt(g.namespace,g.concept_name,S,{examples:[{text:E}]}):null)),s.$$.dirty&393226&&(i==null?void 0:i.data)!=null&&S!=null&&((O=f==null?void 0:f.data)==null?void 0:O.fields)!=null){const X=Zt(f.data.fields);X.signal=l,t(5,z=Ut(i.data[0],X));const ee=Yt(X);t(7,K=ee.spanPaths),t(6,N=ee.spanValueInfos)}if(s.$$.dirty&12&&(i==null?void 0:i.data)!=null){t(2,B=0);for(const X of i.data[0]){const ee=X.score;t(2,B=Math.max(ee,B))}}},[E,S,B,i,k,z,N,K,o,n,_,v,m,V,C,g,b,l,f,P,y]}class Sl extends be{constructor(e){super(),ve(this,e,Al,Tl,we,{concept:15,example:16})}}function yl(s,e,t,l,n,o){const i={...s};if(e==null||t==null)return i;const a=[...e,...t],r=new Set,f=[];for(const g of a){const b=Be.value(Fe(g,[Oe]),"string");if(b==null||r.has(b))continue;r.add(b);const v=jt(g,n);for(const m of v){const k=Be.value(m,"string");if(k==null)continue;const V=`${l.namespace}/${l.concept_name}`,E=Fe(m,[`${V}/${o}/preview`]);if(E==null)continue;const S=Fe(m,[`${V}/labels/preview`]),C=[];if(S!=null)for(const z of S){const N=Be.span(z);N!=null&&C.push(N)}for(const z of E){const N=Be.span(z);if(N==null||!C.every(y=>y.start>N.end||y.end<N.start))continue;const B=Fe(z,["score"]);if(B==null)continue;const P=Be.value(B,"float32");P!=null&&f.push({rowid:b,text:k,span:N,score:P})}}}function c(g){return{rowid:g.rowid,text:Wt(g.text,g.span.start,g.span.end),score:g.score}}f.sort((g,b)=>b.score-g.score);const p=f[0],d=f.slice().reverse().find(g=>g!=p);f.sort((g,b)=>Math.abs(g.score-.5)-Math.abs(b.score-.5));const _=f.find(g=>g!=p&&g!=d);return p!=null&&i.positive==null&&(i.positive=c(p)),_!=null&&i.neutral==null&&(i.neutral=c(_)),d!=null&&i.negative==null&&(i.negative=c(d)),i}function mt(s,e,t){const l=s.slice();return l[21]=e[t],l}function zl(s){const e=s.slice(),t=Bl(e[21].score);e[24]=t;const l=Fl(e[21].score);return e[25]=l,e}function Pl(s){let e,t,l,n,o,i,a,r,f,c=s[21].text+"",p,d,_,g=s[25]+"",b,v,m=De(s[21].score,2)+"",k,V,E,S,C,z;n=new yt({});function N(){return s[18](s[21])}a=new zt({});function K(){return s[19](s[21])}return{c(){e=I("div"),t=I("div"),l=I("button"),Y(n.$$.fragment),o=G(),i=I("button"),Y(a.$$.fragment),r=G(),f=I("div"),p=L(c),d=G(),_=I("div"),b=L(g),v=G(),k=L(m),V=G(),this.h()},l(B){e=M(B,"DIV",{class:!0});var P=w(e);t=M(P,"DIV",{class:!0});var y=w(t);l=M(y,"BUTTON",{class:!0});var x=w(l);q(n.$$.fragment,x),x.forEach(u),o=Q(y),i=M(y,"BUTTON",{class:!0});var O=w(i);q(a.$$.fragment,O),O.forEach(u),y.forEach(u),r=Q(P),f=M(P,"DIV",{class:!0});var X=w(f);p=Z(X,c),X.forEach(u),d=Q(P),_=M(P,"DIV",{class:!0});var ee=w(_);b=Z(ee,g),v=Q(ee),k=Z(ee,m),ee.forEach(u),V=Q(P),P.forEach(u),this.h()},h(){$(l,"class","p-2 hover:bg-gray-200"),Ce(l,"text-blue-500",s[21].label===!0),$(i,"class","p-2 hover:bg-gray-200"),Ce(i,"text-red-500",s[21].label===!1),$(t,"class","mr-2 flex flex-shrink-0 gap-x-1"),$(f,"class","flex-grow"),$(_,"class","w-40 flex-shrink-0 text-right"),$(e,"class",E=`flex flex-grow items-center whitespace-break-spaces rounded-md border border-gray-300 p-4 pl-2 ${s[24]}`)},m(B,P){F(B,e,P),h(e,t),h(t,l),j(n,l,null),h(t,o),h(t,i),j(a,i,null),h(e,r),h(e,f),h(f,p),h(e,d),h(e,_),h(_,b),h(_,v),h(_,k),h(e,V),S=!0,C||(z=[Qe(l,"click",N),Qe(i,"click",K)],C=!0)},p(B,P){s=B,(!S||P&2)&&Ce(l,"text-blue-500",s[21].label===!0),(!S||P&2)&&Ce(i,"text-red-500",s[21].label===!1),(!S||P&2)&&c!==(c=s[21].text+"")&&ne(p,c),(!S||P&2)&&g!==(g=s[25]+"")&&ne(b,g),(!S||P&2)&&m!==(m=De(s[21].score,2)+"")&&ne(k,m),(!S||P&2&&E!==(E=`flex flex-grow items-center whitespace-break-spaces rounded-md border border-gray-300 p-4 pl-2 ${s[24]}`))&&$(e,"class",E)},i(B){S||(D(n.$$.fragment,B),D(a.$$.fragment,B),S=!0)},o(B){T(n.$$.fragment,B),T(a.$$.fragment,B),S=!1},d(B){B&&u(e),W(n),W(a),C=!1,Dt(z)}}}function Rl(s){let e,t;return e=new Mt({props:{paragraph:!0,lines:2}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:J,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function ht(s){let e,t,l,n,o;const i=[Rl,Pl],a=[];function r(c,p){return p&3&&(e=null),e==null&&(e=!!(c[21]==null||c[0].includes(c[21].rowid))),e?0:1}function f(c,p){return p===1?zl(c):c}return t=r(s,-1),l=a[t]=i[t](f(s,t)),{c(){l.c(),n=Le()},l(c){l.l(c),n=Le()},m(c,p){a[t].m(c,p),F(c,n,p),o=!0},p(c,p){let d=t;t=r(c,p),t===d?a[t].p(f(c,t),p):(ie(),T(a[d],1,1,()=>{a[d]=null}),oe(),l=a[t],l?l.p(f(c,t),p):(l=a[t]=i[t](f(c,t)),l.c()),D(l,1),l.m(n.parentNode,n))},i(c){o||(D(l),o=!0)},o(c){T(l),o=!1},d(c){a[t].d(c),c&&u(n)}}}function Nl(s){let e,t,l=s[1],n=[];for(let i=0;i<l.length;i+=1)n[i]=ht(mt(s,l,i));const o=i=>T(n[i],1,1,()=>{n[i]=null});return{c(){e=I("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=M(i,"DIV",{class:!0});var a=w(e);for(let r=0;r<n.length;r+=1)n[r].l(a);a.forEach(u),this.h()},h(){$(e,"class","flex flex-col gap-y-4")},m(i,a){F(i,e,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);t=!0},p(i,[a]){if(a&35){l=i[1];let r;for(r=0;r<l.length;r+=1){const f=mt(i,l,r);n[r]?(n[r].p(f,a),D(n[r],1)):(n[r]=ht(f),n[r].c(),D(n[r],1),n[r].m(e,null))}for(ie(),r=l.length;r<n.length;r+=1)o(r);oe()}},i(i){if(!t){for(let a=0;a<l.length;a+=1)D(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)T(n[a]);t=!1},d(i){i&&u(e),qe(n,i)}}}const _t=100;function Bl(s){return s<.2?"bg-red-500/10":s<.8?"bg-yellow-500/10":"bg-blue-500/10"}function Fl(s){return s<.2?"Likely not in concept":s<.8?"Uncertain":"Likely in concept"}function Ol(s,e,t){let l,n,o,i,a,r,f,c,p=J,d=()=>(p(),p=Pe(a,y=>t(16,c=y)),a),_,g=J,b=()=>(g(),g=Pe(n,y=>t(17,_=y)),n);s.$$.on_destroy.push(()=>p()),s.$$.on_destroy.push(()=>g());let{dataset:v}=e,{concept:m}=e,{fieldPath:k}=e,{schema:V}=e,{embedding:E}=e;const S=Tt();Ie(s,S,y=>t(20,f=y));let C={},z={},N=[];function K(y,x){if(y==null)return;const O={text:y.text,label:x},X=Object.keys(z).find(ee=>z[ee]===y);t(11,C={...z}),t(0,N=[y.rowid,...N]),f.mutate([m.namespace,m.concept_name,{insert:[O]}],{onSuccess:()=>{t(11,C={...C,[X]:void 0})},onSettled:()=>{t(0,N=N.filter(ee=>ee!==y.rowid))}})}const B=y=>K(y,!0),P=y=>K(y,!1);return s.$$set=y=>{"dataset"in y&&t(6,v=y.dataset),"concept"in y&&t(7,m=y.concept),"fieldPath"in y&&t(8,k=y.fieldPath),"schema"in y&&t(9,V=y.schema),"embedding"in y&&t(10,E=y.embedding)},s.$$.update=()=>{var y,x;s.$$.dirty&1408&&t(15,l={path:k,type:"concept",concept_namespace:m.namespace,concept_name:m.concept_name,embedding:E}),s.$$.dirty&33600&&b(t(3,n=et(v.namespace,v.name,{columns:[Oe,k],limit:_t,combine_columns:!0,searches:[l]},V))),s.$$.dirty&1152&&t(14,o={signal_name:"concept_score",namespace:m.namespace,concept_name:m.concept_name,embedding:E}),s.$$.dirty&128&&t(13,i={signal_name:"concept_labels",namespace:m.namespace,concept_name:m.concept_name}),s.$$.dirty&25408&&d(t(2,a=et(v.namespace,v.name,{columns:[Oe,k,{path:k,signal_udf:o},{path:k,signal_udf:i}],limit:_t,combine_columns:!0,sort_by:[Oe]},V))),s.$$.dirty&200064&&t(12,z=yl(C,_.isFetching||(y=_.data)==null?void 0:y.rows,c.isFetching||(x=c.data)==null?void 0:x.rows,m,k,E)),s.$$.dirty&4096&&t(1,r=[z.positive,z.neutral,z.negative])},[N,r,a,n,S,K,v,m,k,V,E,C,z,i,o,l,c,_,B,P]}class Hl extends be{constructor(e){super(),ve(this,e,Ol,Nl,we,{dataset:6,concept:7,fieldPath:8,schema:9,embedding:10})}}function pt(s){let e,t;return e=new Ge({props:{class:"dataset-link top-7 h-8",icon:Gt,iconDescription:"Open dataset and apply concept."}}),e.$on("click",s[6]),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:J,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function gt(s){let e,t,l;return t=new Hl({props:{concept:s[0],dataset:s[1],fieldPath:s[3],schema:s[2],embedding:s[4]}}),{c(){e=I("div"),Y(t.$$.fragment)},l(n){e=M(n,"DIV",{});var o=w(e);q(t.$$.fragment,o),o.forEach(u)},m(n,o){F(n,e,o),j(t,e,null),l=!0},p(n,o){const i={};o&1&&(i.concept=n[0]),o&2&&(i.dataset=n[1]),o&8&&(i.fieldPath=n[3]),o&4&&(i.schema=n[2]),o&16&&(i.embedding=n[4]),t.$set(i)},i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){T(t.$$.fragment,n),l=!1},d(n){n&&u(e),W(t)}}}function bt(s){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"No embeddings",caption:"Dataset has no fields with computed embeddings. Please compute an embedding index before using the labeler on this dataset."}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Ll(s){let e,t,l,n,o,i,a,r,f,c,p;function d(V){s[8](V)}function _(V){s[9](V)}function g(V){s[10](V)}let b={};s[1]!==void 0&&(b.dataset=s[1]),s[3]!==void 0&&(b.path=s[3]),s[4]!==void 0&&(b.embedding=s[4]),n=new Pt({props:b}),Me.push(()=>Te(n,"dataset",d)),Me.push(()=>Te(n,"path",_)),Me.push(()=>Te(n,"embedding",g));let v=s[3]!=null&&s[4]!=null&&pt(s),m=s[1]!=null&&s[3]!=null&&s[2]!=null&&s[4]!=null&&gt(s),k=s[4]==null&&bt();return{c(){e=I("div"),t=I("div"),l=I("div"),Y(n.$$.fragment),r=G(),v&&v.c(),f=G(),m&&m.c(),c=G(),k&&k.c(),this.h()},l(V){e=M(V,"DIV",{class:!0});var E=w(e);t=M(E,"DIV",{class:!0});var S=w(t);l=M(S,"DIV",{class:!0});var C=w(l);q(n.$$.fragment,C),C.forEach(u),r=Q(S),v&&v.l(S),S.forEach(u),f=Q(E),m&&m.l(E),c=Q(E),k&&k.l(E),E.forEach(u),this.h()},h(){$(l,"class","flex-grow"),$(t,"class","flex flex-row gap-x-4"),$(e,"class","flex flex-col gap-y-4")},m(V,E){F(V,e,E),h(e,t),h(t,l),j(n,l,null),h(t,r),v&&v.m(t,null),h(e,f),m&&m.m(e,null),h(e,c),k&&k.m(e,null),p=!0},p(V,[E]){const S={};!o&&E&2&&(o=!0,S.dataset=V[1],Ae(()=>o=!1)),!i&&E&8&&(i=!0,S.path=V[3],Ae(()=>i=!1)),!a&&E&16&&(a=!0,S.embedding=V[4],Ae(()=>a=!1)),n.$set(S),V[3]!=null&&V[4]!=null?v?(v.p(V,E),E&24&&D(v,1)):(v=pt(V),v.c(),D(v,1),v.m(t,null)):v&&(ie(),T(v,1,1,()=>{v=null}),oe()),V[1]!=null&&V[3]!=null&&V[2]!=null&&V[4]!=null?m?(m.p(V,E),E&30&&D(m,1)):(m=gt(V),m.c(),D(m,1),m.m(e,c)):m&&(ie(),T(m,1,1,()=>{m=null}),oe()),V[4]==null?k?E&16&&D(k,1):(k=bt(),k.c(),D(k,1),k.m(e,null)):k&&(ie(),T(k,1,1,()=>{k=null}),oe())},i(V){p||(D(n.$$.fragment,V),D(v),D(m),D(k),p=!0)},o(V){T(n.$$.fragment,V),T(v),T(m),T(k),p=!1},d(V){V&&u(e),W(n),v&&v.d(),m&&m.d(),k&&k.d()}}}function Zl(s,e,t){let l,n,o=J,i=()=>(o(),o=Pe(l,v=>t(7,n=v)),l);s.$$.on_destroy.push(()=>o());let{concept:a}=e,r,f,c,p;function d(){if(c==null||p==null||r==null)return;const v=At(r.namespace,r.name);v.addSearch({path:c,type:"concept",concept_namespace:a.namespace,concept_name:a.concept_name,embedding:p}),Ct(St(r.namespace,r.name,Vt(v)))}function _(v){r=v,t(1,r)}function g(v){c=v,t(3,c)}function b(v){p=v,t(4,p)}return s.$$set=v=>{"concept"in v&&t(0,a=v.concept)},s.$$.update=()=>{s.$$.dirty&2&&i(t(5,l=r!=null&&r.namespace&&(r!=null&&r.name)?Qt(r.namespace,r.name):null)),s.$$.dirty&128&&t(2,f=n==null?void 0:n.data)},[a,r,f,c,p,l,d,n,_,g,b]}class Ul extends be{constructor(e){super(),ve(this,e,Zl,Ll,we,{concept:0})}}function vt(s,e,t){var o;const l=s.slice();l[32]=e[t];const n=(o=l[11].data)==null?void 0:o.find(function(...a){return s[26](l[32],...a)});return l[33]=n,l}function Yl(s){let e,t,l,n,o;return t=new cl({props:{class:"ml-2"}}),{c(){e=I("div"),Y(t.$$.fragment)},l(i){e=M(i,"DIV",{});var a=w(e);q(t.$$.fragment,a),a.forEach(u)},m(i,a){F(i,e,a),j(t,e,null),l=!0,n||(o=je(We.call(null,e,{text:"This concept is publicly visible."})),n=!0)},i(i){l||(D(t.$$.fragment,i),l=!0)},o(i){T(t.$$.fragment,i),l=!1},d(i){i&&u(e),W(t),n=!1,o()}}}function ql(s){let e,t,l,n,o;return t=new dl({props:{class:"ml-2"}}),{c(){e=I("div"),Y(t.$$.fragment)},l(i){e=M(i,"DIV",{});var a=w(e);q(t.$$.fragment,a),a.forEach(u)},m(i,a){F(i,e,a),j(t,e,null),l=!0,n||(o=je(We.call(null,e,{text:"Your concepts are only visible to you when logged in with Google."})),n=!0)},i(i){l||(D(t.$$.fragment,i),l=!0)},o(i){T(t.$$.fragment,i),l=!1},d(i){i&&u(e),W(t),n=!1,o()}}}function wt(s){let e,t=s[0].metadata.description+"",l;return{c(){e=I("div"),l=L(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var o=w(e);l=Z(o,t),o.forEach(u),this.h()},h(){$(e,"class","text text-base text-gray-600")},m(n,o){F(n,e,o),h(e,l)},p(n,o){o[0]&1&&t!==(t=n[0].metadata.description+"")&&ne(l,t)},d(n){n&&u(e)}}}function jl(s){let e,t;return{c(){e=I("div"),t=L("Try it"),this.h()},l(l){e=M(l,"DIV",{slot:!0,class:!0});var n=w(e);t=Z(n,"Try it"),n.forEach(u),this.h()},h(){$(e,"slot","above"),$(e,"class","text-md font-semibold")},m(l,n){F(l,e,n),h(e,t)},p:J,d(l){l&&u(e)}}}function Wl(s){let e,t;return{c(){e=I("div"),t=L("No examples to preview. Please add examples."),this.h()},l(l){e=M(l,"DIV",{class:!0});var n=w(e);t=Z(n,"No examples to preview. Please add examples."),n.forEach(u),this.h()},h(){$(e,"class","text-gray-600")},m(l,n){F(l,e,n),h(e,t)},p:J,i:J,o:J,d(l){l&&u(e)}}}function Gl(s){let e,t;return e=new Sl({props:{example:s[6],concept:s[0]}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const o={};n[0]&64&&(o.example=l[6]),n[0]&1&&(o.concept=l[0]),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Ql(s){let e,t,l,n;const o=[Gl,Wl],i=[];function a(r,f){return r[6]?0:1}return t=a(s),l=i[t]=o[t](s),{c(){e=I("div"),l.c(),this.h()},l(r){e=M(r,"DIV",{slot:!0});var f=w(e);l.l(f),f.forEach(u),this.h()},h(){$(e,"slot","below")},m(r,f){F(r,e,f),i[t].m(e,null),n=!0},p(r,f){let c=t;t=a(r),t===c?i[t].p(r,f):(ie(),T(i[c],1,1,()=>{i[c]=null}),oe(),l=i[t],l?l.p(r,f):(l=i[t]=o[t](r),l.c()),D(l,1),l.m(e,null))},i(r){n||(D(l),n=!0)},o(r){T(l),n=!1},d(r){r&&u(e),i[t].d()}}}function Kl(s){let e,t;return{c(){e=I("div"),t=L("Apply to a dataset"),this.h()},l(l){e=M(l,"DIV",{slot:!0,class:!0});var n=w(e);t=Z(n,"Apply to a dataset"),n.forEach(u),this.h()},h(){$(e,"slot","above"),$(e,"class","text-md font-semibold")},m(l,n){F(l,e,n),h(e,t)},p:J,d(l){l&&u(e)}}}function Jl(s){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"Choose a dataset with a computed embedding",caption:"Dataset has no fields with computed embeddings. Please compute an embedding index before you can search by concept."}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:J,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Xl(s){let e,t,l;return t=new Ge({props:{iconDescription:"Open dataset and apply concept.",$$slots:{default:[xl]},$$scope:{ctx:s}}}),t.$on("click",s[25]),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var o=w(e);q(t.$$.fragment,o),o.forEach(u),this.h()},h(){$(e,"class","mt-4")},m(n,o){F(n,e,o),j(t,e,null),l=!0},p(n,o){const i={};o[1]&32&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){T(t.$$.fragment,n),l=!1},d(n){n&&u(e),W(t)}}}function xl(s){let e;return{c(){e=L("Search by concept")},l(t){e=Z(t,"Search by concept")},m(t,l){F(t,e,l)},d(t){t&&u(e)}}}function en(s){let e,t,l,n,o,i,a,r,f;function c(m){s[22](m)}function p(m){s[23](m)}function d(m){s[24](m)}let _={};s[2]!==void 0&&(_.dataset=s[2]),s[3]!==void 0&&(_.path=s[3]),s[4]!==void 0&&(_.embedding=s[4]),t=new Pt({props:_}),Me.push(()=>Te(t,"dataset",c)),Me.push(()=>Te(t,"path",p)),Me.push(()=>Te(t,"embedding",d));const g=[Xl,Jl],b=[];function v(m,k){return m[2]!=null&&m[3]!=null&&m[4]!=null?0:1}return a=v(s),r=b[a]=g[a](s),{c(){e=I("div"),Y(t.$$.fragment),i=G(),r.c(),this.h()},l(m){e=M(m,"DIV",{slot:!0});var k=w(e);q(t.$$.fragment,k),i=Q(k),r.l(k),k.forEach(u),this.h()},h(){$(e,"slot","below")},m(m,k){F(m,e,k),j(t,e,null),h(e,i),b[a].m(e,null),f=!0},p(m,k){const V={};!l&&k[0]&4&&(l=!0,V.dataset=m[2],Ae(()=>l=!1)),!n&&k[0]&8&&(n=!0,V.path=m[3],Ae(()=>n=!1)),!o&&k[0]&16&&(o=!0,V.embedding=m[4],Ae(()=>o=!1)),t.$set(V);let E=a;a=v(m),a===E?b[a].p(m,k):(ie(),T(b[E],1,1,()=>{b[E]=null}),oe(),r=b[a],r?r.p(m,k):(r=b[a]=g[a](m),r.c()),D(r,1),r.m(e,null))},i(m){f||(D(t.$$.fragment,m),D(r),f=!0)},o(m){T(t.$$.fragment,m),T(r),f=!1},d(m){m&&u(e),W(t),b[a].d()}}}function kt(s){let e,t;return e=new He({props:{expanded:!0,$$slots:{below:[ln],above:[tn]},$$scope:{ctx:s}}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const o={};n[0]&3073|n[1]&32&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function tn(s){let e,t;return{c(){e=I("div"),t=L("Metrics"),this.h()},l(l){e=M(l,"DIV",{slot:!0,class:!0});var n=w(e);t=Z(n,"Metrics"),n.forEach(u),this.h()},h(){$(e,"slot","above"),$(e,"class","text-md font-semibold")},m(l,n){F(l,e,n),h(e,t)},p:J,d(l){l&&u(e)}}}function Et(s){let e,t;return e=new Dl({props:{concept:s[0],embedding:s[32].name,model:s[33],isFetching:s[11].isFetching}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const o={};n[0]&1&&(o.concept=l[0]),n[0]&1024&&(o.embedding=l[32].name),n[0]&3072&&(o.model=l[33]),n[0]&2048&&(o.isFetching=l[11].isFetching),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function ln(s){let e,t,l=s[10].data,n=[];for(let i=0;i<l.length;i+=1)n[i]=Et(vt(s,l,i));const o=i=>T(n[i],1,1,()=>{n[i]=null});return{c(){e=I("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=M(i,"DIV",{slot:!0,class:!0});var a=w(e);for(let r=0;r<n.length;r+=1)n[r].l(a);a.forEach(u),this.h()},h(){$(e,"slot","below"),$(e,"class","model-metrics flex flex-wrap gap-x-4 gap-y-4")},m(i,a){F(i,e,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);t=!0},p(i,a){if(a[0]&3073){l=i[10].data;let r;for(r=0;r<l.length;r+=1){const f=vt(i,l,r);n[r]?(n[r].p(f,a),D(n[r],1)):(n[r]=Et(f),n[r].c(),D(n[r],1),n[r].m(e,null))}for(ie(),r=l.length;r<n.length;r+=1)o(r);oe()}},i(i){if(!t){for(let a=0;a<l.length;a+=1)D(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)T(n[a]);t=!1},d(i){i&&u(e),qe(n,i)}}}function nn(s){let e,t;return{c(){e=I("div"),t=L("Collect labels"),this.h()},l(l){e=M(l,"DIV",{slot:!0,class:!0});var n=w(e);t=Z(n,"Collect labels"),n.forEach(u),this.h()},h(){$(e,"slot","above"),$(e,"class","text-md font-semibold")},m(l,n){F(l,e,n),h(e,t)},p:J,d(l){l&&u(e)}}}function sn(s){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"You don't have permission to edit this concept",caption:"You can only edit concepts you created."}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p:J,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function an(s){let e,t;return e=new Ul({props:{concept:s[0]}}),{c(){Y(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const o={};n[0]&1&&(o.concept=l[0]),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function rn(s){let e,t,l,n;const o=[an,sn],i=[];function a(r,f){return r[8]?0:1}return t=a(s),l=i[t]=o[t](s),{c(){e=I("div"),l.c(),this.h()},l(r){e=M(r,"DIV",{slot:!0,class:!0});var f=w(e);l.l(f),f.forEach(u),this.h()},h(){$(e,"slot","below"),$(e,"class","w-full")},m(r,f){F(r,e,f),i[t].m(e,null),n=!0},p(r,f){let c=t;t=a(r),t===c?i[t].p(r,f):(ie(),T(i[c],1,1,()=>{i[c]=null}),oe(),l=i[t],l?l.p(r,f):(l=i[t]=o[t](r),l.c()),D(l,1),l.m(e,null))},i(r){n||(D(l),n=!0)},o(r){T(l),n=!1},d(r){r&&u(e),i[t].d()}}}function on(s){var Ne;let e,t,l,n=s[0].concept_name+"",o,i,a,r,f,c,p,d,_,g,b,v,m,k,V,E,S,C,z=s[1].length+"",N,K,B,P,y,x,O,X,ee,he=s[7].length+"",ue,_e,ke,A,U;const Ve=[ql,Yl],se=[];function Re(R,H){var ce,fe;return R[9]==R[0].namespace&&!((ce=R[0].metadata)!=null&&ce.is_public)?0:(fe=R[0].metadata)!=null&&fe.is_public?1:-1}~(a=Re(s))&&(r=se[a]=Ve[a](s));let le=((Ne=s[0].metadata)==null?void 0:Ne.description)&&wt(s);p=new He({props:{expanded:!0,$$slots:{below:[Ql],above:[jl]},$$scope:{ctx:s}}}),_=new He({props:{$$slots:{below:[en],above:[Kl]},$$scope:{ctx:s}}});let te=s[10].data&&kt(s);return v=new He({props:{$$slots:{below:[rn],above:[nn]},$$scope:{ctx:s}}}),S=new yt({}),P=new ct({props:{data:s[1],canEditConcept:s[8]}}),P.$on("remove",s[27]),P.$on("add",s[28]),X=new zt({}),A=new ct({props:{data:s[7],canEditConcept:s[8]}}),A.$on("remove",s[29]),A.$on("add",s[30]),{c(){e=I("div"),t=I("div"),l=I("div"),o=L(n),i=G(),r&&r.c(),f=G(),le&&le.c(),c=G(),Y(p.$$.fragment),d=G(),Y(_.$$.fragment),g=G(),te&&te.c(),b=G(),Y(v.$$.fragment),m=G(),k=I("div"),V=I("div"),E=I("span"),Y(S.$$.fragment),C=L(" In concept ("),N=L(z),K=L(" examples)"),B=G(),Y(P.$$.fragment),y=G(),x=I("div"),O=I("span"),Y(X.$$.fragment),ee=L("Not in concept ("),ue=L(he),_e=L(" examples)"),ke=G(),Y(A.$$.fragment),this.h()},l(R){e=M(R,"DIV",{class:!0});var H=w(e);t=M(H,"DIV",{});var ce=w(t);l=M(ce,"DIV",{class:!0});var fe=w(l);o=Z(fe,n),i=Q(fe),r&&r.l(fe),fe.forEach(u),f=Q(ce),le&&le.l(ce),ce.forEach(u),c=Q(H),q(p.$$.fragment,H),d=Q(H),q(_.$$.fragment,H),g=Q(H),te&&te.l(H),b=Q(H),q(v.$$.fragment,H),m=Q(H),k=M(H,"DIV",{class:!0});var Ee=w(k);V=M(Ee,"DIV",{class:!0});var $e=w(V);E=M($e,"SPAN",{class:!0});var de=w(E);q(S.$$.fragment,de),C=Z(de," In concept ("),N=Z(de,z),K=Z(de," examples)"),de.forEach(u),B=Q($e),q(P.$$.fragment,$e),$e.forEach(u),y=Q(Ee),x=M(Ee,"DIV",{class:!0});var pe=w(x);O=M(pe,"SPAN",{class:!0});var ge=w(O);q(X.$$.fragment,ge),ee=Z(ge,"Not in concept ("),ue=Z(ge,he),_e=Z(ge," examples)"),ge.forEach(u),ke=Q(pe),q(A.$$.fragment,pe),pe.forEach(u),Ee.forEach(u),H.forEach(u),this.h()},h(){$(l,"class","flex flex-row items-center text-2xl font-semibold"),$(E,"class","flex items-center gap-x-2 text-lg"),$(V,"class","flex w-0 flex-grow flex-col gap-y-4"),$(O,"class","flex items-center gap-x-2 text-lg"),$(x,"class","flex w-0 flex-grow flex-col gap-y-4"),$(k,"class","flex gap-x-4"),$(e,"class","flex h-full w-full flex-col gap-y-8 px-10")},m(R,H){F(R,e,H),h(e,t),h(t,l),h(l,o),h(l,i),~a&&se[a].m(l,null),h(t,f),le&&le.m(t,null),h(e,c),j(p,e,null),h(e,d),j(_,e,null),h(e,g),te&&te.m(e,null),h(e,b),j(v,e,null),h(e,m),h(e,k),h(k,V),h(V,E),j(S,E,null),h(E,C),h(E,N),h(E,K),h(V,B),j(P,V,null),h(k,y),h(k,x),h(x,O),j(X,O,null),h(O,ee),h(O,ue),h(O,_e),h(x,ke),j(A,x,null),U=!0},p(R,H){var ge;(!U||H[0]&1)&&n!==(n=R[0].concept_name+"")&&ne(o,n);let ce=a;a=Re(R),a!==ce&&(r&&(ie(),T(se[ce],1,1,()=>{se[ce]=null}),oe()),~a?(r=se[a],r||(r=se[a]=Ve[a](R),r.c()),D(r,1),r.m(l,null)):r=null),(ge=R[0].metadata)!=null&&ge.description?le?le.p(R,H):(le=wt(R),le.c(),le.m(t,null)):le&&(le.d(1),le=null);const fe={};H[0]&65|H[1]&32&&(fe.$$scope={dirty:H,ctx:R}),p.$set(fe);const Ee={};H[0]&28|H[1]&32&&(Ee.$$scope={dirty:H,ctx:R}),_.$set(Ee),R[10].data?te?(te.p(R,H),H[0]&1024&&D(te,1)):(te=kt(R),te.c(),D(te,1),te.m(e,b)):te&&(ie(),T(te,1,1,()=>{te=null}),oe());const $e={};H[0]&257|H[1]&32&&($e.$$scope={dirty:H,ctx:R}),v.$set($e),(!U||H[0]&2)&&z!==(z=R[1].length+"")&&ne(N,z);const de={};H[0]&2&&(de.data=R[1]),H[0]&256&&(de.canEditConcept=R[8]),P.$set(de),(!U||H[0]&128)&&he!==(he=R[7].length+"")&&ne(ue,he);const pe={};H[0]&128&&(pe.data=R[7]),H[0]&256&&(pe.canEditConcept=R[8]),A.$set(pe)},i(R){U||(D(r),D(p.$$.fragment,R),D(_.$$.fragment,R),D(te),D(v.$$.fragment,R),D(S.$$.fragment,R),D(P.$$.fragment,R),D(X.$$.fragment,R),D(A.$$.fragment,R),U=!0)},o(R){T(r),T(p.$$.fragment,R),T(_.$$.fragment,R),T(te),T(v.$$.fragment,R),T(S.$$.fragment,R),T(P.$$.fragment,R),T(X.$$.fragment,R),T(A.$$.fragment,R),U=!1},d(R){R&&u(e),~a&&se[a].d(),le&&le.d(),W(p),W(_),te&&te.d(),W(v),W(S),W(P),W(X),W(A)}}}function cn(s,e,t){let l,n,o,i,a,r,f,c,p,d,_,g,b=J,v=()=>(b(),b=Pe(f,A=>t(11,g=A)),f);s.$$.on_destroy.push(()=>b());let{concept:m}=e;const k=Kt();Ie(s,k,A=>t(21,d=A));const V=Jt();Ie(s,V,A=>t(20,p=A));const E=Tt();Ie(s,E,A=>t(31,c=A));const S=It();Ie(s,S,A=>t(10,_=A));let C,z,N;function K(){if(z==null||N==null||C==null)return;const A=At(C.namespace,C.name);A.addSearch({path:z,type:"concept",concept_namespace:m.namespace,concept_name:m.concept_name,embedding:N}),Ct(St(C.namespace,C.name,Vt(A)))}function B(A){!m.namespace||!m.concept_name||c.mutate([m.namespace,m.concept_name,{remove:[A]}])}function P(A,U){!m.namespace||!m.concept_name||c.mutate([m.namespace,m.concept_name,{insert:[{text:A,label:U}]}])}function y(A){C=A,t(2,C)}function x(A){z=A,t(3,z)}function O(A){N=A,t(4,N)}const X=()=>K(),ee=(A,U)=>U.embedding_name==A.name,he=A=>B(A.detail),ue=A=>P(A.detail,!0),_e=A=>B(A.detail),ke=A=>P(A.detail,!1);return s.$$set=A=>{"concept"in A&&t(0,m=A.concept)},s.$$.update=()=>{var A,U,Ve;s.$$.dirty[0]&2097152&&t(9,l=(U=(A=d.data)==null?void 0:A.user)==null?void 0:U.id),s.$$.dirty[0]&1048577&&t(19,n=(Ve=p.data)==null?void 0:Ve.find(se=>se.namespace===m.namespace&&se.name===m.concept_name)),s.$$.dirty[0]&524288&&t(8,o=(n==null?void 0:n.acls.write)==!0),s.$$.dirty[0]&1&&t(1,i=Object.values(m.data).filter(se=>se.label==!0)),s.$$.dirty[0]&1&&t(7,a=Object.values(m.data).filter(se=>se.label==!1)),s.$$.dirty[0]&2&&t(6,r=i[Math.floor(Math.random()*i.length)]),s.$$.dirty[0]&1&&v(t(5,f=Xt(m.namespace,m.concept_name)))},[m,i,C,z,N,f,r,a,o,l,_,g,k,V,E,S,K,B,P,n,p,d,y,x,O,X,ee,he,ue,_e,ke]}class kn extends be{constructor(e){super(),ve(this,e,cn,on,we,{concept:0},null,[-1,-1])}}export{kn as C,wn as S,dl as V,cl as a,nt as b};
