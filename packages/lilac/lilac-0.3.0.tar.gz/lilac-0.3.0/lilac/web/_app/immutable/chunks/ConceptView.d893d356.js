import{S as _e,i as pe,s as ge,D as oe,Z as ae,_ as se,m as w,h as d,n as V,$ as Ve,b as N,a0 as _,K as He,a1 as K,M as De,Q as Ce,q as F,r as L,u as le,w as Te,U as ze,k as I,y as Y,a as G,l as M,z as U,c as Q,A as q,V as Se,g as D,v as de,f as me,d as A,B as j,a2 as qe,N as Bt,F as Me,G as Qe,a7 as je,a8 as Vt,L as Dt,a6 as Xe,O as Ae,ab as ye,o as Ot,e as Ze,p as xe,ag as Ct}from"./index.ad1b71d6.js";import{g as It}from"./navigation.29069d7a.js";import{N as Ht,e as We,_ as $e,be as Ft,bf as Lt,D as Ge,bg as Ke,S as Zt,ar as Mt,bh as Yt,bi as Ut,bj as qt,bk as jt,b7 as Wt,d as At,b as Gt,al as Be,am as Oe,ad as Fe,bl as Qt,bm as Tt,aT as et,ag as Kt,bd as zt,E as St,bn as Jt,a6 as Rt,a as Xt,i as xt}from"./Commands.dd229ba7.js";import{T as Je}from"./ToastNotification.2baf741e.js";import{S as el,T as yt,a as Pt}from"./StringSpanHighlight.63ff0e70.js";import{D as Nt,E as Le}from"./DatasetFieldEmbeddingSelector.025ed355.js";import{T as tl}from"./TrashCan.29665d4a.js";import{g as ll}from"./settingsStore.37e188d4.js";import{T as nl}from"./TextArea.091b94d4.js";import{c as tt}from"./colors.f6cbcb11.js";function lt(a){let e,t;return{c(){e=ae("title"),t=F(a[1])},l(l){e=se(l,"title",{});var n=w(e);t=L(n,a[1]),n.forEach(d)},m(l,n){N(l,e,n),_(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function al(a){let e,t,l,n=a[1]&&lt(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],r={};for(let s=0;s<o.length;s+=1)r=oe(r,o[s]);return{c(){e=ae("svg"),n&&n.c(),t=ae("path"),l=ae("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=w(e);n&&n.l(i),t=se(i,"path",{d:!0}),w(t).forEach(d),l=se(i,"path",{d:!0}),w(l).forEach(d),i.forEach(d),this.h()},h(){V(t,"d","M11,11V21H21V11Zm8,8H13V13h6Z"),V(l,"d","M30,13V11H26V8a2,2,0,0,0-2-2H21V2H19V6H13V2H11V6H8A2,2,0,0,0,6,8v3H2v2H6v6H2v2H6v3a2,2,0,0,0,2,2h3v4h2V26h6v4h2V26h3a2,2,0,0,0,2-2V21h4V19H26V13ZM24,24H8V8H24Z"),Ve(e,r)},m(s,i){N(s,e,i),n&&n.m(e,null),_(e,t),_(e,l)},p(s,[i]){s[1]?n?n.p(s,i):(n=lt(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),Ve(e,r=He(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:s[0]},i&1&&{height:s[0]},i&4&&s[2],i&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),n&&n.d()}}}function sl(a,e,t){let l,n;const o=["size","title"];let r=De(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=oe(oe({},e),Ce(c))),t(3,r=De(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[s,i,n,r,l]}class nt extends _e{constructor(e){super(),pe(this,e,sl,al,ge,{size:0,title:1})}}function at(a){let e,t;return{c(){e=ae("title"),t=F(a[1])},l(l){e=se(l,"title",{});var n=w(e);t=L(n,a[1]),n.forEach(d)},m(l,n){N(l,e,n),_(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function rl(a){let e,t,l=a[1]&&at(a),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],o={};for(let r=0;r<n.length;r+=1)o=oe(o,n[r]);return{c(){e=ae("svg"),l&&l.c(),t=ae("path"),this.h()},l(r){e=se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=w(e);l&&l.l(s),t=se(s,"path",{d:!0}),w(t).forEach(d),s.forEach(d),this.h()},h(){V(t,"d","M16,2A14,14,0,1,0,30,16,14.0158,14.0158,0,0,0,16,2Zm0,26A12,12,0,0,1,16,4V16l8.4812,8.4814A11.9625,11.9625,0,0,1,16,28Z"),Ve(e,o)},m(r,s){N(r,e,s),l&&l.m(e,null),_(e,t)},p(r,[s]){r[1]?l?l.p(r,s):(l=at(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:K,o:K,d(r){r&&d(e),l&&l.d()}}}function il(a,e,t){let l,n;const o=["size","title"];let r=De(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=oe(oe({},e),Ce(c))),t(3,r=De(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[s,i,n,r,l]}class kn extends _e{constructor(e){super(),pe(this,e,il,rl,ge,{size:0,title:1})}}function st(a){let e,t;return{c(){e=ae("title"),t=F(a[1])},l(l){e=se(l,"title",{});var n=w(e);t=L(n,a[1]),n.forEach(d)},m(l,n){N(l,e,n),_(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function ol(a){let e,t,l=a[1]&&st(a),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],o={};for(let r=0;r<n.length;r+=1)o=oe(o,n[r]);return{c(){e=ae("svg"),l&&l.c(),t=ae("path"),this.h()},l(r){e=se(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=w(e);l&&l.l(s),t=se(s,"path",{d:!0}),w(t).forEach(d),s.forEach(d),this.h()},h(){V(t,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),Ve(e,o)},m(r,s){N(r,e,s),l&&l.m(e,null),_(e,t)},p(r,[s]){r[1]?l?l.p(r,s):(l=st(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:K,o:K,d(r){r&&d(e),l&&l.d()}}}function cl(a,e,t){let l,n;const o=["size","title"];let r=De(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=oe(oe({},e),Ce(c))),t(3,r=De(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[s,i,n,r,l]}class En extends _e{constructor(e){super(),pe(this,e,cl,ol,ge,{size:0,title:1})}}function rt(a){let e,t;return{c(){e=ae("title"),t=F(a[1])},l(l){e=se(l,"title",{});var n=w(e);t=L(n,a[1]),n.forEach(d)},m(l,n){N(l,e,n),_(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function fl(a){let e,t,l,n=a[1]&&rt(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],r={};for(let s=0;s<o.length;s+=1)r=oe(r,o[s]);return{c(){e=ae("svg"),n&&n.c(),t=ae("path"),l=ae("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=w(e);n&&n.l(i),t=se(i,"path",{d:!0}),w(t).forEach(d),l=se(i,"path",{d:!0}),w(l).forEach(d),i.forEach(d),this.h()},h(){V(t,"d","M30.94,15.66A16.69,16.69,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16.69,16.69,0,0,0,16,27,16.69,16.69,0,0,0,30.94,16.34,1,1,0,0,0,30.94,15.66ZM16,25c-5.3,0-10.9-3.93-12.93-9C5.1,10.93,10.7,7,16,7s10.9,3.93,12.93,9C26.9,21.07,21.3,25,16,25Z"),V(l,"d","M16,10a6,6,0,1,0,6,6A6,6,0,0,0,16,10Zm0,10a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z"),Ve(e,r)},m(s,i){N(s,e,i),n&&n.m(e,null),_(e,t),_(e,l)},p(s,[i]){s[1]?n?n.p(s,i):(n=rt(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),Ve(e,r=He(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:s[0]},i&1&&{height:s[0]},i&4&&s[2],i&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),n&&n.d()}}}function ul(a,e,t){let l,n;const o=["size","title"];let r=De(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=oe(oe({},e),Ce(c))),t(3,r=De(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[s,i,n,r,l]}class dl extends _e{constructor(e){super(),pe(this,e,ul,fl,ge,{size:0,title:1})}}function it(a){let e,t;return{c(){e=ae("title"),t=F(a[1])},l(l){e=se(l,"title",{});var n=w(e);t=L(n,a[1]),n.forEach(d)},m(l,n){N(l,e,n),_(e,t)},p(l,n){n&2&&le(t,l[1])},d(l){l&&d(e)}}}function ml(a){let e,t,l,n=a[1]&&it(a),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:a[0]},{height:a[0]},a[2],a[3]],r={};for(let s=0;s<o.length;s+=1)r=oe(r,o[s]);return{c(){e=ae("svg"),n&&n.c(),t=ae("path"),l=ae("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=w(e);n&&n.l(i),t=se(i,"path",{d:!0}),w(t).forEach(d),l=se(i,"path",{d:!0}),w(l).forEach(d),i.forEach(d),this.h()},h(){V(t,"d","M5.24,22.51l1.43-1.42A14.06,14.06,0,0,1,3.07,16C5.1,10.93,10.7,7,16,7a12.38,12.38,0,0,1,4,.72l1.55-1.56A14.72,14.72,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16,16,0,0,0,5.24,22.51Z"),V(l,"d","M12 15.73a4 4 0 013.7-3.7l1.81-1.82a6 6 0 00-7.33 7.33zM30.94 15.66A16.4 16.4 0 0025.2 8.22L30 3.41 28.59 2 2 28.59 3.41 30l5.1-5.1A15.29 15.29 0 0016 27 16.69 16.69 0 0030.94 16.34 1 1 0 0030.94 15.66zM20 16a4 4 0 01-6 3.44L19.44 14A4 4 0 0120 16zm-4 9a13.05 13.05 0 01-6-1.58l2.54-2.54a6 6 0 008.35-8.35l2.87-2.87A14.54 14.54 0 0128.93 16C26.9 21.07 21.3 25 16 25z"),Ve(e,r)},m(s,i){N(s,e,i),n&&n.m(e,null),_(e,t),_(e,l)},p(s,[i]){s[1]?n?n.p(s,i):(n=it(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),Ve(e,r=He(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:s[0]},i&1&&{height:s[0]},i&4&&s[2],i&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),n&&n.d()}}}function hl(a,e,t){let l,n;const o=["size","title"];let r=De(e,o),{size:s=16}=e,{title:i=void 0}=e;return a.$$set=c=>{t(5,e=oe(oe({},e),Ce(c))),t(3,r=De(e,o)),"size"in c&&t(0,s=c.size),"title"in c&&t(1,i=c.title)},a.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ce(e),[s,i,n,r,l]}class _l extends _e{constructor(e){super(),pe(this,e,hl,ml,ge,{size:0,title:1})}}function ot(a,e,t){const l=a.slice();return l[7]=e[t],l}function ct(a){let e,t,l=a[7].text+"",n,o,r,s,i,c,f,p,u,m,g;i=new tl({props:{size:16}});function b(){return a[6](a[7])}return{c(){e=I("div"),t=I("span"),n=F(l),o=G(),r=I("div"),s=I("button"),Y(i.$$.fragment),p=G(),this.h()},l(k){e=M(k,"DIV",{class:!0});var h=w(e);t=M(h,"SPAN",{class:!0});var v=w(t);n=L(v,l),v.forEach(d),o=Q(h),r=M(h,"DIV",{});var $=w(r);s=M($,"BUTTON",{title:!0,class:!0});var E=w(s);U(i.$$.fragment,E),E.forEach(d),$.forEach(d),p=Q(h),h.forEach(d),this.h()},h(){V(t,"class","shrink"),V(s,"title","Remove sample"),V(s,"class","shrink-0 opacity-50 hover:text-red-400 hover:opacity-100"),s.disabled=c=!a[1],Me(r,"opacity-40",!a[1]),V(e,"class","flex w-full justify-between gap-x-2 border-b border-gray-200 p-2 hover:bg-gray-50")},m(k,h){N(k,e,h),_(e,t),_(t,n),_(e,o),_(e,r),_(r,s),q(i,s,null),_(e,p),u=!0,m||(g=[Qe(s,"click",b),je(f=We.call(null,r,{text:a[1]?"":"User does not have access to edit this concept."}))],m=!0)},p(k,h){a=k,(!u||h&1)&&l!==(l=a[7].text+"")&&le(n,l),(!u||h&2&&c!==(c=!a[1]))&&(s.disabled=c),f&&Vt(f.update)&&h&2&&f.update.call(null,{text:a[1]?"":"User does not have access to edit this concept."}),(!u||h&2)&&Me(r,"opacity-40",!a[1])},i(k){u||(D(i.$$.fragment,k),u=!0)},o(k){A(i.$$.fragment,k),u=!1},d(k){k&&d(e),j(i),m=!1,Dt(g)}}}function pl(a){let e,t,l,n,o,r;function s(u){a[4](u)}let i={labelText:"Add example"};a[2]!==void 0&&(i.value=a[2]),t=new Ht({props:i}),Te.push(()=>ze(t,"value",s)),t.$on("keydown",a[5]);let c=[...a[0]].reverse(),f=[];for(let u=0;u<c.length;u+=1)f[u]=ct(ot(a,c,u));const p=u=>A(f[u],1,1,()=>{f[u]=null});return{c(){e=I("div"),Y(t.$$.fragment),n=G(),o=I("div");for(let u=0;u<f.length;u+=1)f[u].c();this.h()},l(u){e=M(u,"DIV",{class:!0});var m=w(e);U(t.$$.fragment,m),m.forEach(d),n=Q(u),o=M(u,"DIV",{class:!0});var g=w(o);for(let b=0;b<f.length;b+=1)f[b].l(g);g.forEach(d),this.h()},h(){V(e,"class",""),V(o,"class","flex h-full w-full flex-col overflow-y-auto overflow-x-clip border border-gray-200")},m(u,m){N(u,e,m),q(t,e,null),N(u,n,m),N(u,o,m);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(o,null);r=!0},p(u,[m]){const g={};if(!l&&m&4&&(l=!0,g.value=u[2],Se(()=>l=!1)),t.$set(g),m&11){c=[...u[0]].reverse();let b;for(b=0;b<c.length;b+=1){const k=ot(u,c,b);f[b]?(f[b].p(k,m),D(f[b],1)):(f[b]=ct(k),f[b].c(),D(f[b],1),f[b].m(o,null))}for(de(),b=c.length;b<f.length;b+=1)p(b);me()}},i(u){if(!r){D(t.$$.fragment,u);for(let m=0;m<c.length;m+=1)D(f[m]);r=!0}},o(u){A(t.$$.fragment,u),f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)A(f[m]);r=!1},d(u){u&&d(e),j(t),u&&d(n),u&&d(o),qe(f,u)}}}function gl(a,e,t){let{data:l}=e,{canEditConcept:n}=e,o;const r=Bt();function s(f){o=f,t(2,o)}const i=f=>{f.key==="Enter"&&(r("add",o),t(2,o=""))},c=f=>r("remove",f.id);return a.$$set=f=>{"data"in f&&t(0,l=f.data),"canEditConcept"in f&&t(1,n=f.canEditConcept)},[l,n,o,r,s,i,c]}class ft extends _e{constructor(e){super(),pe(this,e,gl,pl,ge,{data:0,canEditConcept:1})}}const Ye={not_good:"text-red-600",ok:"text-yellow-600",good:"text-green-600",very_good:"text-blue-600",great:"text-purple-600"},Ue={not_good:"Not good",ok:"OK",good:"Good",very_good:"Very good",great:"Great"};function bl(a){let e,t,l,n,o,r=Ue[a[0].overall]+"",s,i,c,f,p,u,m,g=$e(a[0].f1)+"",b,k,h,v,$,E,z=$e(a[0].recall)+"",C,S,Z,W,B,y,R=$e(a[0].precision)+"",x,O,J,T,re,ce,ie=$e(a[0].roc_auc)+"",Ie;return{c(){e=I("table"),t=I("tr"),l=I("td"),n=F("Overall score"),o=I("td"),s=F(r),c=G(),f=I("tr"),p=I("td"),u=F("F1"),m=I("td"),b=F(g),k=G(),h=I("tr"),v=I("td"),$=F("Recall"),E=I("td"),C=F(z),S=G(),Z=I("tr"),W=I("td"),B=F("Precision"),y=I("td"),x=F(R),O=G(),J=I("tr"),T=I("td"),re=F("Area under ROC"),ce=I("td"),Ie=F(ie),this.h()},l(ee){e=M(ee,"TABLE",{class:!0});var X=w(e);t=M(X,"TR",{});var Re=w(t);l=M(Re,"TD",{class:!0});var we=w(l);n=L(we,"Overall score"),we.forEach(d),o=M(Re,"TD",{class:!0});var Pe=w(o);s=L(Pe,r),Pe.forEach(d),Re.forEach(d),c=Q(X),f=M(X,"TR",{});var ne=w(f);p=M(ne,"TD",{class:!0});var te=w(p);u=L(te,"F1"),te.forEach(d),m=M(ne,"TD",{class:!0});var Ne=w(m);b=L(Ne,g),Ne.forEach(d),ne.forEach(d),k=Q(X),h=M(X,"TR",{});var P=w(h);v=M(P,"TD",{class:!0});var H=w(v);$=L(H,"Recall"),H.forEach(d),E=M(P,"TD",{class:!0});var fe=w(E);C=L(fe,z),fe.forEach(d),P.forEach(d),S=Q(X),Z=M(X,"TR",{});var ue=w(Z);W=M(ue,"TD",{class:!0});var ke=w(W);B=L(ke,"Precision"),ke.forEach(d),y=M(ue,"TD",{class:!0});var Ee=w(y);x=L(Ee,R),Ee.forEach(d),ue.forEach(d),O=Q(X),J=M(X,"TR",{});var he=w(J);T=M(he,"TD",{class:!0});var be=w(T);re=L(be,"Area under ROC"),be.forEach(d),ce=M(he,"TD",{class:!0});var ve=w(ce);Ie=L(ve,ie),ve.forEach(d),he.forEach(d),X.forEach(d),this.h()},h(){V(l,"class","svelte-zc5pc5"),V(o,"class",i=Xe(Ye[a[0].overall])+" svelte-zc5pc5"),V(p,"class","svelte-zc5pc5"),V(m,"class","svelte-zc5pc5"),V(v,"class","svelte-zc5pc5"),V(E,"class","svelte-zc5pc5"),V(W,"class","svelte-zc5pc5"),V(y,"class","svelte-zc5pc5"),V(T,"class","svelte-zc5pc5"),V(ce,"class","svelte-zc5pc5"),V(e,"class","svelte-zc5pc5")},m(ee,X){N(ee,e,X),_(e,t),_(t,l),_(l,n),_(t,o),_(o,s),_(e,c),_(e,f),_(f,p),_(p,u),_(f,m),_(m,b),_(e,k),_(e,h),_(h,v),_(v,$),_(h,E),_(E,C),_(e,S),_(e,Z),_(Z,W),_(W,B),_(Z,y),_(y,x),_(e,O),_(e,J),_(J,T),_(T,re),_(J,ce),_(ce,Ie)},p(ee,[X]){X&1&&r!==(r=Ue[ee[0].overall]+"")&&le(s,r),X&1&&i!==(i=Xe(Ye[ee[0].overall])+" svelte-zc5pc5")&&V(o,"class",i),X&1&&g!==(g=$e(ee[0].f1)+"")&&le(b,g),X&1&&z!==(z=$e(ee[0].recall)+"")&&le(C,z),X&1&&R!==(R=$e(ee[0].precision)+"")&&le(x,R),X&1&&ie!==(ie=$e(ee[0].roc_auc)+"")&&le(Ie,ie)},i:K,o:K,d(ee){ee&&d(e)}}}function vl(a,e,t){let{metrics:l}=e;return a.$$set=n=>{"metrics"in n&&t(0,l=n.metrics)},[l]}class ut extends _e{constructor(e){super(),pe(this,e,vl,bl,ge,{metrics:0})}}function wl(a){const e=a.slice(),t=!0;return e[7]=t,e}function kl(a){let e,t;function l(){return a[6](a[7])}return e=new Ge({props:{icon:a[4].isLoading?Ke:nt,class:"w-28 text-3xl",$$slots:{default:[Vl]},$$scope:{ctx:a}}}),e.$on("click",l),{c(){Y(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,o){q(e,n,o),t=!0},p(n,o){a=n;const r={};o&16&&(r.icon=a[4].isLoading?Ke:nt),o&256&&(r.$$scope={dirty:o,ctx:a}),e.$set(r)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function El(a){let e,t=Ue[a[3].data.metrics.overall]+"",l,n,o,r,s;return{c(){e=I("div"),l=F(t),this.h()},l(i){e=M(i,"DIV",{class:!0});var c=w(e);l=L(c,t),c.forEach(d),this.h()},h(){V(e,"class",n="concept-score-pill cursor-default text-2xl font-light "+Ye[a[3].data.metrics.overall])},m(i,c){N(i,e,c),_(e,l),r||(s=je(o=We.call(null,e,{component:ut,props:{metrics:a[3].data.metrics}})),r=!0)},p(i,c){c&8&&t!==(t=Ue[i[3].data.metrics.overall]+"")&&le(l,t),c&8&&n!==(n="concept-score-pill cursor-default text-2xl font-light "+Ye[i[3].data.metrics.overall])&&V(e,"class",n),o&&Vt(o.update)&&c&8&&o.update.call(null,{component:ut,props:{metrics:i[3].data.metrics}})},i:K,o:K,d(i){i&&d(e),r=!1,s()}}}function $l(a){let e,t,l;return t=new Ke({}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var o=w(e);U(t.$$.fragment,o),o.forEach(d),this.h()},h(){V(e,"class","flex flex-col items-center")},m(n,o){N(n,e,o),q(t,e,null),l=!0},p:K,i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&d(e),j(t)}}}function Vl(a){let e;return{c(){e=F("Compute")},l(t){e=L(t,"Compute")},m(t,l){N(t,e,l)},d(t){t&&d(e)}}}function Dl(a){let e,t,l,n,o,r,s;const i=[$l,El,kl],c=[];function f(u,m){var g,b;return u[3].isFetching?0:(b=(g=u[3])==null?void 0:g.data)!=null&&b.metrics?1:2}function p(u,m){return m===2?wl(u):u}return o=f(a),r=c[o]=i[o](p(a,o)),{c(){e=I("div"),t=I("div"),l=F(a[1]),n=G(),r.c(),this.h()},l(u){e=M(u,"DIV",{class:!0});var m=w(e);t=M(m,"DIV",{class:!0});var g=w(t);l=L(g,a[1]),g.forEach(d),n=Q(m),r.l(m),m.forEach(d),this.h()},h(){V(t,"class","text-gray-500"),V(e,"class","flex w-36 flex-col items-center gap-y-2 rounded-md border border-b-0 border-gray-200 p-4 shadow-md")},m(u,m){N(u,e,m),_(e,t),_(t,l),_(e,n),c[o].m(e,null),s=!0},p(u,[m]){(!s||m&2)&&le(l,u[1]);let g=o;o=f(u),o===g?c[o].p(p(u,o),m):(de(),A(c[g],1,1,()=>{c[g]=null}),me(),r=c[o],r?r.p(p(u,o),m):(r=c[o]=i[o](p(u,o)),r.c()),D(r,1),r.m(e,null))},i(u){s||(D(r),s=!0)},o(u){A(r),s=!1},d(u){u&&d(e),c[o].d()}}}function Cl(a,e,t){let l,n,o=K,r=()=>(o(),o=ye(l,u=>t(3,n=u)),l),s;a.$$.on_destroy.push(()=>o());let{concept:i}=e,{embedding:c}=e;const f=Ft();Ae(a,f,u=>t(4,s=u));const p=u=>s.mutate([i.namespace,i.concept_name,c,u]);return a.$$set=u=>{"concept"in u&&t(0,i=u.concept),"embedding"in u&&t(1,c=u.embedding)},a.$$.update=()=>{a.$$.dirty&3&&r(t(2,l=Lt(i.namespace,i.concept_name,c)))},[i,c,l,n,s,f,p]}class Il extends _e{constructor(e){super(),pe(this,e,Cl,Dl,ge,{concept:0,embedding:1})}}function dt(a,e,t){const l=a.slice();return l[22]=e[t],l}function Ml(a){let e;return{c(){e=F("Compute")},l(t){e=L(t,"Compute")},m(t,l){N(t,e,l)},d(t){t&&d(e)}}}function mt(a){let e,t;return e=new Gt({props:{value:a[22].name}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n&1024&&(o.value=l[22].name),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Al(a){var r;let e,t,l=((r=a[10])==null?void 0:r.data)||[],n=[];for(let s=0;s<l.length;s+=1)n[s]=mt(dt(a,l,s));const o=s=>A(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ze()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=Ze()},m(s,i){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(s,i);N(s,e,i),t=!0},p(s,i){var c;if(i&1024){l=((c=s[10])==null?void 0:c.data)||[];let f;for(f=0;f<l.length;f+=1){const p=dt(s,l,f);n[f]?(n[f].p(p,i),D(n[f],1)):(n[f]=mt(p),n[f].c(),D(n[f],1),n[f].m(e.parentNode,e))}for(de(),f=l.length;f<n.length;f+=1)o(f);me()}},i(s){if(!t){for(let i=0;i<l.length;i+=1)D(n[i]);t=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)A(n[i]);t=!1},d(s){qe(n,s),s&&d(e)}}}function Tl(a){let e,t,l,n,o,r=a[2].toFixed(3)+"",s,i,c,f;return c=new el({props:{text:a[0],row:a[5],spanPaths:a[7],spanValueInfos:a[6],embeddings:a[1]?[a[1]]:[]}}),{c(){e=I("div"),t=I("span"),l=F("Max score:"),n=G(),o=I("span"),s=F(r),i=G(),Y(c.$$.fragment),this.h()},l(p){e=M(p,"DIV",{class:!0});var u=w(e);t=M(u,"SPAN",{class:!0});var m=w(t);l=L(m,"Max score:"),m.forEach(d),n=Q(u),o=M(u,"SPAN",{class:!0});var g=w(o);s=L(g,r),g.forEach(d),u.forEach(d),i=Q(p),U(c.$$.fragment,p),this.h()},h(){V(t,"class","font-medium"),V(o,"class","rounded p-0.5"),xe(o,"background-color",tt(a[2])),V(e,"class","my-2")},m(p,u){N(p,e,u),_(e,t),_(t,l),_(e,n),_(e,o),_(o,s),N(p,i,u),q(c,p,u),f=!0},p(p,u){(!f||u&4)&&r!==(r=p[2].toFixed(3)+"")&&le(s,r),u&4&&xe(o,"background-color",tt(p[2]));const m={};u&1&&(m.text=p[0]),u&32&&(m.row=p[5]),u&128&&(m.spanPaths=p[7]),u&64&&(m.spanValueInfos=p[6]),u&2&&(m.embeddings=p[1]?[p[1]]:[]),c.$set(m)},i(p){f||(D(c.$$.fragment,p),f=!0)},o(p){A(c.$$.fragment,p),f=!1},d(p){p&&d(e),p&&d(i),j(c,p)}}}function zl(a){let e,t;return e=new At({}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Sl(a){let e,t,l,n,o,r,s,i,c,f,p,u,m,g,b,k;l=new nl({props:{value:a[4],cols:50,placeholder:"Paste text to try the concept.",rows:6,class:"mb-2"}}),l.$on("input",a[13]),s=new Ge({props:{$$slots:{default:[Ml]},$$scope:{ctx:a}}}),s.$on("click",a[19]);function h(C){a[20](C)}let v={labelText:"Embedding",$$slots:{default:[Al]},$$scope:{ctx:a}};a[1]!==void 0&&(v.selected=a[1]),f=new Zt({props:v}),Te.push(()=>ze(f,"selected",h));const $=[zl,Tl],E=[];function z(C,S){var Z;return C[8]&&((Z=C[3])!=null&&Z.isFetching)?0:C[5]!=null&&C[0]!=null?1:-1}return~(g=z(a))&&(b=E[g]=$[g](a)),{c(){e=I("div"),t=I("div"),Y(l.$$.fragment),n=G(),o=I("div"),r=I("div"),Y(s.$$.fragment),i=G(),c=I("div"),Y(f.$$.fragment),u=G(),m=I("div"),b&&b.c(),this.h()},l(C){e=M(C,"DIV",{class:!0});var S=w(e);t=M(S,"DIV",{});var Z=w(t);U(l.$$.fragment,Z),n=Q(Z),o=M(Z,"DIV",{class:!0});var W=w(o);r=M(W,"DIV",{class:!0});var B=w(r);U(s.$$.fragment,B),B.forEach(d),i=Q(W),c=M(W,"DIV",{class:!0});var y=w(c);U(f.$$.fragment,y),y.forEach(d),W.forEach(d),Z.forEach(d),u=Q(S),m=M(S,"DIV",{class:!0});var R=w(m);b&&b.l(R),R.forEach(d),S.forEach(d),this.h()},h(){V(r,"class","pt-4"),V(c,"class","mb-2 w-32"),V(o,"class","flex flex-row justify-between"),V(m,"class","mt-4 border-gray-200"),Me(m,"border-t",a[0]!=null),V(e,"class","flex flex-col gap-x-8")},m(C,S){N(C,e,S),_(e,t),q(l,t,null),_(t,n),_(t,o),_(o,r),q(s,r,null),_(o,i),_(o,c),q(f,c,null),_(e,u),_(e,m),~g&&E[g].m(m,null),k=!0},p(C,[S]){const Z={};S&16&&(Z.value=C[4]),l.$set(Z);const W={};S&33554432&&(W.$$scope={dirty:S,ctx:C}),s.$set(W);const B={};S&33555456&&(B.$$scope={dirty:S,ctx:C}),!p&&S&2&&(p=!0,B.selected=C[1],Se(()=>p=!1)),f.$set(B);let y=g;g=z(C),g===y?~g&&E[g].p(C,S):(b&&(de(),A(E[y],1,1,()=>{E[y]=null}),me()),~g?(b=E[g],b?b.p(C,S):(b=E[g]=$[g](C),b.c()),D(b,1),b.m(m,null)):b=null),(!k||S&1)&&Me(m,"border-t",C[0]!=null)},i(C){k||(D(l.$$.fragment,C),D(s.$$.fragment,C),D(f.$$.fragment,C),D(b),k=!0)},o(C){A(l.$$.fragment,C),A(s.$$.fragment,C),A(f.$$.fragment,C),A(b),k=!1},d(C){C&&d(e),j(l),j(s),j(f),~g&&E[g].d()}}}function Rl(a,e,t){var x;let l,n,o,r,s=K,i=()=>(s(),s=ye(o,O=>t(3,r=O)),o),c,f=K,p=()=>(f(),f=ye(n,O=>t(18,c=O)),n),u,m;a.$$.on_destroy.push(()=>s()),a.$$.on_destroy.push(()=>f());let{concept:g}=e,{example:b}=e;const k=Mt();Ae(a,k,O=>t(10,m=O));const h=ll();Ae(a,h,O=>t(21,u=O));let v=(x=b.text)==null?void 0:x.trim();Ot(()=>{C()});function $(O){t(4,v=O.target.value),t(0,E=void 0)}let E,z=u.embedding;function C(){t(0,E=v)}let S,Z,W,B;const y=()=>C();function R(O){z=O,t(1,z)}return a.$$set=O=>{"concept"in O&&t(15,g=O.concept),"example"in O&&t(16,b=O.example)},a.$$.update=()=>{var O;if(a.$$.dirty&65536&&b.text&&(t(4,v=b.text.trim()),t(0,E=void 0)),a.$$.dirty&32770&&t(17,l={signal_name:"concept_score",concept_name:g.concept_name,namespace:g.namespace,embedding:z}),a.$$.dirty&131072&&p(t(9,n=l.embedding?Yt({signal:l}):void 0)),a.$$.dirty&32771&&i(t(8,o=z!=null&&E!=null?Ut(g.namespace,g.concept_name,z,{examples:[{text:E}]}):null)),a.$$.dirty&393226&&(r==null?void 0:r.data)!=null&&z!=null&&((O=c==null?void 0:c.data)==null?void 0:O.fields)!=null){const J=qt(c.data.fields);J.signal=l,t(5,S=jt(r.data[0],J));const T=Wt(J);t(7,W=T.spanPaths),t(6,Z=T.spanValueInfos)}if(a.$$.dirty&12&&(r==null?void 0:r.data)!=null){t(2,B=0);for(const J of r.data[0]){const T=J.score;t(2,B=Math.max(T,B))}}},[E,z,B,r,v,S,Z,W,o,n,m,k,h,$,C,g,b,l,c,y,R]}class yl extends _e{constructor(e){super(),pe(this,e,Rl,Sl,ge,{concept:15,example:16})}}function Pl(a,e,t,l,n,o){const r={...a};if(e==null||t==null)return r;const s=[...e,...t],i=new Set,c=[];for(const g of s){const b=Be.value(Oe(g,[Fe]),"string");if(b==null||i.has(b))continue;i.add(b);const k=Oe(g,n);if(k==null)continue;const h=Be.value(k,"string");if(h==null)continue;const v=`${l.namespace}/${l.concept_name}`,$=Oe(k,[`${v}/${o}/preview`]);if($==null)continue;const E=Oe(k,[`${v}/labels`]),z=[];if(E!=null)for(const C of E){const S=Be.span(C);S!=null&&z.push(S)}for(const C of $){const S=Be.span(C);if(S==null||!z.every(y=>y.start>S.end||y.end<S.start))continue;const W=Oe(C,["score"]);if(W==null)continue;const B=Be.value(W,"float32");B!=null&&c.push({rowid:b,text:h,span:S,score:B})}}function f(g){return{rowid:g.rowid,text:Qt(g.text,g.span.start,g.span.end),score:g.score}}c.sort((g,b)=>b.score-g.score);const p=c[0],u=c.slice().reverse().find(g=>g!=p);c.sort((g,b)=>Math.abs(g.score-.5)-Math.abs(b.score-.5));const m=c.find(g=>g!=p&&g!=u);return p!=null&&r.positive==null&&(r.positive=f(p)),m!=null&&r.neutral==null&&(r.neutral=f(m)),u!=null&&r.negative==null&&(r.negative=f(u)),r}function ht(a,e,t){const l=a.slice();return l[21]=e[t],l}function Nl(a){const e=a.slice(),t=Fl(e[21].score);e[24]=t;const l=Ll(e[21].score);return e[25]=l,e}function Bl(a){let e,t,l,n,o,r,s,i,c,f=a[21].text+"",p,u,m,g=a[25]+"",b,k,h=$e(a[21].score,2)+"",v,$,E,z,C,S;n=new yt({});function Z(){return a[18](a[21])}s=new Pt({});function W(){return a[19](a[21])}return{c(){e=I("div"),t=I("div"),l=I("button"),Y(n.$$.fragment),o=G(),r=I("button"),Y(s.$$.fragment),i=G(),c=I("div"),p=F(f),u=G(),m=I("div"),b=F(g),k=G(),v=F(h),$=G(),this.h()},l(B){e=M(B,"DIV",{class:!0});var y=w(e);t=M(y,"DIV",{class:!0});var R=w(t);l=M(R,"BUTTON",{class:!0});var x=w(l);U(n.$$.fragment,x),x.forEach(d),o=Q(R),r=M(R,"BUTTON",{class:!0});var O=w(r);U(s.$$.fragment,O),O.forEach(d),R.forEach(d),i=Q(y),c=M(y,"DIV",{class:!0});var J=w(c);p=L(J,f),J.forEach(d),u=Q(y),m=M(y,"DIV",{class:!0});var T=w(m);b=L(T,g),k=Q(T),v=L(T,h),T.forEach(d),$=Q(y),y.forEach(d),this.h()},h(){V(l,"class","p-2 hover:bg-gray-200"),Me(l,"text-blue-500",a[21].label===!0),V(r,"class","p-2 hover:bg-gray-200"),Me(r,"text-red-500",a[21].label===!1),V(t,"class","mr-2 flex flex-shrink-0 gap-x-1"),V(c,"class","flex-grow"),V(m,"class","w-40 flex-shrink-0 text-right"),V(e,"class",E=`flex flex-grow items-center whitespace-break-spaces rounded-md border border-gray-300 p-4 pl-2 ${a[24]}`)},m(B,y){N(B,e,y),_(e,t),_(t,l),q(n,l,null),_(t,o),_(t,r),q(s,r,null),_(e,i),_(e,c),_(c,p),_(e,u),_(e,m),_(m,b),_(m,k),_(m,v),_(e,$),z=!0,C||(S=[Qe(l,"click",Z),Qe(r,"click",W)],C=!0)},p(B,y){a=B,(!z||y&2)&&Me(l,"text-blue-500",a[21].label===!0),(!z||y&2)&&Me(r,"text-red-500",a[21].label===!1),(!z||y&2)&&f!==(f=a[21].text+"")&&le(p,f),(!z||y&2)&&g!==(g=a[25]+"")&&le(b,g),(!z||y&2)&&h!==(h=$e(a[21].score,2)+"")&&le(v,h),(!z||y&2&&E!==(E=`flex flex-grow items-center whitespace-break-spaces rounded-md border border-gray-300 p-4 pl-2 ${a[24]}`))&&V(e,"class",E)},i(B){z||(D(n.$$.fragment,B),D(s.$$.fragment,B),z=!0)},o(B){A(n.$$.fragment,B),A(s.$$.fragment,B),z=!1},d(B){B&&d(e),j(n),j(s),C=!1,Dt(S)}}}function Ol(a){let e,t;return e=new At({props:{paragraph:!0,lines:2}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function _t(a){let e,t,l,n,o;const r=[Ol,Bl],s=[];function i(f,p){return p&3&&(e=null),e==null&&(e=!!(f[21]==null||f[0].includes(f[21].rowid))),e?0:1}function c(f,p){return p===1?Nl(f):f}return t=i(a,-1),l=s[t]=r[t](c(a,t)),{c(){l.c(),n=Ze()},l(f){l.l(f),n=Ze()},m(f,p){s[t].m(f,p),N(f,n,p),o=!0},p(f,p){let u=t;t=i(f,p),t===u?s[t].p(c(f,t),p):(de(),A(s[u],1,1,()=>{s[u]=null}),me(),l=s[t],l?l.p(c(f,t),p):(l=s[t]=r[t](c(f,t)),l.c()),D(l,1),l.m(n.parentNode,n))},i(f){o||(D(l),o=!0)},o(f){A(l),o=!1},d(f){s[t].d(f),f&&d(n)}}}function Hl(a){let e,t,l=a[1],n=[];for(let r=0;r<l.length;r+=1)n[r]=_t(ht(a,l,r));const o=r=>A(n[r],1,1,()=>{n[r]=null});return{c(){e=I("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=M(r,"DIV",{class:!0});var s=w(e);for(let i=0;i<n.length;i+=1)n[i].l(s);s.forEach(d),this.h()},h(){V(e,"class","flex flex-col gap-y-4")},m(r,s){N(r,e,s);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(r,[s]){if(s&35){l=r[1];let i;for(i=0;i<l.length;i+=1){const c=ht(r,l,i);n[i]?(n[i].p(c,s),D(n[i],1)):(n[i]=_t(c),n[i].c(),D(n[i],1),n[i].m(e,null))}for(de(),i=l.length;i<n.length;i+=1)o(i);me()}},i(r){if(!t){for(let s=0;s<l.length;s+=1)D(n[s]);t=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)A(n[s]);t=!1},d(r){r&&d(e),qe(n,r)}}}const pt=100;function Fl(a){return a<.2?"bg-red-500/10":a<.8?"bg-yellow-500/10":"bg-blue-500/10"}function Ll(a){return a<.2?"Likely not in concept":a<.8?"Uncertain":"Likely in concept"}function Zl(a,e,t){let l,n,o,r,s,i,c,f,p=K,u=()=>(p(),p=ye(s,R=>t(16,f=R)),s),m,g=K,b=()=>(g(),g=ye(n,R=>t(17,m=R)),n);a.$$.on_destroy.push(()=>p()),a.$$.on_destroy.push(()=>g());let{dataset:k}=e,{concept:h}=e,{fieldPath:v}=e,{schema:$}=e,{embedding:E}=e;const z=Tt();Ae(a,z,R=>t(20,c=R));let C={},S={},Z=[];function W(R,x){if(R==null)return;const O={text:R.text,label:x},J=Object.keys(S).find(T=>S[T]===R);t(11,C={...S}),t(0,Z=[R.rowid,...Z]),c.mutate([h.namespace,h.concept_name,{insert:[O]}],{onSuccess:()=>{t(11,C={...C,[J]:void 0})},onSettled:()=>{t(0,Z=Z.filter(T=>T!==R.rowid))}})}const B=R=>W(R,!0),y=R=>W(R,!1);return a.$$set=R=>{"dataset"in R&&t(6,k=R.dataset),"concept"in R&&t(7,h=R.concept),"fieldPath"in R&&t(8,v=R.fieldPath),"schema"in R&&t(9,$=R.schema),"embedding"in R&&t(10,E=R.embedding)},a.$$.update=()=>{var R,x;a.$$.dirty&1408&&t(15,l={path:v,type:"concept",concept_namespace:h.namespace,concept_name:h.concept_name,embedding:E}),a.$$.dirty&33600&&b(t(3,n=et(k.namespace,k.name,{columns:[Fe,v],limit:pt,combine_columns:!0,searches:[l]},$))),a.$$.dirty&1152&&t(14,o={signal_name:"concept_score",namespace:h.namespace,concept_name:h.concept_name,embedding:E}),a.$$.dirty&128&&t(13,r={signal_name:"concept_labels",namespace:h.namespace,concept_name:h.concept_name}),a.$$.dirty&25408&&u(t(2,s=et(k.namespace,k.name,{columns:[Fe,v,{path:v,signal_udf:o},{path:v,signal_udf:r}],limit:pt,combine_columns:!0,sort_by:[Fe]},$))),a.$$.dirty&200064&&t(12,S=Pl(C,m.isFetching||(R=m.data)==null?void 0:R.rows,f.isFetching||(x=f.data)==null?void 0:x.rows,h,v,E)),a.$$.dirty&4096&&t(1,i=[S.positive,S.neutral,S.negative])},[Z,i,s,n,z,W,k,h,v,$,E,C,S,r,o,l,f,m,B,y]}class Yl extends _e{constructor(e){super(),pe(this,e,Zl,Hl,ge,{dataset:6,concept:7,fieldPath:8,schema:9,embedding:10})}}function gt(a){let e,t;return e=new Ge({props:{class:"dataset-link top-7 h-8",icon:Kt,iconDescription:"Open dataset and apply concept."}}),e.$on("click",a[7]),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function bt(a){let e,t,l;return t=new Yl({props:{concept:a[0],dataset:a[1],fieldPath:a[2],schema:a[3],embedding:a[4]}}),{c(){e=I("div"),Y(t.$$.fragment)},l(n){e=M(n,"DIV",{});var o=w(e);U(t.$$.fragment,o),o.forEach(d)},m(n,o){N(n,e,o),q(t,e,null),l=!0},p(n,o){const r={};o&1&&(r.concept=n[0]),o&2&&(r.dataset=n[1]),o&4&&(r.fieldPath=n[2]),o&8&&(r.schema=n[3]),o&16&&(r.embedding=n[4]),t.$set(r)},i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&d(e),j(t)}}}function vt(a){let e,t;return e=new Je({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"No embeddings",caption:"Dataset has no fields with computed embeddings. Please compute an embedding index before using the labeler on this dataset."}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Ul(a){let e,t,l,n,o,r,s,i,c,f,p;function u($){a[9]($)}function m($){a[10]($)}function g($){a[11]($)}let b={};a[1]!==void 0&&(b.dataset=a[1]),a[2]!==void 0&&(b.path=a[2]),a[4]!==void 0&&(b.embedding=a[4]),n=new Nt({props:b}),Te.push(()=>ze(n,"dataset",u)),Te.push(()=>ze(n,"path",m)),Te.push(()=>ze(n,"embedding",g));let k=a[5]!=null&&a[4]!=null&&gt(a),h=a[1]!=null&&a[2]!=null&&a[3]!=null&&a[4]!=null&&bt(a),v=a[4]==null&&vt();return{c(){e=I("div"),t=I("div"),l=I("div"),Y(n.$$.fragment),i=G(),k&&k.c(),c=G(),h&&h.c(),f=G(),v&&v.c(),this.h()},l($){e=M($,"DIV",{class:!0});var E=w(e);t=M(E,"DIV",{class:!0});var z=w(t);l=M(z,"DIV",{class:!0});var C=w(l);U(n.$$.fragment,C),C.forEach(d),i=Q(z),k&&k.l(z),z.forEach(d),c=Q(E),h&&h.l(E),f=Q(E),v&&v.l(E),E.forEach(d),this.h()},h(){V(l,"class","flex-grow"),V(t,"class","flex flex-row gap-x-4"),V(e,"class","flex flex-col gap-y-4")},m($,E){N($,e,E),_(e,t),_(t,l),q(n,l,null),_(t,i),k&&k.m(t,null),_(e,c),h&&h.m(e,null),_(e,f),v&&v.m(e,null),p=!0},p($,[E]){const z={};!o&&E&2&&(o=!0,z.dataset=$[1],Se(()=>o=!1)),!r&&E&4&&(r=!0,z.path=$[2],Se(()=>r=!1)),!s&&E&16&&(s=!0,z.embedding=$[4],Se(()=>s=!1)),n.$set(z),$[5]!=null&&$[4]!=null?k?(k.p($,E),E&48&&D(k,1)):(k=gt($),k.c(),D(k,1),k.m(t,null)):k&&(de(),A(k,1,1,()=>{k=null}),me()),$[1]!=null&&$[2]!=null&&$[3]!=null&&$[4]!=null?h?(h.p($,E),E&30&&D(h,1)):(h=bt($),h.c(),D(h,1),h.m(e,f)):h&&(de(),A(h,1,1,()=>{h=null}),me()),$[4]==null?v?E&16&&D(v,1):(v=vt(),v.c(),D(v,1),v.m(e,null)):v&&(de(),A(v,1,1,()=>{v=null}),me())},i($){p||(D(n.$$.fragment,$),D(k),D(h),D(v),p=!0)},o($){A(n.$$.fragment,$),A(k),A(h),A(v),p=!1},d($){$&&d(e),j(n),k&&k.d(),h&&h.d(),v&&v.d()}}}function ql(a,e,t){let l,n,o,r=K,s=()=>(r(),r=ye(l,h=>t(8,o=h)),l);a.$$.on_destroy.push(()=>r());let{concept:i}=e,c,f,p,u;function m(){if(n==null||u==null||c==null)return;const h=zt(c.namespace,c.name);h.addSearch({path:[n],type:"concept",concept_namespace:i.namespace,concept_name:i.concept_name,embedding:u}),It(St(c.namespace,c.name,Ct(h)))}function g(h){c=h,t(1,c)}function b(h){p=h,t(2,p)}function k(h){u=h,t(4,u)}return a.$$set=h=>{"concept"in h&&t(0,i=h.concept)},a.$$.update=()=>{a.$$.dirty&2&&s(t(6,l=c!=null&&c.namespace&&(c!=null&&c.name)?Jt(c.namespace,c.name):null)),a.$$.dirty&256&&t(3,f=o==null?void 0:o.data),a.$$.dirty&4&&t(5,n=p?Rt(p):void 0)},[i,c,p,f,u,n,l,m,o,g,b,k]}class jl extends _e{constructor(e){super(),pe(this,e,ql,Ul,ge,{concept:0})}}function wt(a,e,t){const l=a.slice();return l[29]=e[t],l}function Wl(a){let e,t,l,n,o;return t=new dl({props:{class:"ml-2"}}),{c(){e=I("div"),Y(t.$$.fragment)},l(r){e=M(r,"DIV",{});var s=w(e);U(t.$$.fragment,s),s.forEach(d)},m(r,s){N(r,e,s),q(t,e,null),l=!0,n||(o=je(We.call(null,e,{text:"This concept is publicly visible."})),n=!0)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){A(t.$$.fragment,r),l=!1},d(r){r&&d(e),j(t),n=!1,o()}}}function Gl(a){let e,t,l,n,o;return t=new _l({props:{class:"ml-2"}}),{c(){e=I("div"),Y(t.$$.fragment)},l(r){e=M(r,"DIV",{});var s=w(e);U(t.$$.fragment,s),s.forEach(d)},m(r,s){N(r,e,s),q(t,e,null),l=!0,n||(o=je(We.call(null,e,{text:"Your concepts are only visible to you when logged in with Google."})),n=!0)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){A(t.$$.fragment,r),l=!1},d(r){r&&d(e),j(t),n=!1,o()}}}function kt(a){let e,t=a[0].metadata.description+"",l;return{c(){e=I("div"),l=F(t),this.h()},l(n){e=M(n,"DIV",{class:!0});var o=w(e);l=L(o,t),o.forEach(d),this.h()},h(){V(e,"class","text text-base text-gray-600")},m(n,o){N(n,e,o),_(e,l)},p(n,o){o[0]&1&&t!==(t=n[0].metadata.description+"")&&le(l,t)},d(n){n&&d(e)}}}function Ql(a){let e,t;return{c(){e=I("div"),t=F("Try it"),this.h()},l(l){e=M(l,"DIV",{slot:!0,class:!0});var n=w(e);t=L(n,"Try it"),n.forEach(d),this.h()},h(){V(e,"slot","above"),V(e,"class","text-md font-semibold")},m(l,n){N(l,e,n),_(e,t)},p:K,d(l){l&&d(e)}}}function Kl(a){let e,t;return e=new yl({props:{example:a[5],concept:a[0],slot:"below"}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n[0]&32&&(o.example=l[5]),n[0]&1&&(o.concept=l[0]),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Jl(a){let e,t;return{c(){e=I("div"),t=F("Apply to a dataset"),this.h()},l(l){e=M(l,"DIV",{slot:!0,class:!0});var n=w(e);t=L(n,"Apply to a dataset"),n.forEach(d),this.h()},h(){V(e,"slot","above"),V(e,"class","text-md font-semibold")},m(l,n){N(l,e,n),_(e,t)},p:K,d(l){l&&d(e)}}}function Xl(a){let e,t;return e=new Je({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"Choose a dataset with a computed embedding",caption:"Dataset has no fields with computed embeddings. Please compute an embedding index before you can search by concept."}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function xl(a){let e,t,l;return t=new Ge({props:{iconDescription:"Open dataset and apply concept.",$$slots:{default:[en]},$$scope:{ctx:a}}}),t.$on("click",a[23]),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(n){e=M(n,"DIV",{class:!0});var o=w(e);U(t.$$.fragment,o),o.forEach(d),this.h()},h(){V(e,"class","mt-4")},m(n,o){N(n,e,o),q(t,e,null),l=!0},p(n,o){const r={};o[1]&2&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&d(e),j(t)}}}function en(a){let e;return{c(){e=F("Search by concept")},l(t){e=L(t,"Search by concept")},m(t,l){N(t,e,l)},d(t){t&&d(e)}}}function tn(a){let e,t,l,n,o,r,s,i,c;function f(h){a[20](h)}function p(h){a[21](h)}function u(h){a[22](h)}let m={};a[2]!==void 0&&(m.dataset=a[2]),a[3]!==void 0&&(m.path=a[3]),a[4]!==void 0&&(m.embedding=a[4]),t=new Nt({props:m}),Te.push(()=>ze(t,"dataset",f)),Te.push(()=>ze(t,"path",p)),Te.push(()=>ze(t,"embedding",u));const g=[xl,Xl],b=[];function k(h,v){return h[2]!=null&&h[3]!=null&&h[4]!=null?0:1}return s=k(a),i=b[s]=g[s](a),{c(){e=I("div"),Y(t.$$.fragment),r=G(),i.c(),this.h()},l(h){e=M(h,"DIV",{slot:!0});var v=w(e);U(t.$$.fragment,v),r=Q(v),i.l(v),v.forEach(d),this.h()},h(){V(e,"slot","below")},m(h,v){N(h,e,v),q(t,e,null),_(e,r),b[s].m(e,null),c=!0},p(h,v){const $={};!l&&v[0]&4&&(l=!0,$.dataset=h[2],Se(()=>l=!1)),!n&&v[0]&8&&(n=!0,$.path=h[3],Se(()=>n=!1)),!o&&v[0]&16&&(o=!0,$.embedding=h[4],Se(()=>o=!1)),t.$set($);let E=s;s=k(h),s===E?b[s].p(h,v):(de(),A(b[E],1,1,()=>{b[E]=null}),me(),i=b[s],i?i.p(h,v):(i=b[s]=g[s](h),i.c()),D(i,1),i.m(e,null))},i(h){c||(D(t.$$.fragment,h),D(i),c=!0)},o(h){A(t.$$.fragment,h),A(i),c=!1},d(h){h&&d(e),j(t),b[s].d()}}}function Et(a){let e,t;return e=new Le({props:{expanded:!0,$$slots:{below:[nn],above:[ln]},$$scope:{ctx:a}}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n[0]&513|n[1]&2&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function ln(a){let e,t;return{c(){e=I("div"),t=F("Metrics"),this.h()},l(l){e=M(l,"DIV",{slot:!0,class:!0});var n=w(e);t=L(n,"Metrics"),n.forEach(d),this.h()},h(){V(e,"slot","above"),V(e,"class","text-md font-semibold")},m(l,n){N(l,e,n),_(e,t)},p:K,d(l){l&&d(e)}}}function $t(a){let e,t;return e=new Il({props:{concept:a[0],embedding:a[29].name}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n[0]&1&&(o.concept=l[0]),n[0]&512&&(o.embedding=l[29].name),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function nn(a){let e,t,l=a[9].data,n=[];for(let r=0;r<l.length;r+=1)n[r]=$t(wt(a,l,r));const o=r=>A(n[r],1,1,()=>{n[r]=null});return{c(){e=I("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=M(r,"DIV",{slot:!0,class:!0});var s=w(e);for(let i=0;i<n.length;i+=1)n[i].l(s);s.forEach(d),this.h()},h(){V(e,"slot","below"),V(e,"class","model-metrics flex gap-x-4")},m(r,s){N(r,e,s);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(r,s){if(s[0]&513){l=r[9].data;let i;for(i=0;i<l.length;i+=1){const c=wt(r,l,i);n[i]?(n[i].p(c,s),D(n[i],1)):(n[i]=$t(c),n[i].c(),D(n[i],1),n[i].m(e,null))}for(de(),i=l.length;i<n.length;i+=1)o(i);me()}},i(r){if(!t){for(let s=0;s<l.length;s+=1)D(n[s]);t=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)A(n[s]);t=!1},d(r){r&&d(e),qe(n,r)}}}function an(a){let e,t;return{c(){e=I("div"),t=F("Collect labels"),this.h()},l(l){e=M(l,"DIV",{slot:!0,class:!0});var n=w(e);t=L(n,"Collect labels"),n.forEach(d),this.h()},h(){V(e,"slot","above"),V(e,"class","text-md font-semibold")},m(l,n){N(l,e,n),_(e,t)},p:K,d(l){l&&d(e)}}}function sn(a){let e,t;return e=new Je({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"You don't have permission to edit this concept",caption:"You can only edit concepts you created."}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p:K,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function rn(a){let e,t;return e=new jl({props:{concept:a[0]}}),{c(){Y(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n[0]&1&&(o.concept=l[0]),e.$set(o)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function on(a){let e,t,l,n;const o=[rn,sn],r=[];function s(i,c){return i[7]?0:1}return t=s(a),l=r[t]=o[t](a),{c(){e=I("div"),l.c(),this.h()},l(i){e=M(i,"DIV",{slot:!0,class:!0});var c=w(e);l.l(c),c.forEach(d),this.h()},h(){V(e,"slot","below"),V(e,"class","w-full")},m(i,c){N(i,e,c),r[t].m(e,null),n=!0},p(i,c){let f=t;t=s(i),t===f?r[t].p(i,c):(de(),A(r[f],1,1,()=>{r[f]=null}),me(),l=r[t],l?l.p(i,c):(l=r[t]=o[t](i),l.c()),D(l,1),l.m(e,null))},i(i){n||(D(l),n=!0)},o(i){A(l),n=!1},d(i){i&&d(e),r[t].d()}}}function cn(a){var Ne;let e,t,l,n=a[0].concept_name+"",o,r,s,i,c,f,p,u,m,g,b,k,h,v,$,E,z,C,S=a[1].length+"",Z,W,B,y,R,x,O,J,T,re=a[6].length+"",ce,ie,Ie,ee,X;const Re=[Gl,Wl],we=[];function Pe(P,H){var fe,ue;return P[8]==P[0].namespace&&!((fe=P[0].metadata)!=null&&fe.is_public)?0:(ue=P[0].metadata)!=null&&ue.is_public?1:-1}~(s=Pe(a))&&(i=we[s]=Re[s](a));let ne=((Ne=a[0].metadata)==null?void 0:Ne.description)&&kt(a);p=new Le({props:{expanded:!0,$$slots:{below:[Kl],above:[Ql]},$$scope:{ctx:a}}}),m=new Le({props:{$$slots:{below:[tn],above:[Jl]},$$scope:{ctx:a}}});let te=a[9].data&&Et(a);return k=new Le({props:{$$slots:{below:[on],above:[an]},$$scope:{ctx:a}}}),z=new yt({}),y=new ft({props:{data:a[1],canEditConcept:a[7]}}),y.$on("remove",a[24]),y.$on("add",a[25]),J=new Pt({}),ee=new ft({props:{data:a[6],canEditConcept:a[7]}}),ee.$on("remove",a[26]),ee.$on("add",a[27]),{c(){e=I("div"),t=I("div"),l=I("div"),o=F(n),r=G(),i&&i.c(),c=G(),ne&&ne.c(),f=G(),Y(p.$$.fragment),u=G(),Y(m.$$.fragment),g=G(),te&&te.c(),b=G(),Y(k.$$.fragment),h=G(),v=I("div"),$=I("div"),E=I("span"),Y(z.$$.fragment),C=F(" In concept ("),Z=F(S),W=F(" examples)"),B=G(),Y(y.$$.fragment),R=G(),x=I("div"),O=I("span"),Y(J.$$.fragment),T=F("Not in concept ("),ce=F(re),ie=F(" examples)"),Ie=G(),Y(ee.$$.fragment),this.h()},l(P){e=M(P,"DIV",{class:!0});var H=w(e);t=M(H,"DIV",{});var fe=w(t);l=M(fe,"DIV",{class:!0});var ue=w(l);o=L(ue,n),r=Q(ue),i&&i.l(ue),ue.forEach(d),c=Q(fe),ne&&ne.l(fe),fe.forEach(d),f=Q(H),U(p.$$.fragment,H),u=Q(H),U(m.$$.fragment,H),g=Q(H),te&&te.l(H),b=Q(H),U(k.$$.fragment,H),h=Q(H),v=M(H,"DIV",{class:!0});var ke=w(v);$=M(ke,"DIV",{class:!0});var Ee=w($);E=M(Ee,"SPAN",{class:!0});var he=w(E);U(z.$$.fragment,he),C=L(he," In concept ("),Z=L(he,S),W=L(he," examples)"),he.forEach(d),B=Q(Ee),U(y.$$.fragment,Ee),Ee.forEach(d),R=Q(ke),x=M(ke,"DIV",{class:!0});var be=w(x);O=M(be,"SPAN",{class:!0});var ve=w(O);U(J.$$.fragment,ve),T=L(ve,"Not in concept ("),ce=L(ve,re),ie=L(ve," examples)"),ve.forEach(d),Ie=Q(be),U(ee.$$.fragment,be),be.forEach(d),ke.forEach(d),H.forEach(d),this.h()},h(){V(l,"class","flex flex-row items-center text-2xl font-semibold"),V(E,"class","flex items-center gap-x-2 text-lg"),V($,"class","flex w-0 flex-grow flex-col gap-y-4"),V(O,"class","flex items-center gap-x-2 text-lg"),V(x,"class","flex w-0 flex-grow flex-col gap-y-4"),V(v,"class","flex gap-x-4"),V(e,"class","flex h-full w-full flex-col gap-y-8 px-10")},m(P,H){N(P,e,H),_(e,t),_(t,l),_(l,o),_(l,r),~s&&we[s].m(l,null),_(t,c),ne&&ne.m(t,null),_(e,f),q(p,e,null),_(e,u),q(m,e,null),_(e,g),te&&te.m(e,null),_(e,b),q(k,e,null),_(e,h),_(e,v),_(v,$),_($,E),q(z,E,null),_(E,C),_(E,Z),_(E,W),_($,B),q(y,$,null),_(v,R),_(v,x),_(x,O),q(J,O,null),_(O,T),_(O,ce),_(O,ie),_(x,Ie),q(ee,x,null),X=!0},p(P,H){var ve;(!X||H[0]&1)&&n!==(n=P[0].concept_name+"")&&le(o,n);let fe=s;s=Pe(P),s!==fe&&(i&&(de(),A(we[fe],1,1,()=>{we[fe]=null}),me()),~s?(i=we[s],i||(i=we[s]=Re[s](P),i.c()),D(i,1),i.m(l,null)):i=null),(ve=P[0].metadata)!=null&&ve.description?ne?ne.p(P,H):(ne=kt(P),ne.c(),ne.m(t,null)):ne&&(ne.d(1),ne=null);const ue={};H[0]&33|H[1]&2&&(ue.$$scope={dirty:H,ctx:P}),p.$set(ue);const ke={};H[0]&28|H[1]&2&&(ke.$$scope={dirty:H,ctx:P}),m.$set(ke),P[9].data?te?(te.p(P,H),H[0]&512&&D(te,1)):(te=Et(P),te.c(),D(te,1),te.m(e,b)):te&&(de(),A(te,1,1,()=>{te=null}),me());const Ee={};H[0]&129|H[1]&2&&(Ee.$$scope={dirty:H,ctx:P}),k.$set(Ee),(!X||H[0]&2)&&S!==(S=P[1].length+"")&&le(Z,S);const he={};H[0]&2&&(he.data=P[1]),H[0]&128&&(he.canEditConcept=P[7]),y.$set(he),(!X||H[0]&64)&&re!==(re=P[6].length+"")&&le(ce,re);const be={};H[0]&64&&(be.data=P[6]),H[0]&128&&(be.canEditConcept=P[7]),ee.$set(be)},i(P){X||(D(i),D(p.$$.fragment,P),D(m.$$.fragment,P),D(te),D(k.$$.fragment,P),D(z.$$.fragment,P),D(y.$$.fragment,P),D(J.$$.fragment,P),D(ee.$$.fragment,P),X=!0)},o(P){A(i),A(p.$$.fragment,P),A(m.$$.fragment,P),A(te),A(k.$$.fragment,P),A(z.$$.fragment,P),A(y.$$.fragment,P),A(J.$$.fragment,P),A(ee.$$.fragment,P),X=!1},d(P){P&&d(e),~s&&we[s].d(),ne&&ne.d(),j(p),j(m),te&&te.d(),j(k),j(z),j(y),j(J),j(ee)}}}function fn(a,e,t){let l,n,o,r,s,i,c,f,p,u,{concept:m}=e;const g=Xt();Ae(a,g,T=>t(19,p=T));const b=xt();Ae(a,b,T=>t(18,f=T));const k=Tt();Ae(a,k,T=>t(28,c=T));const h=Mt();Ae(a,h,T=>t(9,u=T));let v,$,E;function z(){const T=$?Rt($):void 0;if(T==null||E==null||v==null)return;const re=zt(v.namespace,v.name);re.addSearch({path:[T],type:"concept",concept_namespace:m.namespace,concept_name:m.concept_name,embedding:E}),It(St(v.namespace,v.name,Ct(re)))}function C(T){!m.namespace||!m.concept_name||c.mutate([m.namespace,m.concept_name,{remove:[T]}])}function S(T,re){!m.namespace||!m.concept_name||c.mutate([m.namespace,m.concept_name,{insert:[{text:T,label:re}]}])}function Z(T){v=T,t(2,v)}function W(T){$=T,t(3,$)}function B(T){E=T,t(4,E)}const y=()=>z(),R=T=>C(T.detail),x=T=>S(T.detail,!0),O=T=>C(T.detail),J=T=>S(T.detail,!1);return a.$$set=T=>{"concept"in T&&t(0,m=T.concept)},a.$$.update=()=>{var T,re,ce;a.$$.dirty[0]&524288&&t(8,l=(re=(T=p.data)==null?void 0:T.user)==null?void 0:re.id),a.$$.dirty[0]&262145&&t(17,n=(ce=f.data)==null?void 0:ce.find(ie=>ie.namespace===m.namespace&&ie.name===m.concept_name)),a.$$.dirty[0]&131072&&t(7,o=(n==null?void 0:n.acls.write)==!0),a.$$.dirty[0]&1&&t(1,r=Object.values(m.data).filter(ie=>ie.label==!0)),a.$$.dirty[0]&1&&t(6,s=Object.values(m.data).filter(ie=>ie.label==!1)),a.$$.dirty[0]&2&&t(5,i=r[Math.floor(Math.random()*r.length)])},[m,r,v,$,E,i,s,o,l,u,g,b,k,h,z,C,S,n,f,p,Z,W,B,y,R,x,O,J]}class $n extends _e{constructor(e){super(),pe(this,e,fn,cn,ge,{concept:0},null,[-1,-1])}}export{$n as C,kn as I,En as S,_l as V,dl as a,nt as b};
