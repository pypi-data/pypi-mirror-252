"use strict";(self.webpackChunk_datalayer_jupyter_kernels=self.webpackChunk_datalayer_jupyter_kernels||[]).push([[4715,6610],{9009:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(66029);const r={small:16,medium:32,large:64},i=n.forwardRef((function({title:e,titleId:t,size:s,colored:i,...a},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:i?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor",viewBox:"0 0 21 21","aria-hidden":"true",width:s?"string"==typeof s?r[s]:s:"16px",ref:o,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:i?"#767677":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#767677")?"white":"currentColor",d:"M17.734 1.61A1.207 1.207 0 1116.477.478a1.193 1.193 0 011.257 1.132z"}),n.createElement("path",{fill:i?"#F37726":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#F37726")?"white":"currentColor",d:"M10.693 15.555c-3.205 0-6.021-1.15-7.478-2.848a7.973 7.973 0 0014.956 0c-1.453 1.698-4.259 2.848-7.478 2.848zM10.693 4.51c3.205 0 6.021 1.15 7.478 2.849a7.973 7.973 0 00-14.956 0c1.457-1.702 4.26-2.849 7.478-2.849z"}),n.createElement("path",{fill:i?"#9E9E9E":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#9E9E9E")?"white":"currentColor",d:"M6.281 18.86a1.52 1.52 0 11-1.584-1.424 1.505 1.505 0 011.584 1.425z"}),n.createElement("path",{fill:i?"#616262":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#616262")?"white":"currentColor",d:"M3.58 4.123a.876.876 0 11.85-.911.887.887 0 01-.85.911z"}))}))},11750:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(66029);const r={small:16,medium:32,large:64},i=n.forwardRef((function({title:e,titleId:t,size:s,...i},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:s?"string"==typeof s?r[s]:s:"16px","aria-labelledby":t},i),e?n.createElement("title",{id:t},e):null,n.createElement("circle",{cx:36,cy:36,r:28,fill:"#b1cc33"}),n.createElement("circle",{cx:36,cy:36,r:28,fill:"none",stroke:"#000",strokeLinejoin:"round",strokeWidth:2}))}))},14432:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(66029);const r={small:16,medium:32,large:64},i=n.forwardRef((function({title:e,titleId:t,size:s,...i},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:s?"string"==typeof s?r[s]:s:"16px","aria-labelledby":t},i),e?n.createElement("title",{id:t},e):null,n.createElement("circle",{cx:36,cy:36,r:28,fill:"#fcea2b"}),n.createElement("circle",{cx:36,cy:36,r:28,fill:"none",stroke:"#000",strokeLinejoin:"round",strokeWidth:2}))}))},27546:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(66029);const r={small:16,medium:32,large:64},i=n.forwardRef((function({title:e,titleId:t,size:s,...i},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:s?"string"==typeof s?r[s]:s:"16px","aria-labelledby":t},i),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"#ea5a47",d:"M58.14 21.78l-7.76-8.013-14.29 14.22-14.22-14.22-8.013 8.013L28.217 36l-14.36 14.22 8.014 8.013 14.22-14.22 14.29 14.22 7.76-8.013L43.921 36z"}),n.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,d:"M58.14 21.78l-7.76-8.013-14.29 14.22-14.22-14.22-8.013 8.013L28.207 36l-14.35 14.22 8.014 8.013 14.22-14.22 14.29 14.22 7.76-8.013L43.921 36z"}))}))},30882:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(66029);const r={small:16,medium:32,large:64},i=n.forwardRef((function({title:e,titleId:t,size:s,...i},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:s?"string"==typeof s?r[s]:s:"16px","aria-labelledby":t},i),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"#FFF",d:"M11 57.697h49V11.909H15.998l-4 4z"}),n.createElement("path",{fill:"#9b9b9a",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,d:"M55.002 60.91H11.998a.999.999 0 01-.998-1V16.909c0-.552.447-.999.999-.999H55c.552 0 .999.447.999.999V59.91a.999.999 0 01-.998.998z"}),n.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2},n.createElement("path",{d:"M11 16.91l4.998-5h43.004c.55 0 .998.446.998.998V55.91a.999.999 0 01-.999.998"}),n.createElement("path",{d:"M55.002 60.91H11.998a.999.999 0 01-.998-1V16.909c0-.552.447-.999.999-.999H55c.552 0 .999.447.999.999V59.91a.999.999 0 01-.998.998z"}),n.createElement("path",{d:"M47.358 29.799h-4v7h4M43.358 33.298h3M19.642 36.798v-7l5 7v-7M30.858 36.798h0a2.5 2.5 0 01-2.5-2.5v-2a2.5 2.5 0 012.5-2.5h0a2.5 2.5 0 012.5 2.5v2a2.5 2.5 0 01-2.5 2.5zM36.358 29.829h4M38.358 29.829v7"})))}))},29482:(e,t,s)=>{s.d(t,{Z:()=>y});var n=s(74512),r=s(28312),i=s(13378),a=s(59689),o=s(41436),l=s(64309),c=s(19342),h=s(33921),d=s(14479),u=s(66029),p=s(96560);const g=s.n(p)().div`
  position: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.3);
  height: 100vh;
  width: 100vw;
  right: 0;
  top: 0;
  z-index: 1000000000;
`,m=function({open:e,element:t}){return e?(0,n.jsx)(g,{children:t}):(0,n.jsx)(n.Fragment,{})},f=(0,u.createContext)({openBackdrop:e=>{},closeBackdrop:()=>{}}),_=({children:e})=>{const[t,s]=(0,u.useState)(!1),[r,i]=(0,u.useState)();return(0,n.jsxs)(f.Provider,{value:{openBackdrop:e=>{i(e),s(!0)},closeBackdrop:()=>{i(void 0),s(!1)}},children:[(0,n.jsx)(m,{open:t,element:r}),e]})};s(43565),s(68458),(0,i.loadIAMConfig)(),(0,d.ml)();const x=(0,r.loadJupyterConfig)({});(0,i.setIamServer)((0,d.PV)());const y=()=>(0,n.jsx)(a.ZP,{colorMode:"day",dayScheme:"jupyter",nightScheme:"jupyter",children:(0,n.jsx)(o.ThemeProvider,{colorMode:"light",style:{backgroundColor:"var(--brand-color-canvas-default"},children:(0,n.jsx)(_,{children:x.insideJupyterLab?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.MemoryRouter,{initialEntries:["/jupyter/kernels"],children:(0,n.jsx)(h.Z,{})}),(0,n.jsx)(c.ToastContainer,{})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.BrowserRouter,{children:(0,n.jsx)(h.Z,{})}),(0,n.jsx)(c.ToastContainer,{})]})})})})},33921:(e,t,s)=>{s.d(t,{r:()=>He,Z:()=>qe});var n=s(74512),r=s(28312),i=s(13378),a=s(89010),o=s(86497),l=s(54633),c=s(66029),h=s(64309),d=s(66274),u=s(84803);var p=s(12221),g=s(32126),m=s(59689),f=s(83284);const _=()=>{const e=(0,h.useNavigate)();return(t,s=null,n=!0)=>{s&&s.preventDefault(),window.scrollTo(0,0),document.body.scrollTop=0,e(t)}};var x=s(2470),y=s(19118),v=s(76602),w=s(53646);const j={small:16,medium:32,large:64},k=c.forwardRef((function({title:e,titleId:t,size:s,colored:n,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",className:"icon",viewBox:"0 0 896 896",fill:n?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",width:s?"string"==typeof s?j[s]:s:"16px","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{d:"M747.4 354.7C701.6 233.9 584.9 148 448.2 148S194.8 233.8 149 354.6C63.3 377.1 0 455.1 0 548c0 110.5 89.5 200 199.9 200h496.2C806.5 748 896 658.5 896 548c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H199.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 0176 548c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}))})),b={small:16,medium:32,large:64},S=c.forwardRef((function({title:e,titleId:t,size:s,colored:n,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:n?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor",viewBox:"0 0 18 18","aria-hidden":"true",width:s?"string"==typeof s?b[s]:s:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fill:n?"#757575":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#757575")?"white":"currentColor",d:"M3.643 11.143H1.5V16.5h5.357v-2.143H3.643v-3.214zM1.5 6.857h2.143V3.643h3.214V1.5H1.5v5.357zm12.857 7.5h-3.214V16.5H16.5v-5.357h-2.143v3.214zM11.143 1.5v2.143h3.214v3.214H16.5V1.5h-5.357z"}))})),C={small:16,medium:32,large:64},M=c.forwardRef((function({title:e,titleId:t,size:s,colored:n,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:n?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",width:s?"string"==typeof s?C[s]:s:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{d:"M10 0c.293 0 .585.013.876.039.929.08 1.612.767 1.824 1.573l.36 1.384c.022.083.099.198.265.28.289.143.568.304.835.483.154.102.291.112.374.089l1.378-.38c.806-.22 1.74.027 2.275.788.338.481.633.99.88 1.523.394.843.14 1.777-.454 2.364L17.595 9.15c-.061.06-.122.184-.11.367.02.322.02.644 0 .966-.012.183.047.307.11.367l1.018 1.008c.593.586.848 1.52.454 2.363a9.967 9.967 0 01-.88 1.521c-.535.763-1.47 1.01-2.275.788l-1.377-.378c-.084-.023-.221-.013-.375.09-.268.178-.546.34-.835.482-.166.082-.242.197-.264.28l-.362 1.382c-.21.808-.894 1.495-1.823 1.575a9.998 9.998 0 01-1.752 0c-.929-.08-1.611-.767-1.823-1.575l-.361-1.382c-.022-.083-.099-.198-.265-.28a7.181 7.181 0 01-.835-.483c-.154-.102-.291-.112-.374-.088l-1.378.378c-.805.22-1.74-.026-2.275-.787-.337-.481-.632-.99-.88-1.523-.394-.844-.14-1.777.453-2.364l1.019-1.007c.063-.06.123-.184.11-.367a7.768 7.768 0 010-.966c.013-.183-.047-.307-.11-.367L1.386 8.142C.794 7.556.54 6.623.933 5.78a9.9 9.9 0 01.88-1.521c.535-.763 1.47-1.01 2.275-.788l1.377.377c.084.024.221.014.375-.088.268-.179.546-.34.835-.483.166-.082.243-.197.264-.28L7.3 1.614C7.511.806 8.195.119 9.124.037 9.413.014 9.705 0 10 0zm-.714 1.906c-.045.004-.135.045-.171.183L8.754 3.47c-.184.701-.686 1.209-1.248 1.486a5.644 5.644 0 00-.625.363c-.521.347-1.212.529-1.911.337l-1.379-.378c-.136-.038-.218.02-.243.056-.275.39-.515.805-.717 1.237-.017.039-.026.138.074.238l1.019 1.007c.514.508.702 1.196.662 1.82a5.887 5.887 0 000 .728c.04.623-.148 1.312-.662 1.82L2.705 13.19c-.101.1-.091.199-.074.238.203.432.442.846.717 1.236.025.038.106.095.243.058l1.378-.38c.7-.19 1.391-.01 1.912.338.202.134.41.255.627.363.558.277 1.062.786 1.246 1.486l.361 1.381c.036.136.126.179.171.183a8.26 8.26 0 001.428 0c.045-.004.135-.045.171-.183l.361-1.381c.184-.701.686-1.209 1.248-1.486.216-.108.425-.229.625-.363.521-.347 1.212-.528 1.911-.337l1.379.379c.136.036.219-.02.244-.057.274-.391.513-.805.716-1.237.017-.039.026-.138-.074-.238l-1.019-1.007c-.514-.508-.702-1.196-.662-1.82a5.887 5.887 0 000-.728c-.04-.623.148-1.312.662-1.82l1.019-1.007c.101-.1.091-.199.074-.238a8.082 8.082 0 00-.716-1.236c-.025-.037-.107-.095-.244-.058l-1.378.38c-.7.19-1.391.01-1.912-.338-.2-.135-.41-.256-.627-.363-.558-.277-1.062-.786-1.246-1.486l-.361-1.381c-.036-.138-.126-.179-.171-.183a8.251 8.251 0 00-1.428 0zM13.75 10a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zm-1.875 0a1.875 1.875 0 10-3.75 0 1.875 1.875 0 003.75 0z"}))})),F={small:16,medium:32,large:64},E=c.forwardRef((function({title:e,titleId:t,size:s,colored:n,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:n?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor","aria-hidden":"true",viewBox:"0 0 50 50",width:s?"string"==typeof s?F[s]:s:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fill:n?"#e26d6d":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#e26d6d")?"white":"currentColor",strokeWidth:2.5,d:"M0 0h50v10H0zm0 0"}),c.createElement("path",{fill:n?"#f9cb07":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#f9cb07")?"white":"currentColor",strokeWidth:2.5,d:"M0 20h50v10H0zm0 0"}),c.createElement("path",{fill:n?"#49b3d9":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#49b3d9")?"white":"currentColor",strokeWidth:2.5,d:"M0 40h50v10H0zm0 0"}))})),D={small:16,medium:32,large:64},Z=c.forwardRef((function({title:e,titleId:t,size:s,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",width:s?"string"==typeof s?D[s]:s:"16px",strokeWidth:2,className:"feather feather-log-out",viewBox:"0 0 24 24","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"}))})),R=()=>{const e=_();return(0,n.jsxs)(x.P,{children:[(0,n.jsx)(x.P.Anchor,{children:(0,n.jsx)(y.h,{icon:w.Ui8,variant:"invisible","aria-label":"jupyter-kernels-more"})}),(0,n.jsx)(x.P.Overlay,{width:"medium",children:(0,n.jsxs)(v.S,{children:[(0,n.jsxs)(v.S.Group,{title:"More...",children:[(0,n.jsxs)(v.S.Item,{onSelect:()=>e("/jupyter/kernels/usage"),children:[(0,n.jsx)(v.S.LeadingVisual,{children:(0,n.jsx)(k,{})}),"Usage",(0,n.jsx)(v.S.Description,{variant:"block",children:"Monitor the CPU and Memory usage of your kernels."})]}),(0,n.jsxs)(v.S.Item,{onSelect:()=>e("/jupyter/kernels/billing"),children:[(0,n.jsx)(v.S.LeadingVisual,{children:(0,n.jsx)(S,{})}),"Billing",(0,n.jsx)(v.S.Description,{variant:"block",children:"View download and pay your bills."})]}),(0,n.jsxs)(v.S.Item,{onSelect:()=>e("/jupyter/kernels/settings"),children:[(0,n.jsx)(v.S.LeadingVisual,{children:(0,n.jsx)(M,{})}),"Settings",(0,n.jsx)(v.S.Description,{variant:"block",children:"Configure your personal settings."})]}),(0,n.jsxs)(v.S.Item,{onSelect:()=>e("/jupyter/kernels/docs"),children:[(0,n.jsx)(v.S.LeadingVisual,{children:(0,n.jsx)(w.vJ3,{})}),"Documentation",(0,n.jsx)(v.S.Description,{variant:"block",children:"Documentation to help you use Datalayer."})]}),(0,n.jsxs)(v.S.Item,{onSelect:()=>e("/jupyter/kernels/about"),children:[(0,n.jsx)(v.S.LeadingVisual,{children:(0,n.jsx)(E,{})}),"About",(0,n.jsx)(v.S.Description,{variant:"block",children:"Learn how to scale you local JupyterLab with remote kernels with Datalayer."})]})]}),(0,n.jsx)(v.S.Divider,{}),(0,n.jsxs)(v.S.Item,{variant:"danger",onSelect:t=>e("/jupyter/kernels/logout"),children:[(0,n.jsx)(v.S.LeadingVisual,{children:(0,n.jsx)(Z,{})}),"Logout"]})]})})]})},P=()=>{const e=_();return(0,n.jsx)(m.ZP,{colorMode:"night",nightScheme:"dark_dimmed",children:(0,n.jsxs)(f.Z,{sx:{paddingTop:0,height:45,paddingBottom:0},children:[(0,n.jsx)(f.Z.Item,{full:!0,children:(0,n.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels")},children:"Home"})}),(0,n.jsx)(f.Z.Item,{children:(0,n.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels/profile")},children:"Profile"})}),(0,n.jsx)(f.Z.Item,{children:(0,n.jsx)(R,{})})]})})},I=e=>{const{content:t}=e;return(0,n.jsxs)(p.X,{containerWidth:"full",padding:"none",sx:{overflow:"visible"},children:[(0,n.jsx)(p.X.Header,{children:(0,n.jsx)(P,{})}),(0,n.jsx)(p.X.Pane,{"aria-label":"pane-start",position:{regular:"start",narrow:"start",wide:"start"},resizable:!0,sticky:!0,width:{min:"100px",max:"500px",default:"150px"},children:(0,n.jsx)(g.Z,{})}),(0,n.jsx)(p.X.Content,{sx:{minHeight:"calc(100vh - 380px)"},children:(0,n.jsx)(g.Z,{children:t})}),(0,n.jsx)(p.X.Pane,{resizable:!0,position:{regular:"end",narrow:"end",wide:"end"},width:{min:"100px",max:"500px",default:"150px"},"aria-label":"pane-end"}),(0,n.jsx)(p.X.Footer,{divider:"none"})]})};I.defaultProps={};const N=I;var L=s(83513),T=s(14479),O=s(69252);const z=()=>{const{setAuth:e,token:t}=(0,i.useStore)(),{setRemoteJupyterToken:s}=(0,L.o)(),n=_(),r=s=>fetch(s.url,{method:s.method,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${s.token??t}`},body:s.body?JSON.stringify(s.body):void 0,credentials:"include"}).then((t=>{if(200!==t.status){if(401!==t.status)throw new Error(t.status.toString());e(void 0,void 0),n("/jupyter/kernels/login")}return t.json()})).catch((e=>{throw e}));return{apiRequest:r,createJupyterServer:e=>r({url:`${(0,T.PV)()}/api/operator/jupyter/server/${e}`,method:"POST"}).then((e=>(console.log("Create Jupyter Server response",e),s(e.token),e))),deleteJupyterServer:e=>{r({url:`${(0,T.PV)()}/api/operator/jupyter/server/${e}`,method:"DELETE"}).then((e=>{console.log("delete Jupyter Server response",e)}))},mountLocalFolder:e=>{(0,O.v)(`jump/${e}`).then((e=>{console.log("--- mountLocalFolder",e)})).catch((e=>{console.error(`Error while accessing the jupyter server jupyter_kernels extension.\n${e}`)}))},unmountLocalFolder:e=>{(0,O.v)(`jump/${e}`,{method:"DELETE"}).then((e=>{console.log("--- unmountLocalFolder",e)})).catch((e=>{console.error(`Error while accessing the jupyter server jupyter_kernels extension.\n${e}`)}))}}},K=z,J=()=>{const e=_();return(0,n.jsx)(m.ZP,{colorMode:"night",nightScheme:"dark_dimmed",children:(0,n.jsxs)(f.Z,{sx:{paddingTop:0,height:45,paddingBottom:0},children:[(0,n.jsx)(f.Z.Item,{children:(0,n.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels")},children:"Home"})}),(0,n.jsx)(f.Z.Item,{children:(0,n.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels/login")},children:"Login"})}),(0,n.jsx)(f.Z.Item,{children:(0,n.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels/join")},children:"Join"})})]})})},V=e=>{const{content:t}=e;return(0,n.jsxs)(p.X,{containerWidth:"full",padding:"none",sx:{overflow:"visible"},children:[(0,n.jsx)(p.X.Header,{children:(0,n.jsx)(J,{})}),(0,n.jsx)(p.X.Content,{sx:{minHeight:"calc(100vh - 380px)"},children:(0,n.jsx)(g.Z,{children:t})}),(0,n.jsx)(p.X.Footer,{divider:"none"})]})};V.defaultProps={};const A=V;var W=s(42913),B=s(11048),$=s(5917),U=s(62005),H=s(18310),q=s(57687),G=s(52746),X=s(16419),Y=s(14675),Q=s(85680);const ee={small:"3px",medium:"6px",large:"12px",full:"100vh"},te={small:"0 1px 0 rgba(31,35,40,0.04)",medium:"0 3px 6px rgba(140,149,159,0.15)",large:"0 8px 24px rgba(140,149,159,0.2)",extraLarge:"0 12px 28px rgba(140,149,159,0.3)"},se=e=>{const{sx:t,rounded:s,border:r,shadow:i,children:a,...o}=e;return(0,n.jsx)(g.Z,{sx:{...t||void 0,...s?"string"==typeof s?{borderRadius:ee[s]}:{borderRadius:e.rounded}:void 0,...r?{borderWidth:1,borderStyle:"solid",borderColor:"border.default"}:void 0,...i?{boxShadow:te[i]}:{boxShadow:te.small}},...o,children:a})};se.Header=e=>{const{title:t,description:s,leadingIcon:r,action:i}=e;return(0,n.jsxs)(g.Z,{display:"flex",alignItems:"center",sx:{p:3},children:[r&&(0,n.jsx)(g.Z,{sx:{mr:3},children:(0,n.jsx)(Q.Z,{size:"medium",icon:r})}),(0,n.jsxs)(g.Z,{sx:{flexGrow:1},children:[(0,n.jsx)(U.Z,{display:"block",children:t}),(0,n.jsx)(U.Z,{display:"block",color:"fg.muted",children:s})]}),i&&(0,n.jsx)(g.Z,{children:i})]})},se.Image=({url:e,image:t,svg:s,height:r})=>(0,n.jsxs)(g.Z,{display:"block",width:"100%",height:`${r}px`,backgroundImage:`url(${e})`,sx:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",objectFit:"cover"},children:[t&&(0,n.jsx)("img",{src:t,style:{maxHeight:`${r}px`}}),s&&(0,n.jsx)("img",{src:`data:image/svg+xml;utf8,${s}`,style:{maxHeight:r}})]}),se.Content=({children:e})=>(0,n.jsx)(g.Z,{display:"block",sx:{p:3},children:e}),se.Actions=({children:e})=>(0,n.jsx)(g.Z,{display:"block",sx:{p:3},children:e}),s(55431);var ne=s(46722),re=s(52118);const ie=e=>{const{leadingIcon:t,variant:s,onClose:r,...i}=e,[a,o]=(0,c.useState)(!0);return a?(0,n.jsx)(ne.Z,{variant:s,...i,children:(0,n.jsxs)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsxs)(g.Z,{sx:{flexGrow:1},children:[t&&(0,n.jsx)(Q.Z,{icon:t}),(0,n.jsx)(U.Z,{color:`${"default"===s?"accent":"warning"===s?"attention":s}.fg`,children:e.children})]}),(0,n.jsx)(g.Z,{onClick:()=>{r&&r(),o(!1)},sx:{cursor:"pointer"},children:(0,n.jsx)(re.b0D,{size:20})})]})}):null},ae={small:16,medium:32,large:64},oe=c.forwardRef((function({title:e,titleId:t,size:s,colored:n,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:n?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:s?"string"==typeof s?ae[s]:s:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fill:n?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",d:"M14 10h-2v12h2V10zm6 0h-2v12h2V10z"}),c.createElement("path",{fill:n?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",d:"M16 4A12 12 0 114 16 12 12 0 0116 4m0-2a14 14 0 1014 14A14 14 0 0016 2z"}))}));var le=s(30882),ce=s(27546),he=s(9009),de=s(11750),ue=s(14432),pe=s(97930),ge=s(67095);const me=()=>{const[e,t]=(0,c.useState)(0);return(0,W.useInterval)((()=>{t(e>=100?0:e+1)}),100),(0,n.jsx)(ge.k,{progress:e,"aria-label":""})};var fe=s(19342);const _e=fe.toast.POSITION.TOP_CENTER,xe=()=>({enqueueToast:(e,t)=>{switch(t.variant){case"info":fe.toast.info(e,{position:_e});break;case"success":fe.toast.success(e,{position:_e});break;case"warning":fe.toast.warning(e,{position:_e});break;case"error":fe.toast.error(e,{position:_e})}}}),ye=()=>{const{user:e}=(0,i.useStore)(),{enqueueToast:t}=xe(),{mountLocalFolder:s,unmountLocalFolder:r}=z(),{jupyterLabAdapter:a,serviceManager:o,showDisclaimer:l,setShowDisclaimer:h}=(0,L.Z)(),[d,u]=(0,c.useState)(new Array),[p,m]=(0,c.useState)(new Array),[f,_]=(0,c.useState)(),[x,v]=(0,c.useState)(),[w,j]=(0,c.useState)(!1),[k,b]=(0,c.useState)(new Map),S=e=>{_(Array.from(e.kernels.running()))};return(0,W.useInterval)((()=>{o&&o.browser&&u(Array.from(o.browser.kernels.running()))}),5e3),(0,W.useInterval)((()=>{o&&o.remote&&(o.remote.kernelspecs.specs?.kernelspecs&&o.remote.kernelspecs.refreshSpecs().then((()=>{const t=Object.values(o.remote.kernelspecs.specs.kernelspecs);0===t.length&&j(!1),j(!0);const s=new Map;t.forEach((e=>{const t=e?.name;if(t?.startsWith("run-")){const n=e?.metadata;if(n){const e=k.get(t),r={description:n.description,notebookExampleUrl:n.notebook_example_url};pe.JSONExt.deepEqual(e??{},r)||s.set(t,r)}}}));const n=new Map([...k,...s]);s.size&&b(n);const r=Array.from(o.remote?.kernels.running()??[]);for(const t of n.keys())r.find((e=>e.name===t))||o.remote?.kernels.startNew({name:t},{username:e?.handle,handleComms:!0})})),S(o.remote)),o&&m(Array.from(o.kernels.running()))}),5e3),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[l&&(0,n.jsxs)(ie,{onClose:()=>h(!1),children:["Jupyter Kernels is released in ",(0,n.jsx)(B.Z,{children:"PREVIEW"})," mode. This means that the account you have created will not stay and can be removed at any time based on Datalayer's new releases. Read the"," ",(0,n.jsx)($.Z,{href:"https://jupyter-kernels.datalayer.tech",target:"_blank",children:"documentation"})," ","for usage and support."]}),(0,n.jsx)(q.m,{sx:{marginTop:1},children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Jupyter Kernels"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),w&&o&&o.remote&&f?(0,n.jsxs)(g.Z,{mt:3,children:[(0,n.jsxs)(G.i.Container,{children:[(0,n.jsx)(G.i.Title,{as:"h2",id:"images",children:"Remote Kernels"}),(0,n.jsx)(G.i.Subtitle,{as:"p",id:"images-subtitle",children:"Available remote kernels."}),(0,n.jsx)(X.w,{"aria-labelledby":"remote-kernels","aria-describedby":"remote-kernels-subtitle",data:f,columns:[{header:"Name",field:"name",renderCell:e=>(0,n.jsx)(U.Z,{children:e.name})},{header:"Description",id:"description",renderCell:e=>(0,n.jsx)(U.Z,{children:k.get(e.name)?.description})},{header:"State",field:"execution_state",renderCell:e=>(0,n.jsx)(U.Z,{children:e.execution_state})},{header:"Start / Pause",id:"start-pause-action",renderCell:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.h,{"aria-label":`Pause the kernel with id ${e.id}`,icon:oe,size:"small",onClick:()=>t("The Start/Pause feature is not yet implemented... Checkout out the next release 🎉, it is going to be awesome.",{variant:"warning"})})})},{header:"Example",id:"example-action",renderCell:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.h,{"aria-label":`Create an example notebook for kernel ${e.name}`,icon:le.Z,size:"small",onClick:()=>{(async(e,t,s)=>{const n=await e.commands.execute("notebook:create-new",{cwd:"/"});n.context.rename(t+".ipynb");const r=await fetch(s),i=(await r.text()).replaceAll("\\n","");n.context.model.fromJSON({...JSON.parse(i)})})(a.jupyterLab,e.name,k.get(e.name).notebookExampleUrl),t(`An example notebook is created for kernel ${e.name}.`,{variant:"info"})}})})},{header:"Mount local folder",id:"mount-local-folder",renderCell:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(H.Z,{size:"small",checked:x===e.name,onClick:()=>{x===e.name?(r(e.id),v(void 0),t(`You local folder is not more accessible from ${e.name} kernel.`,{variant:"info"})):(s(e.id),v(e.name),t(`You local folder should be accessible from a Notebook connected to the ${e.name} kernel.`,{variant:"info"}))},disabled:void 0!==x&&x!==e.name})})})},{header:"Delete",id:"delete-action",renderCell:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.h,{"aria-label":`Delete the kernel ${e.name}`,icon:ce.Z,size:"small",onClick:()=>{((e,t)=>{e.kernels.shutdown(t).then((()=>{console.log(`Kernel ${t} is terminated.`),S(e)}))})(o.remote,e.id),t(`The kernel ${e.name} (${e.id}) is terminated.`,{variant:"info"})}})})}]})]}),0===f.length&&(0,n.jsx)(me,{})]}):(0,n.jsx)(g.Z,{mt:3,children:(0,n.jsxs)(Y.Z,{border:!0,children:[(0,n.jsx)(Y.Z.Visual,{children:(0,n.jsx)(he.Z,{size:"medium"})}),(0,n.jsx)(Y.Z.Heading,{children:"Remote Kernels"}),(0,n.jsx)(Y.Z.Description,{children:(0,n.jsx)(g.Z,{sx:{textAlign:"center"},children:(0,n.jsx)(g.Z,{children:"No Remote Kernels found."})})})]})}),(0,n.jsx)(g.Z,{children:w?(0,n.jsxs)(g.Z,{display:"flex",mt:3,children:[(0,n.jsx)(g.Z,{children:(0,n.jsx)(de.Z,{})}),(0,n.jsx)(g.Z,{ml:1,children:(0,n.jsx)(U.Z,{children:"Your Remote Jupyter Server is available."})})]}):(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(g.Z,{mt:3,children:(0,n.jsx)(me,{})}),(0,n.jsxs)(g.Z,{display:"flex",mt:3,children:[(0,n.jsx)(g.Z,{children:(0,n.jsx)(ue.Z,{})}),(0,n.jsx)(g.Z,{ml:1,children:(0,n.jsx)(U.Z,{children:"We are checking your Remote Jupyter Server...."})})]})]})}),p.length>0?(0,n.jsx)(g.Z,{mt:3,children:(0,n.jsxs)(G.i.Container,{children:[(0,n.jsx)(G.i.Title,{as:"h2",id:"images",children:"Local Kernels"}),(0,n.jsx)(G.i.Subtitle,{as:"p",id:"images-subtitle",children:"Available local kernels."}),o&&p&&(0,n.jsx)(X.w,{"aria-labelledby":"local-kernels","aria-describedby":"local-kernels-subtitle",data:p,columns:[{header:"Name",field:"name",renderCell:e=>(0,n.jsx)(U.Z,{children:e.name})},{header:"ID",field:"id",renderCell:e=>(0,n.jsx)(U.Z,{children:e.id})},{header:"State",field:"execution_state",renderCell:e=>(0,n.jsx)(U.Z,{children:e.execution_state})}]})]})}):(0,n.jsx)(g.Z,{mt:3,children:(0,n.jsxs)(Y.Z,{border:!0,children:[(0,n.jsx)(Y.Z.Visual,{children:(0,n.jsx)(he.Z,{size:"medium"})}),(0,n.jsx)(Y.Z.Heading,{children:"Local Kernels"}),(0,n.jsx)(Y.Z.Description,{children:(0,n.jsx)(g.Z,{sx:{textAlign:"center"},children:(0,n.jsx)(g.Z,{children:"No Local Kernels found."})})})]})}),d.length>0?(0,n.jsx)(g.Z,{mt:3,children:(0,n.jsxs)(G.i.Container,{children:[(0,n.jsx)(G.i.Title,{as:"h2",id:"images",children:"Browser Kernels"}),(0,n.jsx)(G.i.Subtitle,{as:"p",id:"images-subtitle",children:"Available browser kernels."}),o&&d&&(0,n.jsx)(X.w,{"aria-labelledby":"browser-kernels","aria-describedby":"browser-kernels-subtitle",data:d,columns:[{header:"Name",field:"name",renderCell:e=>(0,n.jsx)(U.Z,{children:e.name})},{header:"ID",field:"id",renderCell:e=>(0,n.jsx)(U.Z,{children:e.id})},{header:"State",field:"execution_state",renderCell:e=>(0,n.jsx)(U.Z,{children:e.execution_state})}]})]})}):(0,n.jsx)(g.Z,{mt:3,children:(0,n.jsxs)(Y.Z,{border:!0,children:[(0,n.jsx)(Y.Z.Visual,{children:(0,n.jsx)(he.Z,{size:"medium"})}),(0,n.jsx)(Y.Z.Heading,{children:"Browser Kernels"}),(0,n.jsx)(Y.Z.Description,{children:(0,n.jsx)(g.Z,{sx:{textAlign:"center"},children:(0,n.jsx)(g.Z,{children:"No Browser Kernels found."})})})]})})]})})};var ve=s(21809),we=s(66062);const je={small:16,medium:32,large:64},ke=c.forwardRef((function({title:e,titleId:t,size:s,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",width:s?"string"==typeof s?je[s]:s:"16px",strokeWidth:2,className:"feather feather-log-in",viewBox:"0 0 24 24","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4M10 17l5-5-5-5M15 12H3"}))})),be=()=>{const e=_();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{m:3,children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Jupyter Kernels"}),(0,n.jsx)(q.m.Description,{children:"alpha"})]})}),(0,n.jsx)(ve.Z,{children:"Scale your local JupyterLab with the Cloud."}),(0,n.jsx)(U.Z,{as:"h3",children:"Please login to use Jupyter Kernels"}),(0,n.jsx)($.Z,{href:"",onClick:t=>e("/jupyter/kernels/login",t),children:(0,n.jsx)(we.Z,{sx:{marginBottom:3},children:(0,n.jsx)(we.Z.Icon,{icon:ke})})})]})})},Se={small:16,medium:32,large:64},Ce=c.forwardRef((function({title:e,titleId:t,size:s,colored:n,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 243.75 243.75",fill:n?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:s?"string"==typeof s?Se[s]:s:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("g",{fill:n?"#fff":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#fff")?"white":"currentColor",strokeWidth:2.928,transform:"translate(0 -308.268)"},c.createElement("circle",{cx:121.875,cy:430.143,r:120.411,stroke:"#000"}),c.createElement("path",{fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M119.675 477.588l.253-140.166c-73.532 5.11-86.696 84.242-28.25 114.7l.61 25.34z"}),c.createElement("path",{fillRule:"evenodd",stroke:"#000",d:"M120.07 482.652H93.813c-2.945 4.667-3.575 8.04 2.748 13.127-6.62.865-6.378 8.548-2.9 10.686-4.242 1.556-5.282 8.727 6.869 7.937l1.625 5.486c.733 2.113 1.746 2.545 2.76 2.973l10.458-.086c1.992-.72 4.299-2.105 4.39-5.015z"}),c.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",strokeLinecap:"round",strokeLinejoin:"round",d:"M124.291 477.462l-.469-139.95c73.532 5.11 86.696 84.458 28.25 114.916l-.61 25.34z"}),c.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",d:"M125.32 482.957l-.306 32.361c1.317 11.059 11.072 8.629 10.99-.61v-31.751zM139.957 482.957l-.305 32.361c1.317 11.059 11.072 8.629 10.99-.61v-31.751z"}),c.createElement("path",{fillRule:"evenodd",stroke:"#f8d05b",d:"M112.412 477.238l-16.948-73.934c-4.23-19.168-16.974-14.783-11.444-.557 6.267 10.896 28.39 21.763 33.582 6.106-4.523-5.743-6.628-12.59 1.333-16.65"}),c.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",strokeLinejoin:"round",d:"M131.627 399.814c1.778-4.471 12.628-9.482 19.487-14.062 7.117 3.213 17.741 13.145 12.804 25.555-1.265 4.901-28.05 4.544-30.224 2.137-4.481-4.606-3.115-10.024-2.067-13.63zM128.198 428.251c-.91 7.576-.577 13.909-.763 20.76 3.425.788 7.262.337 11.082-.062-2.75-6.95-5.704-13.748-10.319-20.698z"})))})),Me=e=>{const{version:t}=e,[s,r]=(0,c.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsxs)(q.m.Title,{children:["🪐 ⚪ Jupyter Kernels",(0,n.jsx)(B.Z,{sx:{marginLeft:1},children:t})]}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(U.Z,{children:"Jupyter Kernels scales your JupyterLab in the cloud with remote Kernels and local files."})}),(0,n.jsx)(g.Z,{mt:3,children:s?(0,n.jsx)(Ce,{size:300,onClick:e=>r(!1)}):(0,n.jsx)("img",{src:"https://assets.datalayer.tech/releases/datalayer-0.3.0-black-snake_1024.png",onClick:e=>r(!0),style:{width:"100%"}})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)($.Z,{href:"https://datalayer.tech/docs/releases/0.3.0-black-snake",target:"_blank",children:(0,n.jsx)(U.Z,{as:"h4",children:"Datalayer 0.3.0 Black Snake Release"})})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)($.Z,{href:"https://github.com/datalayer/datalayer-iam",target:"_blank",children:(0,n.jsx)(U.Z,{as:"h4",children:"Source code"})})})]})},Fe={small:16,medium:32,large:64},Ee=c.forwardRef((function({title:e,titleId:t,size:s,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:r,width:s?"string"==typeof s?Fe[s]:s:"16px","aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fill:"#fff",d:"M15.35 59.08h-1.779c-.684 0-1.238-.578-1.238-1.291v-34.83c0-.713.554-1.291 1.238-1.291h1.779c.684 0 1.238.578 1.238 1.291v34.83c0 .713-.554 1.291-1.238 1.291zM58.46 59.08h-1.779c-.684 0-1.238-.713-1.238-1.593v-32.97c0-.88.554-1.593 1.238-1.593h1.779c.684 0 1.238.713 1.238 1.593v32.97c0 .88-.555 1.593-1.238 1.593z"}),c.createElement("path",{fill:"#fcea2b",d:"M7.45 43.47h7.743L7.45 51.213z"}),c.createElement("path",{fill:"#3F3F3F",d:"M15.19 43.47h12.34l-7.743 7.743-12.34-.058z"}),c.createElement("path",{fill:"#fcea2b",d:"M27.48 43.47h12.34l-7.743 7.743h-12.29z"}),c.createElement("path",{fill:"#3F3F3F",d:"M39.82 43.47h12.34l-7.743 7.743h-12.34z"}),c.createElement("path",{fill:"#fcea2b",d:"M52.16 43.47l11.89-.184-7.612 7.612h-11.7z"}),c.createElement("path",{fill:"#3F3F3F",d:"M64.05 43.29v7.612h-7.612z"}),c.createElement("path",{fill:"#fcea2b",d:"M7.95 28.33l7.646-.034-7.646 7.646z"}),c.createElement("path",{fill:"#3F3F3F",d:"M15.6 28.3h11.94l-7.695 7.646H7.955z"}),c.createElement("path",{fill:"#fcea2b",d:"M27.48 28.3h12.34l-7.743 7.743h-12.29z"}),c.createElement("path",{fill:"#3F3F3F",d:"M39.82 28.3h12.34l-7.743 7.743h-12.34z"}),c.createElement("path",{fill:"#fcea2b",d:"M52.16 28.3H64.5l-8.062 7.646-12.02.098z"}),c.createElement("path",{fill:"#3F3F3F",d:"M64.05 28.33v7.612h-7.612z"}),c.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2},c.createElement("path",{d:"M12.74 42.72v-6.348M16.92 50.9v6.509c0 .672-.545 1.217-1.217 1.217h-1.748a1.217 1.217 0 01-1.217-1.217v-6.071M16.92 36.37v6.348M12.74 28.24v-5.907m4.181 0v5.812M55.1 43.29v-6.921M59.28 51.34v6.071c0 .672-.545 1.217-1.217 1.217h-1.748a1.217 1.217 0 01-1.217-1.217V51.34M59.28 36.37v5.969M55.1 28.03v-5.891m4.181 0v5.796M7.95 28.33h56.1v7.612H7.95z"}),c.createElement("path",{d:"M7.95 43.29h56.1v7.612H7.95z"}),c.createElement("ellipse",{cx:14.83,cy:17.97,rx:4.594,ry:4.596}),c.createElement("ellipse",{cx:57.19,cy:17.97,rx:4.594,ry:4.596})),c.createElement("g",{fill:"#f4aa41",fillRule:"evenodd",stroke:"#e27022",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,transform:"translate(-2.525 -.094)"},c.createElement("ellipse",{cx:17.36,cy:18.06,rx:4.594,ry:4.596}),c.createElement("ellipse",{cx:59.71,cy:18.06,rx:4.594,ry:4.596})))})),De=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Billing"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(g.Z,{children:"This feature is being developed."}),(0,n.jsxs)(g.Z,{mt:3,children:["Follow progress on"," ",(0,n.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(Ee,{size:200})})]})}),Ze=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Content"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(g.Z,{children:"This feature is being developed."}),(0,n.jsxs)(g.Z,{mt:3,children:["Follow progress on"," ",(0,n.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(Ee,{size:200})})]})});var Re=s(20740);const Pe=e=>{const{boxPanel:t}=e;return(0,n.jsx)("div",{style:{position:"relative"},children:(0,n.jsx)(g.Z,{className:"jp-LabShell",sx:{position:"relative","& .dla-Jupyter-Notebook":{height:1e3,maxHeight:1e3,width:"100%"},"& .jp-MainAreaWidget":{width:"100%",height:"100%"},"& .jp-Toolbar":{width:"100% !important"},"& .jp-NotebookPanel-notebook":{width:"100% !important",height:"100%"},"& .lm-mod-hidden":{display:"unset !important"}},children:(0,n.jsx)(r.Lumino,{children:t})})})},Ie=()=>{const{jupyterLabAdapter:e,serviceManager:t}=(0,L.Z)(),{createJupyterServer:s,deleteJupyterServer:r}=z(),{enqueueToast:i}=xe(),[a,o]=(0,c.useState)(),[l,h]=(0,c.useState)(),[d,u]=(0,c.useState)(),[p,m]=(0,c.useState)(),[f,_]=(0,c.useState)();(0,c.useEffect)((()=>{e&&(async()=>{const t=await e.notebook("test.ipynb");_(t)})().catch(console.error)}),[e]);const x=()=>{o(Array.from(t.local.kernels.running())),h(Array.from(t.local.sessions.running())),u(Array.from(t.remote.kernels.running())),m(Array.from(t.remote.sessions.running()))};return(0,W.useInterval)((()=>{t&&t.remote&&x()}),5e3),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ye,{}),(0,n.jsx)(ve.Z,{children:"Debugging Section"}),t&&t.local&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{children:"Local Jupyter Server"}),(0,n.jsxs)(g.Z,{children:[t.local.serverSettings.baseUrl," -"," ",t.local.serverSettings.wsUrl]}),(0,n.jsxs)(g.Z,{mt:3,children:[(0,n.jsx)(g.Z,{children:"Local Kernels [ id | name | last_activity | execution_state | connections ]"}),a?.map((e=>(0,n.jsx)(g.Z,{children:(0,n.jsxs)(g.Z,{children:[e.id," | ",e.name," | ",e.last_activity," |"," ",e.execution_state," | ",e.connections,(0,n.jsx)($.Z,{sx:{marginLeft:1},href:"",onClick:s=>{var n;s.preventDefault(),n=e.id,t.local.kernels.shutdown(n).then((()=>{i(`Kernel ${n} is terminated.`,{variant:"info"}),console.log(`Kernel ${n} is terminated.`),x()}))},children:"delete"})]})},e.id)))]}),(0,n.jsxs)(g.Z,{mt:3,children:[(0,n.jsx)(g.Z,{children:"Local Sessions [ id | name | path | type | kernel_id | kernel_name ]"}),l?.map((e=>(0,n.jsx)(g.Z,{children:(0,n.jsxs)(g.Z,{children:[e.id," | ",e.name," | ",e.path," |"," ",e.type," | ",e.kernel?.id," |"," ",e.kernel?.name,(0,n.jsx)($.Z,{href:"",sx:{marginLeft:1},onClick:s=>{var n;s.preventDefault(),n=e.id,t.local.sessions.shutdown(n).then((()=>{i(`Session ${n} is terminated.`,{variant:"info"}),console.log(`Session ${n} is terminated.`),x()}))},children:"delete"})]})},e.id)))]})]}),t&&t.remote&&d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{mt:3,children:"Remote Jupyter Server"}),(0,n.jsxs)(g.Z,{children:[t.remote.serverSettings.baseUrl," -"," ",t.remote.serverSettings.wsUrl]}),(0,n.jsxs)(g.Z,{mt:3,children:[(0,n.jsx)(g.Z,{children:"Remote Kernels [ id | name | last_activity | execution_state | connections ]"}),d.map((e=>(0,n.jsx)(g.Z,{children:(0,n.jsxs)(g.Z,{children:[e.id," | ",e.name," | ",e.last_activity," |"," ",e.execution_state," | ",e.connections,(0,n.jsx)($.Z,{sx:{marginLeft:1},href:"",onClick:s=>{var n;s.preventDefault(),n=e.id,t.remote?.kernels.shutdown(n).then((()=>{i(`Kernel ${n} is terminated.`,{variant:"info"}),console.log(`Kernel ${n} is terminated.`),x()}))},children:"delete"})]})},e.id)))]}),(0,n.jsxs)(g.Z,{mt:3,children:[(0,n.jsx)(g.Z,{children:"Remote Sessions [ id | name | path | type | kernel_id | kernel_name ]"}),p?.map((e=>(0,n.jsx)(g.Z,{children:(0,n.jsxs)(g.Z,{children:[e.id," | ",e.name," | ",e.path," |"," ",e.type," | ",e.kernel?.id," |"," ",e.kernel?.name,(0,n.jsx)($.Z,{href:"",sx:{marginLeft:1},onClick:s=>{var n;s.preventDefault(),n=e.id,t.remote?.sessions.shutdown(n).then((()=>{i(`Session ${n} is terminated.`,{variant:"info"}),console.log(`Session ${n} is terminated.`),x()}))},children:"delete"})]})},e.id)))]})]}),(0,n.jsxs)(g.Z,{mt:3,mb:3,display:"flex",children:[(0,n.jsx)(g.Z,{children:(0,n.jsx)(Re.z,{onClick:e=>{e.preventDefault(),s("default")},children:"Create Jupyter Server"})}),(0,n.jsx)(g.Z,{ml:3,children:(0,n.jsx)(Re.z,{onClick:e=>{e.preventDefault(),r("default")},children:"Delete Jupyter Server"})})]}),f&&(0,n.jsx)(Pe,{boxPanel:f})]})},Ne=()=>(0,n.jsx)(g.Z,{children:(0,n.jsx)("iframe",{src:"https://jupyter-kernels.datalayer.tech",style:{width:"100%",height:"1000px",border:0}})}),Le=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Environments"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(g.Z,{children:"This feature is being developed."}),(0,n.jsxs)(g.Z,{mt:3,children:["Follow progress on"," ",(0,n.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(Ee,{size:200})})]})}),Te=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Kernels"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(g.Z,{children:"This feature is being developed."}),(0,n.jsxs)(g.Z,{mt:3,children:["Follow progress on"," ",(0,n.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(Ee,{size:200})})]})}),Oe=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Pools"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(g.Z,{children:"This feature is being developed."}),(0,n.jsxs)(g.Z,{mt:3,children:["Follow progress on"," ",(0,n.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(Ee,{size:200})})]})});var ze=s(4633),Ke=s(54915),Je=s(14757);const Ve=[{navigation:"Overview",icon:w.vJ3,href:"#overview"},{navigation:"Details",icon:w.Rg1,counter:3,href:"#projects"},{navigation:"Cards",icon:w.H0r,counter:"12",href:"#repositories"},{navigation:"Stars",icon:w.r7p,counter:"3",href:"#stars"},{navigation:"Activity",icon:w.sOM,counter:67,href:"#activity"}],Ae=()=>{const{user:e}=(0,i.useStore)(),[t,s]=(0,c.useState)(0);return(0,n.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"row",gap:3,alignItems:"flex-start"},children:[(0,n.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%"},children:[(0,n.jsx)(ze.Z,{size:256,src:"https://avatars.githubusercontent.com/u/5007189?s=200&v=4",alt:"avatar"}),(0,n.jsxs)(g.Z,{children:[(0,n.jsxs)(g.Z,{sx:{paddingY:3},children:[(0,n.jsx)(Ke.Z,{as:"h1",sx:{fontSize:24},children:e?.displayName}),(0,n.jsx)(Ke.Z,{as:"h1",sx:{fontSize:20,fontWeight:300},children:e?.handle})]}),(0,n.jsx)(g.Z,{sx:{display:"flex",flexDirection:"column",color:"fg.onEmphasis"},children:(0,n.jsx)(Re.z,{block:!0,children:"Edit Profile"})})]})]}),(0,n.jsxs)(g.Z,{sx:{flexGrow:1},children:[(0,n.jsx)(Je.J,{"aria-label":"Repository",children:Ve.map(((e,r)=>(0,n.jsx)(Je.J.Item,{icon:e.icon,"aria-current":r===t?"page":void 0,onSelect:e=>{e.preventDefault(),s(r)},counter:e.counter,href:e.href,children:e.navigation},e.navigation)))}),(0,n.jsx)(g.Z,{sx:{border:"1px solid",marginTop:2,borderColor:"border.default",borderRadius:"12px",height:"300px",width:"80%",padding:4},children:(0,n.jsx)(U.Z,{children:" "})})]})]})},We=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{children:(0,n.jsx)(q.m,{children:(0,n.jsx)(q.m.TitleArea,{variant:"large",children:(0,n.jsx)(q.m.Title,{children:"Profile"})})})}),(0,n.jsx)(Ae,{})]}),Be=()=>{const{createJupyterServer:e,deleteJupyterServer:t}=K();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Servers"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(g.Z,{children:"This feature is being developed."}),(0,n.jsxs)(g.Z,{mt:3,children:["Follow progress on"," ",(0,n.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(Ee,{size:200})}),(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(Re.z,{onClick:t=>{t.preventDefault(),e("test1")},children:"Create Jupyter Server"}),(0,n.jsx)(Re.z,{onClick:e=>{e.preventDefault(),t("test1")},children:"Delete Jupyter Server"})]})]})})},$e=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Settings"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(g.Z,{children:"This feature is being developed."}),(0,n.jsxs)(g.Z,{mt:3,children:["Follow progress on"," ",(0,n.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(Ee,{size:200})})]})}),Ue=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(q.m,{children:(0,n.jsxs)(q.m.TitleArea,{variant:"large",children:[(0,n.jsx)(q.m.Title,{children:"Usage"}),(0,n.jsx)(q.m.Description,{children:"PREVIEW"})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(g.Z,{children:"This feature is being developed."}),(0,n.jsxs)(g.Z,{mt:3,children:["Follow progress on"," ",(0,n.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(Ee,{size:200})})]})}),He=()=>{const{jupyterLabAdapter:e,setJupyterLabAdapter:t,setServiceManager:p}=(0,L.Z)(),{user:g,setAuth:m}=(0,i.useStore)(),{createJupyterServer:f}=z(),{me:_}=(0,i.useApi)(),[x,y]=(0,c.useState)(),[v,w]=(0,c.useState)(null),[j,k]=(0,c.useState)("");return(0,c.useEffect)((()=>{const e=(0,i.getStoredUser)(),t=(0,i.getStoredToken)();e&&t&&(m(e,t),_(t))}),[]),(0,c.useEffect)((()=>{g?f(u.au).then((e=>{if(e.success){const t=e["jupyter-server"]??void 0;y(t)}else y(void 0)})).catch((e=>{y(void 0),console.error(`Failed to request the operator for service ${u.au}`,e)})):y(void 0)}),[g?.handle]),(0,c.useEffect)((()=>{if(!e&&g?.handle&&x){const e=e=>{t(e)},i=(0,n.jsx)(r.JupyterLabApp,{extensionPromises:(!1,{extensionPromises:[s.e(2800).then(s.t.bind(s,12800,23)),s.e(6640).then(s.t.bind(s,6640,23)).then((e=>e.default.filter((({id:e})=>!e.endsWith(":sessionDialogs"))))),s.e(5635).then(s.t.bind(s,15635,23)),s.e(1587).then(s.t.bind(s,61587,23)),s.e(7625).then(s.t.bind(s,27625,23)),s.e(6427).then(s.t.bind(s,26427,23)),s.e(3599).then(s.t.bind(s,13599,23)).then((e=>e.default.filter((({id:e})=>!e.endsWith(":manager"))))),s.e(1019).then(s.t.bind(s,91019,23)),s.e(7806).then(s.t.bind(s,17806,23)).then((e=>e.default)),s.e(7737).then(s.t.bind(s,57737,23)),s.e(1254).then(s.t.bind(s,51254,23)),s.e(8802).then(s.t.bind(s,58802,23)),s.e(7176).then(s.t.bind(s,77176,23)).then((e=>e.default.filter((({id:e})=>!e.includes(":language-server"))))),s.e(9845).then(s.t.bind(s,59845,23)),s.e(9448).then(s.t.bind(s,79448,23)).then((e=>e.default.filter((({id:e})=>!(e.includes(":language-server")||e.endsWith(":update-raw-mimetype")))))),s.e(5547).then(s.t.bind(s,5547,23)),s.e(3619).then(s.t.bind(s,33619,23)),s.e(1841).then(s.t.bind(s,31841,23)),s.e(2040).then(s.t.bind(s,52040,23)),s.e(6521).then(s.t.bind(s,46521,23)),s.e(4721).then(s.t.bind(s,44721,23))]}).extensionPromises,extensions:[o,a,l],headless:!0,disabledExtensions:[],onJupyterLab:e});w(i)}else w(null)}),[g?.handle,x]),(0,c.useEffect)((()=>{if(e&&g?.handle&&x?.token){const r=e.jupyterLab.serviceManager,i=(t=g.handle,s=u.au,n=x.token,((e,t,s)=>d.ServerConnection.makeSettings({baseUrl:e,wsUrl:t,token:s,appendToken:!0,init:{mode:"cors",credentials:"include",cache:"no-cache"}}))(`${u.dp}/jupyter/server/${t}/${s}`,`${u.uu}/jupyter/server/${t}/${s}`,n));r.remote=(e=>new d.ServiceManager({serverSettings:e}))(i),p(r)}var t,s,n}),[e,g?.handle,x?.token]),(0,n.jsx)(n.Fragment,{children:g?(0,n.jsxs)(r.Jupyter,{startDefaultKernel:!1,disableCssLoading:!0,collaborative:!0,children:[(0,n.jsxs)(h.Routes,{children:[(0,n.jsx)(h.Route,{path:"/",element:(0,n.jsx)(N,{content:(0,n.jsx)(ye,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels",element:(0,n.jsx)(N,{content:(0,n.jsx)(ye,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/debug",element:(0,n.jsx)(N,{content:(0,n.jsx)(Ie,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/kernels",element:(0,n.jsx)(N,{content:(0,n.jsx)(Te,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/pools",element:(0,n.jsx)(N,{content:(0,n.jsx)(Oe,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/environments",element:(0,n.jsx)(N,{content:(0,n.jsx)(Le,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/content",element:(0,n.jsx)(N,{content:(0,n.jsx)(Ze,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/servers",element:(0,n.jsx)(N,{content:(0,n.jsx)(Be,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/usage",element:(0,n.jsx)(N,{content:(0,n.jsx)(Ue,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/billing",element:(0,n.jsx)(N,{content:(0,n.jsx)(De,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/settings",element:(0,n.jsx)(N,{content:(0,n.jsx)($e,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/profile",element:(0,n.jsx)(N,{content:(0,n.jsx)(We,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/docs",element:(0,n.jsx)(N,{content:(0,n.jsx)(Ne,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/logout",element:(0,n.jsx)(N,{content:(0,n.jsx)(i.Logout,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/about",element:(0,n.jsx)(N,{content:(0,n.jsx)(Me,{version:j})})})]}),v]}):(0,n.jsxs)(h.Routes,{children:[(0,n.jsx)(h.Route,{path:"/",element:(0,n.jsx)(A,{content:(0,n.jsx)(be,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels",element:(0,n.jsx)(A,{content:(0,n.jsx)(be,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/login",element:(0,n.jsx)(A,{content:(0,n.jsx)(i.LoginForm,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/join",element:(0,n.jsx)(A,{content:(0,n.jsx)(i.JoinForm,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/join/confirm",element:(0,n.jsx)(A,{content:(0,n.jsx)(i.JoinConfirm,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/join/welcome",element:(0,n.jsx)(A,{content:(0,n.jsx)(i.JoinWelcome,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/password",element:(0,n.jsx)(A,{content:(0,n.jsx)(i.NewPasswordForm,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/password/confirm",element:(0,n.jsx)(A,{content:(0,n.jsx)(i.NewPasswordConfirm,{})})}),(0,n.jsx)(h.Route,{path:"/jupyter/kernels/password/welcome",element:(0,n.jsx)(A,{content:(0,n.jsx)(i.NewPasswordWelcome,{})})})]})})},qe=He},14479:(e,t,s)=>{s.d(t,{PV:()=>i,ml:()=>a});const n={operatorServer:s(84803).Gd},r=e=>{n.operatorServer=e},i=()=>n.operatorServer,a=()=>{let e=Object.create({});const t=document.getElementById("datalayer-config-data");return t&&(e=JSON.parse(t.textContent||""),e.operatorServer&&r(e.operatorServer)),e}},69252:(e,t,s)=>{s.d(t,{v:()=>i});var n=s(1865),r=s(66274);async function i(e="",t={}){const s=r.ServerConnection.makeSettings(),i=n.URLExt.join(s.baseUrl,"jupyter_kernels",e);let a;try{a=await r.ServerConnection.makeRequest(i,t,s)}catch(e){throw new r.ServerConnection.NetworkError(e)}let o=await a.text();if(o.length>0)try{o=JSON.parse(o)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new r.ServerConnection.ResponseError(a,o.message||o);return o}},54633:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Fe});const n=new(s(1339).zZ)({name:"@datalayer/icons:circle-white",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72" fill="currentColor" aria-hidden="true">\n  <circle cx="36" cy="36" r="28" fill="#fff"/>\n  <circle cx="36" cy="36" r="28" fill="none" stroke="#000" stroke-linejoin="round" stroke-width="2"/>\n</svg>\n'});var r,i=s(56653),a=s(96129),o=s(91295),l=s(8826),c=s(67370),h=s(62086),d=s(1865),u=s(66274),p=s(40158),g=s(41074),m=s(45683),f=s(77177),_=s(68827),x=s(19767),y=s(97930),v=s(87717),w=s(76797),j=s(74901),k=s(24608),b=s.n(k),S=s(38332),C=s(74512),M=s(96697),F=s(59689),E=s(32126),D=s(62005),Z=s(2470),R=s(76602),P=s(18310),I=s(52746),N=s(16419),L=s(28312);class T{constructor(e,t){this.translator=e.translator||h.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._path=e.path??y.UUID.uuid4(),this._type=e.type??"",this._name=e.name??"",this._setBusy=e.setBusy,this._kernelPreference=e.kernelPreference??{},this._serviceManager=t}get session(){return this._session??null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){if(!y.JSONExt.deepEqual(e,this._kernelPreference)){const t=this._kernelPreference;this._kernelPreference=e,this._preferenceChanged.emit({name:"kernelPreference",oldValue:t,newValue:y.JSONExt.deepCopy(e)})}}get kernelPreferenceChanged(){return this._preferenceChanged}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get kernelManager(){switch(this._location){case"browser":return this._serviceManager.browser.kernels;case"remote":return this._serviceManager.remote.kernels;default:return this._serviceManager.local.kernels}}get sessionManager(){switch(this._location){case"browser":return this._serviceManager.browser.sessions;case"remote":return this._serviceManager.remote.sessions;default:return this._serviceManager.local.sessions}}get specsManager(){switch(this._location){case"browser":return this._serviceManager.browser.kernelspecs;case"remote":return this._serviceManager.remote.kernelspecs;default:return this._serviceManager.local.kernelspecs}}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){const e=this.session?.kernel;return this._pendingKernelName===this.noKernelName?this.noKernelName:this._pendingKernelName?this.specsManager.specs?.kernelspecs[this._pendingKernelName]?.display_name??this._pendingKernelName:e?this.specsManager.specs?.kernelspecs[e.name]?.display_name??e.name:this.noKernelName}get kernelDisplayStatus(){const e=this.session?.kernel;return this._isTerminating?"terminating":this._isRestarting?"restarting":this._pendingKernelName===this.noKernelName?"unknown":!e&&this._pendingKernelName?"initializing":e||this.isReady||!1===this.kernelPreference.canStart||!1===this.kernelPreference.shouldStart?("connected"===e?.connectionStatus?e?.status:e?.connectionStatus)??"unknown":"initializing"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._session&&(this.kernelPreference.shutdownOnDispose&&this.sessionManager.shutdown(this._session.id).catch((e=>{console.error(`Kernel not shut down ${e}`)})),this._session.dispose(),this._session=null),this._dialog&&this._dialog.dispose(),this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null),j.Signal.clearData(this))}async startKernel(){const e=this.kernelPreference;if(!e.autoStartDefault&&!1===e.shouldStart)return!0;let t;if(e.id)t={id:e.id};else{const s=r.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:e});s&&(t={name:s})}if(t)try{return await this._changeKernel(t),!1}catch(e){}return!0}async restartKernel(){const e=this.session?.kernel||null;if(!this._isRestarting){this._isRestarting=!0,this._isReady=!1,this._statusChanged.emit("restarting");try{await(this.session?.kernel?.restart()),this._isReady=!0}catch(e){console.error(e)}this._isRestarting=!1,this._statusChanged.emit(this.session?.kernel?.status||"unknown"),this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:this.session?.kernel||null})}}async changeKernel(e={}){if(this.isDisposed)throw new Error("Disposed");return await this._initStarted.promise,this._changeKernel(e)}async shutdown(){if(!this.isDisposed&&this._initializing)return await this._initStarted.promise,this._pendingSessionRequest="",this._pendingKernelName=this.noKernelName,this._shutdownSession()}async initialize(){if(this._initializing)return this._initPromise.promise;this._initializing=!0;const e=await this._initialize();return e||(this._isReady=!0,this._ready.resolve(void 0)),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._initPromise.resolve(e),e}async _initialize(){const e=this.sessionManager;await e.ready,await e.refreshRunning();const t=(0,M.find)(e.running(),(e=>e.path===this._path));if(t)try{const s=e.connectTo({model:t});this._handleNewSession(s)}catch(e){return this._handleSessionError(e),Promise.reject(e)}return await this._startIfNecessary()}async _shutdownSession(){const e=this._session,t=this._isTerminating,s=this._isReady;this._isTerminating=!0,this._isReady=!1,this._statusChanged.emit("terminating");try{await(e?.shutdown()),this._isTerminating=!1,e?.dispose(),this._session=null;const t=e?.kernel||null;this._statusChanged.emit("unknown"),this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:null}),this._sessionChanged.emit({name:"session",oldValue:e,newValue:null})}catch(n){this._isTerminating=t,this._isReady=s;const r=e?.kernel?.status;throw void 0===r?this._statusChanged.emit("unknown"):this._statusChanged.emit(r),n}}async _startIfNecessary(){const e=this.kernelPreference;return!this.isDisposed&&!this.session?.kernel&&!1!==e.shouldStart&&!1!==e.canStart&&this.startKernel()}async _changeKernel(e={}){let t;switch(e.name?.split("-",1)[0]){case"browser":t="browser";break;case"remote":t="remote";break;default:t="local"}if(this._location=t,"local"!==this._location&&(e.name=e.name.replace(/^(remote-|browser-)/,""),await this.kernelManager.refreshRunning(),Array.from(this.kernelManager.running()).forEach((t=>{t.name===e.name&&(e.id=t.id)}))),e.name&&(this._pendingKernelName=e.name),this._session||this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null}),this._pendingSessionRequest||this._initStarted.resolve(void 0),"remote"!==this._location&&this._session&&!this._isTerminating)try{return console.log("--- Reusing session and changing the kernel with a model",this._session,e),await this._session.changeKernel(e),this._session.kernel}catch(e){throw this._handleSessionError(e),e}const s=d.PathExt.dirname(this._path),n=this._pendingSessionRequest=d.PathExt.join(s,y.UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:n,type:this._type,name:this._name,kernel:e});return this._pendingSessionRequest!==t.path?(await t.shutdown(),t.dispose(),null):(await t.setPath(this._path),await t.setName(this._name),this._session&&!this._isTerminating&&await this._shutdownSession(),this._handleNewSession(t))}catch(e){throw this._handleSessionError(e),e}}_handleNewSession(e){if(this.isDisposed)throw Error("Disposed");return this._isReady||(this._isReady=!0,this._ready.resolve(void 0)),this._session&&this._session.dispose(),this._session=e,this._pendingKernelName="",e&&(this._prevKernelName=e.kernel?.name??"",e.disposed.connect(this._onSessionDisposed,this),e.propertyChanged.connect(this._onPropertyChanged,this),e.kernelChanged.connect(this._onKernelChanged,this),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this),e.pendingInput.connect(this._onPendingInput,this),e.iopubMessage.connect(this._onIopubMessage,this),e.unhandledMessage.connect(this._onUnhandledMessage,this),e.path!==this._path&&this._onPropertyChanged(e,"path"),e.name!==this._name&&this._onPropertyChanged(e,"name"),e.type!==this._type&&this._onPropertyChanged(e,"type")),this._sessionChanged.emit({name:"session",oldValue:null,newValue:e}),this._kernelChanged.emit({oldValue:null,newValue:e?.kernel||null,name:"kernel"}),this._statusChanged.emit(e?.kernel?.status||"unknown"),e?.kernel||null}async _handleSessionError(e){this._handleNewSession(null);let t="",s="";try{t=e.traceback,s=e.message}catch(e){}await this._displayKernelError(s,t)}async _displayKernelError(e,t){const s=(0,C.jsxs)("div",{children:[e&&(0,C.jsx)("pre",{children:e}),t&&(0,C.jsx)("details",{className:"jp-mod-wide",children:(0,C.jsx)("pre",{children:t})})]}),n=this._dialog=new a.Dialog({title:this._trans.__("Error Starting Kernel"),body:s,buttons:[a.Dialog.okButton()]});await n.launch(),this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){if("dead"===t){const t=e.kernel?.model;if(t?.reason){const e=t.traceback||"";this._displayKernelError(t.reason,e)}}this._setBusy&&("busy"===t?this._busyDisposable||(this._busyDisposable=this._setBusy()):this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null)),this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){"shutdown_reply"===t.header.msg_type&&this.session.kernel.removeInputGuard(),this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}_path="";_name="";_type="";_prevKernelName="";_kernelPreference;_isDisposed=!1;_location="local";_disposed=new j.Signal(this);_session=null;_ready=new y.PromiseDelegate;_initializing=!1;_initStarted=new y.PromiseDelegate;_initPromise=new y.PromiseDelegate;_isReady=!1;_isTerminating=!1;_isRestarting=!1;_kernelChanged=new j.Signal(this);_preferenceChanged=new j.Signal(this);_sessionChanged=new j.Signal(this);_statusChanged=new j.Signal(this);_connectionStatusChanged=new j.Signal(this);translator;_trans;_pendingInput=!1;_iopubMessage=new j.Signal(this);_unhandledMessage=new j.Signal(this);_propertyChanged=new j.Signal(this);_dialog=null;_setBusy;_busyDisposable=null;_serviceManager;_pendingKernelName="";_pendingSessionRequest=""}!function(e){e.getDefaultKernel=function(e){const{preference:t}=e,{shouldStart:s}=t;return!1===s?null:r.getDefaultKernel(e)}}(T||(T={}));class O{constructor(e={},t){this._translator=e.translator??h.nullTranslator,this._multiServiceManager=t}async selectKernel(e){if(e.isDisposed)return Promise.resolve();const t=this._translator.load("jupyterlab");let s=t.__("Cancel");e.hasNoKernel&&(s=e.kernelDisplayName);const n=[a.Dialog.cancelButton({label:s}),a.Dialog.okButton({label:t.__("Select"),ariaLabel:t.__("Select Kernel")})],i=e.kernelPreference.autoStartDefault,o="boolean"==typeof i,l=new a.Dialog({title:t.__("Select Kernel"),body:new r.KernelSwitcher(e,this._multiServiceManager,this._translator),buttons:n,checkbox:o?{label:t.__("Always start the preferred kernel"),caption:t.__("Remember my choice and always start the preferred kernel"),checked:i}:null}),c=await l.launch();if(e.isDisposed||!c.button.accept)return;o&&null!==c.isChecked&&(e.kernelPreference={...e.kernelPreference,autoStartDefault:c.isChecked});const{kernel:h,variables:d}=await(c.value??Promise.resolve({kernel:null,variables:""}));if(null===h&&!e.hasNoKernel)return e.shutdown();if(h){const t=await e.changeKernel(h);if(t){const s=new L.KernelExecutor(t);await s.execute('\nimport os\nimport pathlib\n_local_content_mount_point = pathlib.Path(pathlib.Path.home() / "content/local")\n_local_content_mount_point.mkdir(parents=True, exist_ok=True)\nos.chdir(_local_content_mount_point)\nprint(os.getcwd())\n').executor.result,d&&await r.execute(e,function(e){return`\ndef _load_variables():\n    from base64 import decodebytes\n    import json\n    import pickle\n    _data = json.loads(${e})\n    for _n, _v in _data.items():\n        try:\n            dump = decodebytes(_v.encode("ascii"))\n            globals()[_n] = pickle.loads(dump)\n        except:\n            ...\n    return "done"\n\n_load_variables()\n`}(d))}}}async restart(e){const t=this._translator.load("jupyterlab");if(await e.initialize(),e.isDisposed)throw new Error("session already disposed");const s=e.session?.kernel;if(!s&&e.prevKernelName)return await e.changeKernel({name:e.prevKernelName}),!0;if(!s)throw new Error("No kernel to restart");const n=a.Dialog.warnButton({label:t.__("Restart"),ariaLabel:t.__("Confirm Kernel Restart")}),r=await(0,a.showDialog)({title:t.__("Restart Kernel?"),body:t.__("Do you want to restart the kernel of %1? All variables will be lost.",e.name),buttons:[a.Dialog.cancelButton({ariaLabel:t.__("Cancel Kernel Restart")}),n]});return!s.isDisposed&&!!r.button.accept&&(await e.restartKernel(),!0)}_translator;_multiServiceManager}!function(e){class t extends p.ReactWidget{sessionContext;multiServiceManager;translator;trans;_options;_displayedSelection;_selection=null;_selectionLocation;_selectionType="name";_canTransferFrom=!1;_canTransferTo=!1;_transferVariables=!1;_hasLoadedVariables=!1;_kernelVariables;constructor(e,t,n){super(),this.sessionContext=e,this.multiServiceManager=t,this.translator=n,this.addClass("dla-kernel-switcher"),this.trans=(n??h.nullTranslator).load("jupyterlab");const r=function(e,t){return{specs:t.local.kernelspecs.specs,sessions:t.local.sessions.running(),preference:e.kernelPreference}}(this.sessionContext,this.multiServiceManager);this._options=s(r,this.multiServiceManager,this.translator),this._displayedSelection=this.trans.__("No Kernel"),this._selectionType="name";const i=this.sessionContext.specsManager.specs?.kernelspecs;if(this.sessionContext.session?.kernel?.name&&i){const e=Object.values(i).find((e=>e?.name===this.sessionContext.session.kernel.name));e&&(this._canTransferFrom="python"===e.language)}if(this.sessionContext.kernelPreference.shouldStart){const e=Object.values(this._options??{}).reduce(((e,t)=>e.concat(t)),[]).find((e=>e.displayName===this.sessionContext.kernelDisplayName));!this.sessionContext.hasNoKernel&&e?this.setSelection(e):this._selection=null}else this._selection=null}render(){const e=[{header:"Name",field:"name",rowHeader:!0},{header:"Type",field:"type"}];return(0,C.jsx)(F.ZP,{theme:L.jupyterTheme,children:(0,C.jsxs)(E.Z,{children:[(0,C.jsx)(D.Z,{children:this.trans.__("Select kernel for: %1",this.sessionContext.name)}),(0,C.jsxs)(Z.P,{children:[(0,C.jsxs)(Z.P.Button,{variant:"default",disabled:null===this._options,children:[(0,C.jsx)(D.Z,{fontWeight:"bold",children:this.trans.__("Kernel:")})," "+this._displayedSelection]}),(0,C.jsx)(Z.P.Overlay,{overflow:"auto",maxHeight:"large",width:"auto",children:(0,C.jsxs)(R.S,{selectionVariant:"single",children:[(0,C.jsx)(R.S.Item,{selected:null===this._selection,onSelect:()=>{this.setSelection(null)},children:this.trans.__("No Kernel")},"null"),Object.entries(this._options??{}).map((([e,t])=>(0,C.jsx)(R.S.Group,{title:e,children:t.map((e=>(0,C.jsx)(R.S.Item,{selected:(e.id??e.name)===this._selection,onSelect:()=>{this.setSelection(e)},children:e.displayName},e.name)))},e)))]})})]}),this._canTransferFrom&&this._canTransferTo&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(D.Z,{id:"kernel-toggle-variables",fontWeight:"bold",children:this.trans.__("Transfer variables")}),(0,C.jsx)(P.Z,{checked:this._transferVariables,onClick:()=>{this.setTransferVariable(!this._transferVariables)},"aria-labelledby":"kernel-toggle-variables"}),this._transferVariables&&(0,C.jsxs)(I.i.Container,{children:[(0,C.jsx)(I.i.Title,{as:"h2",id:"dla-kernel-variables",children:"Kernel variables"}),(0,C.jsx)(I.i.Subtitle,{as:"p",id:"dla-kernel-variables-subtitle",children:"The list of transferable kernel variables."}),this._kernelVariables?(0,C.jsx)(N.w,{"aria-labelledby":"dla-kernel-variables","aria-describedby":"dla-kernel-variables-subtitle",data:Object.entries(this._kernelVariables??{}).map((([e,t],s)=>({id:s,name:e,type:t}))),columns:e}):(0,C.jsx)(I.i.Skeleton,{"aria-labelledby":"dla-kernel-variables","aria-describedby":"dla-kernel-variables-subtitle",columns:e,rows:5})]})]})]})})}async getValue(){return{kernel:this._selection?{[this._selectionType]:this._selection}:null,targetLocation:this._selectionLocation,variables:await this.getKernelVariables()}}async listKernelVariables(){if(this._hasLoadedVariables)return Promise.resolve();this._hasLoadedVariables=!0;const e=await n(this.sessionContext,"\ndef _list_variables():\n    import json\n    from types import ModuleType, FunctionType, MethodType, TracebackType\n\n    _FORBIDDEN_TYPES = [type, ModuleType, FunctionType, MethodType, TracebackType]\n    try:\n        from IPython.core.autocall import ExitAutocall\n        _FORBIDDEN_TYPES.append(ExitAutocall)\n    except ImportError:\n        pass\n    _exclude = tuple(_FORBIDDEN_TYPES)\n\n    _all = frozenset(globals())\n    _vars = {}\n    for _n in _all:\n        _v = globals()[_n]\n        \n        if not (\n            _n.startswith('_') or\n            isinstance(_v, _exclude) or\n            # Special IPython variables\n            (_n == 'In' and isinstance(_v, list)) or\n            (_n == 'Out' and isinstance(_v, dict))\n        ):\n            _vars[_n] = type(_v).__qualname__\n\n    return json.dumps(_vars)\n\n_list_variables()");this._kernelVariables=e?JSON.parse(e.slice(1,e.length-1)):{},this.update()}async getKernelVariables(){return Object.keys(this._kernelVariables??{}).length?n(this.sessionContext,`\ndef _pickle_variables():\n    from base64 import encodebytes\n    import json\n    import pickle\n    _names = {${Object.keys(this._kernelVariables).map((e=>`"${e}"`)).join(",")}}\n    _data = {}\n    for _n in _names:\n        try:\n            _v = globals()[_n]\n            dump = pickle.dumps(_v)\n            _data[_n] = encodebytes(dump).decode("ascii")\n        except:\n            ...\n\n    return json.dumps(_data)\n\n_pickle_variables()\n`):""}setTransferVariable(e){this._transferVariables!==e&&(this._transferVariables=e,this._transferVariables&&this.listKernelVariables().catch((e=>{this._hasLoadedVariables=!1,console.error("Failed to list the kernel variable",e)})),this.update())}setSelection(e){null!==e?this._displayedSelection!==e.displayName&&(this._selectionLocation=e.location,e.id?(this._selectionType="id",this._selection=e.id):(this._selectionType="name",this._selection=["browser","remote"].includes(e.location)?`${e.location}-${e.name}`:e.name),this._displayedSelection=e.displayName,this._canTransferTo="python"===e.language,this.update()):null!==this._selection&&(this._selection=null,this._displayedSelection=this.trans.__("No Kernel"),this._canTransferTo=!1,this.update())}}function s(e,t,s){const{preference:n,sessions:r,specs:i}=e,{id:a,canStart:o}=n,l=(s=s??h.nullTranslator).load("jupyterlab");if(!i||!1===o)return null;const c={},u=Object.values(i.kernelspecs).filter((e=>!!e)).map((e=>({name:e.name,language:e.language,displayName:e.display_name,location:"local"})));u.length&&(c[l.__("Local")]=u);const p=Object.values(t.remote?.kernelspecs.specs?.kernelspecs??{}).filter((e=>!!e)).map((e=>({name:e.name,language:e.language,displayName:e.display_name,location:"remote"})));p.length&&(c[l.__("Remote")]=p);const g=Object.values(t.browser?.kernelspecs.specs?.kernelspecs??{}).filter((e=>!!e)).map((e=>({name:e.name,language:e.language,displayName:e.display_name,location:"browser"})));if(g.length&&(c[l.__("Browser")]=g),!r||!i.kernelspecs)return c;const m=Array.from(r).filter((e=>e.kernel&&e.kernel.id!==a)).map((e=>{const t=i.kernelspecs[e.kernel.name];return{id:e.kernel.id,name:t.name,language:t.language,displayName:e.name||d.PathExt.basename(e.path),location:"local"}}));return m.length&&(c.Session=m),c}async function n(e,t){let s=null;const n=e.session?.kernel?.requestExecute({code:t,allow_stdin:!1,stop_on_error:!1,store_history:!1});if(n){n.registerMessageHook((e=>{if(e.parent_header.msg_id!==n.msg.header.msg_id)return!0;if("execute_result"===e.header.msg_type){try{s=e.content.data["text/plain"]}catch(e){console.error("Failed to parse the kernel reply for listing variables.",e)}return!1}return!0}));const e=await n.done;if(e&&"execute_reply"===e.header.msg_type&&"ok"!==e.content.status){const{ename:t,evalue:s,traceback:n}=e.content;return Promise.reject(`${t}: ${s}\n${(n??[]).join("\n")}`)}}return null===s?Promise.reject("Unable to get the kernel execute request result"):s}e.KernelSwitcher=t,e.getDefaultKernel=function(e){const{specs:t,preference:s}=e,{name:n,language:r,canStart:i,autoStartDefault:a}=s;if(!t||!1===i)return null;const o=a?t.default:null;if(!n&&!r)return o;for(const e in t.kernelspecs)if(e===n)return n;if(!r)return o;const l=[];for(const e in t.kernelspecs){const s=t.kernelspecs[e]?.language;r===s&&l.push(e)}if(1===l.length){const e=l[0];return console.warn("No exact match found for "+e+", using kernel "+e+" that matches language="+r),e}return o},e.getKernelOptions=s,e.execute=n}(r||(r={}));const z=new y.Token("@datalayer/jupyter-kernels:multi-service-manager"),K=new y.Token("@datalayer/jupyter-kernels:browser-router"),J=new y.Token("@datalayer/jupyter-kernels:plugin");var V;!function(e){e.createConsole="@datalayer/jupyter-kernels:new-browser-console",e.createNotebook="@datalayer/jupyter-kernels:new-browser-notebook"}(V||(V={}));const A={id:"@datalayer/jupyter-kernels:browser-localforage",autoStart:!0,provides:f.ILocalForage,activate:e=>({localforage:b()})},W={id:"@datalayer/jupyter-kernels:browser-localforage-memory-storage",autoStart:!0,requires:[f.ILocalForage],activate:async(e,t)=>{JSON.parse(d.PageConfig.getOption("enableMemoryStorage")||"false")&&(console.warn("Memory storage fallback enabled: contents and settings may not be saved"),await(0,f.ensureMemoryStorage)(t.localforage))}},B={id:"@datalayer/jupyter-kernels:browser-contents",requires:[f.ILocalForage],autoStart:!0,provides:g.IContents,activate:(e,t)=>{const s=d.PageConfig.getOption("contentsStorageName"),n=JSON.parse(d.PageConfig.getOption("contentsStorageDrivers")||"null"),{localforage:r}=t,i=new g.Contents({storageName:s,storageDrivers:n,localforage:r});return e.started.then((()=>i.initialize().catch(console.warn))),i}},$={id:"@datalayer/jupyter-kernels:browser-contents-routes",autoStart:!0,requires:[K,g.IContents],activate:(e,t,s)=>{t.get("/api/contents/(.+)/checkpoints",(async(e,t)=>{const n=await s.listCheckpoints(t);return new Response(JSON.stringify(n))})),t.post("/api/contents/(.+)/checkpoints/(.*)",(async(e,t,n)=>{const r=await s.restoreCheckpoint(t,n);return new Response(JSON.stringify(r),{status:204})})),t.post("/api/contents/(.+)/checkpoints",(async(e,t)=>{const n=await s.createCheckpoint(t);return new Response(JSON.stringify(n),{status:201})})),t.delete("/api/contents/(.+)/checkpoints/(.*)",(async(e,t,n)=>{const r=await s.deleteCheckpoint(t,n);return new Response(JSON.stringify(r),{status:204})})),t.get("/api/contents(.*)",(async(e,t)=>{const n={content:"1"===e.query?.content},r=await s.get(t,n);return r?new Response(JSON.stringify(r)):new Response(null,{status:404})})),t.post("/api/contents(.*)",(async(e,t)=>{const n=e.body,r=n?.copy_from;let i;return i=r?await s.copy(r,t):await s.newUntitled(n),i?new Response(JSON.stringify(i),{status:201}):new Response(null,{status:400})})),t.patch("/api/contents(.*)",(async(e,t)=>{const n=e.body?.path??"";t="/"===t[0]?t.slice(1):t;const r=await s.rename(t,n);return new Response(JSON.stringify(r))})),t.put("/api/contents/(.+)",(async(e,t)=>{const n=e.body,r=await s.save(t,n);return new Response(JSON.stringify(r))})),t.delete("/api/contents/(.+)",(async(e,t)=>(await s.delete(t),new Response(null,{status:204}))))}};class U{constructor(e){const t=e?.workerUrl??d.URLExt.join(d.PageConfig.getBaseUrl(),_.WORKER_NAME);this.initialize(t).catch(console.warn)}get registrationChanged(){return this._registrationChanged}get enabled(){return null!==this._registration}get ready(){return this._ready.promise}async initialize(e){const{serviceWorker:t}=navigator;let s=null;if(t?t.controller&&(s=await t.getRegistration(t.controller.scriptURL)||null,console.info("JupyterLite ServiceWorker was already registered")):console.warn("ServiceWorkers not supported in this browser"),!s&&t)try{const n=await t.getRegistrations();await Promise.all(n.map((e=>e.unregister()))),console.info("Existing JupyterLite ServiceWorkers unregistered"),console.info("Registering new JupyterLite ServiceWorker",e),s=await t.register(e,{scope:d.PageConfig.getBaseUrl()}),console.info("JupyterLite ServiceWorker was successfully registered")}catch(e){console.warn(e),console.warn(`JupyterLite ServiceWorker registration unexpectedly failed: ${e}`)}this.setRegistration(s),s?this._ready.resolve(void 0):this._ready.reject(void 0)}setRegistration(e){this._registration=e,this._registrationChanged.emit(this._registration)}_registration=null;_registrationChanged=new j.Signal(this);_ready=new y.PromiseDelegate}const H={id:"@datalayer/jupyter-kernels:browser-service-worker",autoStart:!0,provides:_.IServiceWorkerManager,activate:e=>new U({workerUrl:d.URLExt.join(d.PageConfig.getBaseUrl(),"jupyter_kernels/service-worker",_.WORKER_NAME)})},q={id:"@datalayer/jupyter-kernels:emscripten-filesystem",autoStart:!0,requires:[z,K],optional:[_.IServiceWorkerManager],provides:g.IBroadcastChannelWrapper,activate:(e,t,s,n)=>{const{contents:r}=t.browser??{};if(!r)throw new Error("Unable to activate emscripten-filesystem plugin without the browser service manager.");const i=new g.BroadcastChannelWrapper({contents:r}),a="Kernel filesystem and JupyterLite contents";function o(e,t){t&&console.warn(t),e&&console.warn(e),t||e?console.warn(`${a} will NOT be synced`):console.info(`${a} will be synced`)}return n?n.ready.then((()=>{i.enable(),o()})).catch((e=>{o("JupyterLite ServiceWorker failed to become available",e)})):o("JupyterLite ServiceWorker not available"),i}},G={id:"@datalayer/jupyter-kernels:browser-kernels",autoStart:!0,provides:m.IKernels,requires:[m.IKernelSpecs],activate:(e,t)=>new m.Kernels({kernelspecs:t})},X={id:"@datalayer/jupyter-kernels:browser-kernels-routes",autoStart:!0,requires:[K,m.IKernels],activate:(e,t,s)=>{t.get("/api/kernels",(async e=>{const t=await s.list();return new Response(JSON.stringify(t))})),t.post("/api/kernels/(.*)/restart",(async(e,t)=>{const n=await s.restart(t);return new Response(JSON.stringify(n))})),t.delete("/api/kernels/(.*)",(async(e,t)=>{const n=await s.shutdown(t);return new Response(JSON.stringify(n),{status:204})}))}},Y={id:"@datalayer/jupyter-kernels:browser-kernelspec",autoStart:!0,provides:m.IKernelSpecs,optional:[h.ITranslator,l.ILauncher],activate:(e,t,s)=>{const n=new m.KernelSpecs,r=(t??h.nullTranslator).load("datalayer");if(s){let e=null,t=new v.DisposableSet;new w.Poll({factory:async()=>{const i=n.specs;y.JSONExt.deepEqual(e,i)||(t.dispose(),e=i,t=new v.DisposableSet,Object.values(e?.kernelspecs??{}).map((e=>{if(e){const n=e.resources["logo-svg"]||e.resources["logo-64x64"];t.add(s.add({command:V.createConsole,args:{isLauncher:!0,kernelName:`browser-${e.name}`},category:r.__("Console"),kernelIconUrl:n,metadata:{kernel:y.JSONExt.deepCopy(e.metadata||{})}})),t.add(s.add({command:V.createNotebook,args:{isLauncher:!0,kernelName:`browser-${e.name}`},category:r.__("Notebook"),kernelIconUrl:n,metadata:{kernel:y.JSONExt.deepCopy(e.metadata||{})}}))}})))}})}return n}},Q={id:"@datalayer/jupyter-kernels:browser-kernelspec-routes",autoStart:!0,requires:[K,m.IKernelSpecs],activate:(e,t,s)=>{t.get("/api/kernelspecs",(async e=>{const{specs:t}=s;if(!t)return new Response(null);const n={},r=t.kernelspecs;Object.keys(r).forEach((e=>{const t=r[e],{resources:s}=t??{};n[e]={name:e,spec:t,resources:s}}));const i={default:t.default,kernelspecs:n};return new Response(JSON.stringify(i))}))}},ee={id:"@datalayer/jupyter-kernels:browser-sessions",autoStart:!0,provides:x.ISessions,requires:[m.IKernels],activate:(e,t)=>new x.Sessions({kernels:t})},te={id:"@datalayer/jupyter-kernels:browser-sessions-routes",autoStart:!0,requires:[K,x.ISessions],activate:(e,t,s)=>{t.get("/api/sessions/(.+)",(async(e,t)=>{const n=await s.get(t);return new Response(JSON.stringify(n),{status:200})})),t.get("/api/sessions",(async e=>{const t=await s.list();return new Response(JSON.stringify(t),{status:200})})),t.patch("/api/sessions(.*)",(async(e,t)=>{const n=e.body,r=await s.patch(n);return new Response(JSON.stringify(r),{status:200})})),t.delete("/api/sessions/(.+)",(async(e,t)=>(await s.shutdown(t),new Response(null,{status:204})))),t.post("/api/sessions",(async e=>{const t=e.body,n=await s.startNew(t);return new Response(JSON.stringify(n),{status:201})}))}};class se{constructor(e){this._stream=new j.Stream(this),this._serverSettings=e.serverSettings}async emit(e){}dispose(){}get isDisposed(){return!0}get stream(){return this._stream}get serverSettings(){return this._serverSettings}_stream;_serverSettings}const ne=[B,$,{id:"@datalayer/jupyter-kernels:browser-manager",requires:[z],optional:[h.ITranslator,i.ILabStatus],provides:K,autoStart:!0,activate:(e,t,s,n)=>{const r=(s??h.nullTranslator).load("jupyterlab"),i=new _.Router,a={...u.ServerConnection.makeSettings(),WebSocket:S.WebSocket,fetch:async(e,t)=>{if(!(e instanceof Request))throw Error("Request info is not a Request");try{return i.route(e)}catch(s){if(s.message.startsWith("Cannot route"))return console.log(`No browser route for ${e.method} ${e.url}`),fetch(e,t);throw s}}},o=t.browser=new u.ServiceManager({standby:"never",serverSettings:a,events:new se({serverSettings:a})});let l=0;return e.commands.addCommand(V.createConsole,{label:e=>{const t=e.kernelName||"";if(e.isLauncher&&t&&o.kernelspecs){const e=t.startsWith("browser-")?t.slice(8):t;return o.kernelspecs.specs?.kernelspecs[e]?.display_name??e}return e.isPalette||e.isContextMenu?r.__("New Console"):r.__("Console")},caption:r.__("Create a new console"),icon:e=>e.isPalette?void 0:p.consoleIcon,execute:s=>{const i=l++;let a=s.path;return a||(a=d.PathExt.join(s.basePath||"",`console-browser-${i}-${y.UUID.uuid4()}`)),s.sessionContext=new T({sessionManager:t.sessions,specsManager:t.kernelspecs,path:t.contents.localPath(a),name:s.name||r.__("Console %1",i),type:"console",kernelPreference:s.kernelPreference,setBusy:n?()=>n.setBusy():void 0},t),e.commands.execute("console:create",s)}}),e.commands.addCommand(V.createNotebook,{label:e=>{const t=e.kernelName||"";if(e.isLauncher&&t&&o.kernelspecs){const e=t.startsWith("browser-")?t.slice(8):t;return o.kernelspecs.specs?.kernelspecs[e]?.display_name??e}return e.isPalette||e.isContextMenu?r.__("New Notebook"):r.__("Notebook")},caption:r.__("Create a new notebook"),icon:e=>e.isPalette?void 0:p.notebookIcon,execute:t=>e.commands.execute("notebook:create-new",t)}),i}},q,G,X,Y,Q,W,A,H,ee,te];var re,ie,ae=s(69252),oe=s(53004),le=s(34882),ce=s(2998);class he{constructor(e){const t=this._manager=e.manager;this.translator=e.translator||h.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._factory=e.factory,this._dialogs=e.sessionDialogs??new a.SessionContextDialogs({translator:e.translator}),this._opener=e.opener||re.noOp,this._path=this._manager.contents.normalize(e.path),this._lastModifiedCheckMargin=e.lastModifiedCheckMargin||500;const s=this._manager.contents.localPath(this._path),n=this._factory.preferredLanguage(d.PathExt.basename(s)),r=this._manager.contents.getSharedModelFactory(this._path),i=r?.createNew({path:s,format:this._factory.fileFormat,contentType:this._factory.contentType,collaborative:this._factory.collaborative});this._model=this._factory.createNew({languagePreference:n,sharedModel:i,collaborationEnabled:r?.collaborative??!1}),this._readyPromise=t.ready.then((()=>this._populatedPromise.promise));const o=d.PathExt.extname(this._path);this.sessionContext=new T({sessionManager:t.sessions,specsManager:t.kernelspecs,path:s,type:".ipynb"===o?"notebook":"file",name:d.PathExt.basename(s),kernelPreference:e.kernelPreference||{shouldStart:!1},setBusy:e.setBusy},t),this.sessionContext.propertyChanged.connect(this._onSessionChanged,this),t.contents.fileChanged.connect(this._onFileChanged,this),this.urlResolver=new ce.RenderMimeRegistry.UrlResolver({path:this._path,contents:t.contents})}get pathChanged(){return this._pathChanged}get fileChanged(){return this._fileChanged}get saveState(){return this._saveState}get disposed(){return this._disposed}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){this._lastModifiedCheckMargin=e}get model(){return this._model}sessionContext;get path(){return this._path}get localPath(){return this._manager.contents.localPath(this._path)}get contentsModel(){return this._contentsModel?{...this._contentsModel}:null}get factoryName(){return this.isDisposed?"":this._factory.name}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this.sessionContext.dispose(),this._model.dispose(),this._model.sharedModel.dispose(),this._disposed.emit(void 0),j.Signal.clearData(this))}get isReady(){return this._isReady}get ready(){return this._readyPromise}get canSave(){return!(!this._contentsModel?.writable||this._model.collaborative)}urlResolver;async initialize(e){e?await this._save():await this._revert(),this.model.sharedModel.clearUndoHistory()}rename(e){return this.ready.then((()=>this._manager.ready.then((()=>this._rename(e)))))}async save(){await this.ready,await this._save()}async saveAs(){await this.ready;const e=this._manager.contents.localPath(this.path),t=await re.getSavePath(e);if(this.isDisposed||!t)return;const s=this._manager.contents.driveName(this.path),n=""===s?t:`${s}:${t}`;if(n===this._path)return this.save();try{await this._manager.ready,await this._manager.contents.get(n),await this._maybeOverWrite(n)}catch(e){if(!e.response||404!==e.response.status)throw e;await this._finishSaveAs(n)}}async download(){const e=await this._manager.contents.getDownloadUrl(this._path),t=document.createElement("a");t.href=e,t.download="",document.body.appendChild(t),t.click(),document.body.removeChild(t)}async revert(){await this.ready,await this._revert()}createCheckpoint(){const e=this._manager.contents;return this._manager.ready.then((()=>e.createCheckpoint(this._path)))}deleteCheckpoint(e){const t=this._manager.contents;return this._manager.ready.then((()=>t.deleteCheckpoint(this._path,e)))}restoreCheckpoint(e){const t=this._manager.contents,s=this._path;return this._manager.ready.then((()=>e?t.restoreCheckpoint(s,e):this.listCheckpoints().then((n=>{if(!this.isDisposed&&n.length)return e=n[n.length-1].id,t.restoreCheckpoint(s,e)}))))}listCheckpoints(){const e=this._manager.contents;return this._manager.ready.then((()=>e.listCheckpoints(this._path)))}addSibling(e,t={}){const s=this._opener;return s&&s(e,t),new v.DisposableDelegate((()=>{e.close()}))}_onFileChanged(e,t){if("rename"!==t.type)return;let s=t.oldValue&&t.oldValue.path,n=t.newValue&&t.newValue.path;if(n&&0===this._path.indexOf(s||"")){let e=t.newValue;s!==this._path&&(n=this._path.replace(new RegExp(`^${s}/`),`${n}/`),s=this._path,e={last_modified:t.newValue?.created,path:n}),this._updateContentsModel({...this._contentsModel,...e}),this._updatePath(n)}}_onSessionChanged(e,t){if("path"!==t)return;const s=this._manager.contents.driveName(this.path);let n=this.sessionContext.session.path;s&&(n=`${s}:${n}`),this._updatePath(n)}_updateContentsModel(e){const t=e.writable&&!this._model.collaborative,s={path:e.path,name:e.name,type:e.type,writable:t,created:e.created,last_modified:e.last_modified,mimetype:e.mimetype,format:e.format},n=this._contentsModel?.last_modified??null;this._contentsModel=s,n&&s.last_modified===n||this._fileChanged.emit(s)}_updatePath(e){if(this._path===e)return;this._path=e;const t=this._manager.contents.localPath(e),s=d.PathExt.basename(t);if(this.sessionContext.session?.path!==t&&this.sessionContext.session?.setPath(t),this.sessionContext.session?.name!==s&&this.sessionContext.session?.setName(s),this.urlResolver.path!==e&&(this.urlResolver.path=e),this._contentsModel&&(this._contentsModel.path!==e||this._contentsModel.name!==s)){const t={...this._contentsModel,name:s,path:e};this._updateContentsModel(t)}this._pathChanged.emit(e)}async _populate(){if(this._isPopulated=!0,this._isReady=!0,this._populatedPromise.resolve(void 0),await this._maybeCheckpoint(!1),this.isDisposed)return;const e=this._model.defaultKernelName||this.sessionContext.kernelPreference.name;this.sessionContext.kernelPreference={...this.sessionContext.kernelPreference,name:e,language:this._model.defaultKernelLanguage},this.sessionContext.initialize().then((e=>{e&&this._dialogs.selectKernel(this.sessionContext)}))}async _rename(e){const t=this.localPath.split("/");t[t.length-1]=e;let s=d.PathExt.join(...t);const n=this._manager.contents.driveName(this.path);n&&(s=`${n}:${s}`),await this._manager.contents.rename(this.path,s)}async _save(){this._saveState.emit("started");const e=this._createSaveOptions();try{await this._manager.ready;const t=await this._maybeSave(e);if(this.isDisposed)return;this._model.dirty=!1,this._updateContentsModel(t),this._isPopulated||await this._populate(),this._saveState.emit("completed")}catch(e){const{name:t}=e;if("ModalCancelError"===t||"ModalDuplicateError"===t)throw e;const s=this._manager.contents.localPath(this._path),n=d.PathExt.basename(s);throw this._handleError(e,this._trans.__("File Save Error for %1",n)),this._saveState.emit("failed"),e}}_revert(e=!1){const t={type:this._factory.contentType,content:null!==this._factory.fileFormat,...null!==this._factory.fileFormat?{format:this._factory.fileFormat}:{}},s=this._path,n=this._model;return this._manager.ready.then((()=>this._manager.contents.get(s,t))).then((e=>{if(!this.isDisposed){if(e.content)if("json"===e.format)n.fromJSON(e.content);else{let t=e.content;-1!==t.indexOf("\r\n")?(this._lineEnding="\r\n",t=t.replace(/\r\n/g,"\n")):-1!==t.indexOf("\r")?(this._lineEnding="\r",t=t.replace(/\r/g,"\n")):this._lineEnding=null,n.fromString(t)}return this._updateContentsModel(e),n.dirty=!1,this._isPopulated?void 0:this._populate()}})).catch((async e=>{const t=this._manager.contents.localPath(this._path),s=d.PathExt.basename(t);throw this._handleError(e,this._trans.__("File Load Error for %1",s)),e}))}_maybeSave(e){const t=this._path;return this._manager.contents.get(t,{content:!1}).then((s=>{if(this.isDisposed)return Promise.reject(new Error("Disposed"));const n=this._lastModifiedCheckMargin,r=this.contentsModel?.last_modified,i=r?new Date(r):new Date,a=new Date(s.last_modified);return r&&a.getTime()-i.getTime()>n?this._timeConflict(i,s,e):this._manager.contents.save(t,e)}),(s=>{if(s.response&&404===s.response.status)return this._manager.contents.save(t,e);throw s}))}async _handleError(e,t){await(0,a.showErrorMessage)(t,e)}_maybeCheckpoint(e){let t=Promise.resolve(void 0);return this.canSave?(t=e?this.createCheckpoint().then():this.listCheckpoints().then((e=>{if(!this.isDisposed&&!e.length&&this.canSave)return this.createCheckpoint().then()})),t.catch((e=>{if(!e.response||403!==e.response.status)throw e}))):t}_timeConflict(e,t,s){const n=new Date(t.last_modified);if(console.warn(`Last saving performed ${e} while the current file seems to have been saved ${n}`),this._timeConflictModalIsOpen){const e=new Error("Modal is already displayed");return e.name="ModalDuplicateError",Promise.reject(e)}const r=this._trans.__('"%1" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?',this.path),i=a.Dialog.okButton({label:this._trans.__("Revert"),actions:["revert"]}),o=a.Dialog.warnButton({label:this._trans.__("Overwrite"),actions:["overwrite"]});return this._timeConflictModalIsOpen=!0,(0,a.showDialog)({title:this._trans.__("File Changed"),body:r,buttons:[a.Dialog.cancelButton(),i,o]}).then((e=>{if(this._timeConflictModalIsOpen=!1,this.isDisposed)return Promise.reject(new Error("Disposed"));if(e.button.actions.includes("overwrite"))return this._manager.contents.save(this._path,s);if(e.button.actions.includes("revert"))return this.revert().then((()=>t));const n=new Error("Cancel");return n.name="ModalCancelError",Promise.reject(n)}))}_maybeOverWrite(e){const t=this._trans.__('"%1" already exists. Do you want to replace it?',e),s=a.Dialog.warnButton({label:this._trans.__("Overwrite"),accept:!0});return(0,a.showDialog)({title:this._trans.__("File Overwrite?"),body:t,buttons:[a.Dialog.cancelButton(),s]}).then((t=>this.isDisposed?Promise.reject(new Error("Disposed")):t.button.accept?this._manager.contents.delete(e).then((()=>this._finishSaveAs(e))):void 0))}async _finishSaveAs(e){this._saveState.emit("started");try{await this._manager.ready;const t=this._createSaveOptions();await this._manager.contents.save(e,t),await this._maybeCheckpoint(!0),this._saveState.emit("completed")}catch(e){if("Cancel"===e.message||"Modal is already displayed"===e.message)throw e;const t=this._manager.contents.localPath(this._path),s=d.PathExt.basename(t);return this._handleError(e,this._trans.__("File Save Error for %1",s)),void this._saveState.emit("failed")}}_createSaveOptions(){let e=null;return"json"===this._factory.fileFormat?e=this._model.toJSON():(e=this._model.toString(),this._lineEnding&&(e=e.replace(/\n/g,this._lineEnding))),{type:this._factory.contentType,format:this._factory.fileFormat,content:e}}translator;_isReady=!1;_isDisposed=!1;_isPopulated=!1;_trans;_manager;_opener;_model;_path="";_lineEnding=null;_factory;_contentsModel=null;_readyPromise;_populatedPromise=new y.PromiseDelegate;_pathChanged=new j.Signal(this);_fileChanged=new j.Signal(this);_saveState=new j.Signal(this);_disposed=new j.Signal(this);_dialogs;_lastModifiedCheckMargin=500;_timeConflictModalIsOpen=!1}!function(e){e.getSavePath=function(e,s){const n=(s=s||h.nullTranslator).load("jupyterlab"),r=a.Dialog.okButton({label:n.__("Save"),accept:!0});return(0,a.showDialog)({title:n.__("Save File As…"),body:new t(e),buttons:[a.Dialog.cancelButton(),r]}).then((e=>{if(e.button.accept)return e.value??void 0}))},e.noOp=function(){};class t extends le.Widget{constructor(e){super({node:s(e)})}getValue(){return this.node.value}}function s(e){const t=document.createElement("input");return t.value=e,t}}(re||(re={}));class de{constructor(e){this.translator=e.translator||h.nullTranslator,this.registry=e.registry,this.services=e.manager,this._dialogs=e.sessionDialogs??new a.SessionContextDialogs({translator:e.translator}),this._isConnectedCallback=e.isConnectedCallback||(()=>!0),this._opener=e.opener,this._when=e.when||e.manager.ready;const t=new o.DocumentWidgetManager({registry:this.registry,translator:this.translator});t.activateRequested.connect(this._onActivateRequested,this),t.stateChanged.connect(this._onWidgetStateChanged,this),this._widgetManager=t,this._setBusy=e.setBusy}registry;services;get activateRequested(){return this._activateRequested}get autosave(){return this._autosave}set autosave(e){if(this._autosave!==e){const t=this._autosave;this._autosave=e,this._contexts.forEach((t=>{const s=ie.saveHandlerProperty.get(t);s&&(!0!==e||s.isActive?!1===e&&s.isActive&&s.stop():s.start())})),this._stateChanged.emit({name:"autosave",oldValue:t,newValue:e})}}get autosaveInterval(){return this._autosaveInterval}set autosaveInterval(e){if(this._autosaveInterval!==e){const t=this._autosaveInterval;this._autosaveInterval=e,this._contexts.forEach((t=>{const s=ie.saveHandlerProperty.get(t);s&&(s.saveInterval=e||120)})),this._stateChanged.emit({name:"autosaveInterval",oldValue:t,newValue:e})}}get confirmClosingDocument(){return this._widgetManager.confirmClosingDocument}set confirmClosingDocument(e){if(this._widgetManager.confirmClosingDocument!==e){const t=this._widgetManager.confirmClosingDocument;this._widgetManager.confirmClosingDocument=e,this._stateChanged.emit({name:"confirmClosingDocument",oldValue:t,newValue:e})}}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){if(this._lastModifiedCheckMargin!==e){const t=this._lastModifiedCheckMargin;this._lastModifiedCheckMargin=e,this._contexts.forEach((t=>{t.lastModifiedCheckMargin=e})),this._stateChanged.emit({name:"lastModifiedCheckMargin",oldValue:t,newValue:e})}}get renameUntitledFileOnSave(){return this._renameUntitledFileOnSave}set renameUntitledFileOnSave(e){if(this._renameUntitledFileOnSave!==e){const t=this._renameUntitledFileOnSave;this._renameUntitledFileOnSave=e,this._stateChanged.emit({name:"renameUntitledFileOnSave",oldValue:t,newValue:e})}}get stateChanged(){return this._stateChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,j.Signal.clearData(this),this._contexts.forEach((e=>this._widgetManager.closeWidgets(e))),this._widgetManager.dispose(),this._contexts.length=0)}cloneWidget(e){return this._widgetManager.cloneWidget(e)}closeAll(){return Promise.all(this._contexts.map((e=>this._widgetManager.closeWidgets(e)))).then((()=>{}))}closeFile(e){const t=this._contextsForPath(e).map((e=>this._widgetManager.closeWidgets(e)));return Promise.all(t).then((e=>{}))}contextForWidget(e){return this._widgetManager.contextForWidget(e)}copy(e,t){return this.services.contents.copy(e,t)}createNew(e,t="default",s){return this._createOrOpenDocument("create",e,t,s)}deleteFile(e){return this.services.sessions.stopIfNeeded(e).then((()=>this.services.contents.delete(e))).then((()=>(this._contextsForPath(e).forEach((e=>this._widgetManager.deleteWidgets(e))),Promise.resolve(void 0))))}duplicate(e){const t=d.PathExt.dirname(e);return this.services.contents.copy(e,t)}findWidget(e,t="default"){const s=d.PathExt.normalize(e);let n=[t];if("default"===t){const e=this.registry.defaultWidgetFactory(s);if(!e)return;n=[e.name]}else null===t&&(n=this.registry.preferredWidgetFactories(s).map((e=>e.name)));for(const e of this._contextsForPath(s))for(const t of n)if(null!==t){const s=this._widgetManager.findWidget(e,t);if(s)return s}}newUntitled(e){return"file"===e.type&&(e.ext=e.ext||".txt"),this.services.contents.newUntitled(e)}open(e,t="default",s,n){return this._createOrOpenDocument("open",e,t,s,n)}openOrReveal(e,t="default",s,n){const r=this.findWidget(e,t);return r?(this._opener.open(r,{type:t,...n}),r):this.open(e,t,s,n??{})}overwrite(e,t){const s=`${t}.${y.UUID.uuid4()}`,n=()=>this.rename(s,t);return this.rename(e,s).then((()=>this.deleteFile(t))).then(n,n)}rename(e,t){return this.services.contents.rename(e,t)}_findContext(e,t){const s=this.services.contents.normalize(e);return(0,M.find)(this._contexts,(e=>e.path===s&&e.factoryName===t))}_contextsForPath(e){const t=this.services.contents.normalize(e);return this._contexts.filter((e=>e.path===t))}_createContext(e,t,s){const n=new he({opener:(e,t)=>{this._widgetManager.adoptWidget(n,e),this._opener.open(e,t)},manager:this.services,factory:t,path:e,kernelPreference:s,setBusy:this._setBusy,sessionDialogs:this._dialogs,lastModifiedCheckMargin:this._lastModifiedCheckMargin,translator:this.translator}),r=new o.SaveHandler({context:n,isConnectedCallback:this._isConnectedCallback,saveInterval:this.autosaveInterval});return ie.saveHandlerProperty.set(n,r),n.ready.then((()=>{this.autosave&&r.start()})),n.disposed.connect(this._onContextDisposed,this),this._contexts.push(n),n}_onContextDisposed(e){M.ArrayExt.removeFirstOf(this._contexts,e)}_widgetFactoryFor(e,t){const{registry:s}=this;if("default"===t){const n=s.defaultWidgetFactory(e);if(!n)return;t=n.name}return s.getWidgetFactory(t)}_createOrOpenDocument(e,t,s="default",n,r){const i=this._widgetFactoryFor(t,s);if(!i)return;const a=i.modelName||"text",o=this.registry.getModelFactory(a);if(!o)return;const l=this.registry.getKernelPreference(t,i.name,n);let c,h=Promise.resolve(void 0);if("open"===e)c=this._findContext(t,o.name)||null,c||(c=this._createContext(t,o,l),h=this._when.then((()=>c.initialize(!1))));else{if("create"!==e)throw new Error(`Invalid argument 'which': ${e}`);c=this._createContext(t,o,l),h=this._when.then((()=>c.initialize(!0)))}const d=this._widgetManager.createWidget(i,c);return this._opener.open(d,{type:i.name,...r}),h.catch((e=>{console.error(`Failed to initialize the context with '${o.name}' for ${t}`,e),d.close()})),d}_onActivateRequested(e,t){this._activateRequested.emit(t)}_onWidgetStateChanged(e,t){"confirmClosingDocument"===t.name&&this._stateChanged.emit(t)}translator;_activateRequested=new j.Signal(this);_contexts=[];_opener;_widgetManager;_isDisposed=!1;_autosave=!0;_autosaveInterval=120;_lastModifiedCheckMargin=500;_renameUntitledFileOnSave=!0;_when;_setBusy;_dialogs;_isConnectedCallback;_stateChanged=new j.Signal(this)}!function(e){e.saveHandlerProperty=new oe.AttachedProperty({name:"saveHandler",create:()=>{}})}(ie||(ie={}));var ue=s(76838),pe=s(54577);class ge extends u.KernelManager{async startNew(e,t){const s=await(0,ue.SP)({...e,params:{param1:"value1"}},this.serverSettings);return super.connectTo({...t,model:s})}}class me extends u.SessionManager{async startNew(e,t){const s=await(0,pe.yj)({...e,params:{param1:"value1"}},this.serverSettings);return await this.refreshRunning(),this.connectTo({...t,model:s})}}class fe{_serviceManager;_kernelManager;_sessionManager;constructor(e){this._kernelManager=new ge({serverSettings:e.kernels.serverSettings}),e.kernels=this._kernelManager,this._sessionManager=new me({serverSettings:e.sessions.serverSettings,kernelManager:e.kernels}),e.sessions=this._sessionManager,this._serviceManager=e}get isReady(){return this._serviceManager.isReady}get ready(){return this._serviceManager.ready}get connectionFailure(){return this._serviceManager.connectionFailure}get isDisposed(){return this._serviceManager.isDisposed}get builder(){return this._serviceManager.builder}get contents(){return this._serviceManager.contents}get events(){return this._serviceManager.events}get serverSettings(){return this._serviceManager.serverSettings}get sessions(){return this._sessionManager}get kernels(){return this._kernelManager}get kernelspecs(){return this._serviceManager.kernelspecs}get settings(){return this._serviceManager.settings}get terminals(){return this._serviceManager.terminals}get user(){return this._serviceManager.user}get workspaces(){return this._serviceManager.workspaces}get nbconvert(){return this._serviceManager.nbconvert}dispose(){this._serviceManager.dispose()}}class _e{_serviceManagerBrowser;_serviceManagerLocal;_serviceManagerRemote;constructor(e){this._serviceManagerLocal=new fe(e)}get browser(){return this._serviceManagerBrowser}set browser(e){this._serviceManagerBrowser=e?new fe(e):e}get local(){return this._serviceManagerLocal}get remote(){return this._serviceManagerRemote}set remote(e){this._serviceManagerRemote=e?new fe(e):e}get isReady(){return this._serviceManagerLocal.isReady}get ready(){return this._serviceManagerLocal.ready}get connectionFailure(){return this._serviceManagerLocal.connectionFailure}get isDisposed(){return this._serviceManagerLocal.isDisposed}get builder(){return this._serviceManagerLocal.builder}get contents(){return this._serviceManagerLocal.contents}get events(){return this._serviceManagerLocal.events}get serverSettings(){return this._serviceManagerLocal.serverSettings}get sessions(){return this._serviceManagerLocal.sessions}get kernels(){return this._serviceManagerLocal.kernels}get kernelspecs(){return this._serviceManagerLocal.kernelspecs}get settings(){return this._serviceManagerLocal.settings}get terminals(){return this._serviceManagerLocal.terminals}get user(){return this._serviceManagerLocal.user}get workspaces(){return this._serviceManagerLocal.workspaces}get nbconvert(){return this._serviceManagerLocal.nbconvert}dispose(){this._serviceManagerLocal.dispose()}}var xe=s(29482),ye=s(83513),ve=s(66029);const we=({app:e})=>{const{setJupyterLabAdapter:t}=(0,ye.Z)();return(0,ve.useEffect)((()=>{t(L.JupyterLabAppAdapter.create(e))}),[]),(0,C.jsx)(xe.Z,{})};class je extends a.ReactWidget{_app;constructor(e,t){super(),this._app=e,this.addClass("dla-Container")}render(){return(0,C.jsx)(we,{app:this._app})}}const ke={id:"@datalayer/docmanager-extension:manager",description:"Provides the document manager.",provides:o.IDocumentManager,requires:[o.IDocumentWidgetOpener,a.ISessionContextDialogs],optional:[h.ITranslator,i.ILabStatus,i.JupyterLab.IInfo],activate:(e,t,s,n,r,i)=>{const{docRegistry:a}=e,o=n??h.nullTranslator,l=e.restored.then((()=>{}));return new de({registry:a,manager:e.serviceManager,opener:t,when:l,setBusy:(r&&(()=>r.setBusy()))??void 0,sessionDialogs:s,translator:o??h.nullTranslator,isConnectedCallback:()=>!i||i.isConnected})}},be={id:"@datalayer/jupyter-kernels:service-manager",description:"Overrides the Jupyter service manager.",provides:z,autoStart:!0,activate:e=>{const t=new _e(e.serviceManager);return e.serviceManager=t,t}},Se={id:"@datalayer/apputils-extension:sessionDialogs",description:"Provides the session context dialogs.",provides:a.ISessionContextDialogs,optional:[h.ITranslator],requires:[z],autoStart:!0,activate:async(e,t,s)=>new O({translator:s??h.nullTranslator},t)};var Ce;!function(e){e.create="create-jupyter-kernels-widget"}(Ce||(Ce={}));const Me={id:"@datalayer/jupyter-kernels:plugin",autoStart:!0,requires:[a.ICommandPalette],optional:[c.ISettingRegistry,l.ILauncher,i.ILayoutRestorer],provides:J,activate:(e,t,s,r,i)=>{const{commands:o}=e,l=Ce.create,c=new a.WidgetTracker({namespace:"jupyter-kernels"});i&&i.restore(c,{command:l,name:()=>"jupyter-kernels"});const h={};o.addCommand(l,{caption:"Show Jupyter Kernels",label:"Jupyter Kernels",icon:n,execute:()=>{const t=new je(e,h),s=new a.MainAreaWidget({content:t});s.title.label="Jupyter Kernels",s.title.icon=n,e.shell.add(s,"main"),c.add(s)}});const d="Datalayer";t.addItem({command:l,category:d});const u=e=>{const t=e.get("showInLauncher").composite;r&&t&&r.add({command:l,category:d,rank:5.4})};return s&&s.load(Me.id).then((e=>{console.log("@datalayer/jupyter-kernels settings loaded:",e.composite),u(e),e.changed.connect(u)})).catch((e=>{console.error("Failed to load settings for @datalayer/jupyter-kernels.",e)})),(0,ae.v)("config").then((e=>{console.log(e)})).catch((e=>{console.error(`Error while accessing the jupyter server jupyter_kernels extension.\n${e}`)})),console.log("JupyterLab plugin @datalayer/jupyter-kernels:plugin is activated."),h}},Fe=[Me,ke,be,Se,...ne]},83513:(e,t,s)=>{s.d(t,{Z:()=>r,o:()=>n});const n=(0,s(75489).create)(((e,t)=>({setJupyterLabAdapter:t=>{e((e=>({jupyterLabAdapter:t})))},tab:0,getIntTab:()=>Math.floor(t().tab),setTab:t=>e((e=>({tab:t}))),remoteJupyterToken:void 0,setRemoteJupyterToken:t=>{e((e=>({remoteJupyterToken:t})))},serviceManager:void 0,setServiceManager:t=>{e((e=>({serviceManager:t})))},showDisclaimer:!0,setShowDisclaimer:t=>{e((e=>({showDisclaimer:t})))}}))),r=n},97072:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0iIzU4NjA2OSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNC40MjcgOS40MjdsMy4zOTYgMy4zOTZhLjI1MS4yNTEgMCAwMC4zNTQgMGwzLjM5Ni0zLjM5NkEuMjUuMjUgMCAwMDExLjM5NiA5SDQuNjA0YS4yNS4yNSAwIDAwLS4xNzcuNDI3ek00LjQyMyA2LjQ3TDcuODIgMy4wNzJhLjI1LjI1IDAgMDEuMzU0IDBMMTEuNTcgNi40N2EuMjUuMjUgMCAwMS0uMTc3LjQyN0g0LjZhLjI1LjI1IDAgMDEtLjE3Ny0uNDI3eiIgLz48L3N2Zz4="},2852:e=>{e.exports="data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27 focusable=%27false%27 role=%27img%27 viewBox=%270 -3 16 16%27 width=%2716%27 height=%2716%27 fill=%27black%27 style=%27display: inline-block; vertical-align: text-bottom; overflow: visible;%27%3e%3cpath d=%27M2 7.75A.75.75 0 0 1 2.75 7h10a.75.75 0 0 1 0 1.5h-10A.75.75 0 0 1 2 7.75Z%27%3e%3c/path%3e%3c/svg%3e"},62520:e=>{e.exports="data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27 focusable=%27false%27 role=%27img%27 viewBox=%270 -3 16 16%27 width=%2716%27 height=%2716%27 fill=%27white%27 style=%27display: inline-block; vertical-align: text-bottom; overflow: visible;%27%3e%3cpath d=%27M2 7.75A.75.75 0 0 1 2.75 7h10a.75.75 0 0 1 0 1.5h-10A.75.75 0 0 1 2 7.75Z%27%3e%3c/path%3e%3c/svg%3e"},84803:e=>{e.exports=JSON.parse('{"dp":"https://dev1-io.datalayer.run","uu":"wss://dev1-io.datalayer.run","Gd":"https://dev1-io.datalayer.run","au":"default"}')}}]);