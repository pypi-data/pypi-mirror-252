import numpy as np
import pyaudio

def bytebeat(t, a=12, b=8, c=15, d=4):
    return ((t & (t >> a)) | ((t >> b) & (t >> c)) | ((t >> d) & (t >> 10)))

def play_bytebeat8(sample_rate=44100, duration=10, amplification_factor=1.0):
    p = pyaudio.PyAudio()

    stream = p.open(
        format=pyaudio.paFloat32,
        channels=1,
        rate=sample_rate,
        output=True
    )

    t = 0
    t_end = sample_rate * duration

    while t < t_end:
        data = np.array([bytebeat(t) * amplification_factor for t in range(t, t + 1024)], dtype=np.float32)
        stream.write(data.tobytes())
        t += len(data)

    stream.stop_stream()
    stream.close()
    p.terminate()

if __name__ == "__main__":
    play_bytebeat8(amplification_factor=1.5)