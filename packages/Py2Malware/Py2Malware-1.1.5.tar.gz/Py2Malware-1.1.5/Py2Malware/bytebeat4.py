import numpy as np
import pyaudio

def bytebeat(t):
    return (t >> 7 | t | t >> 6) & 0xFF

def play_bytebeat4(sample_rate=44100, amplification_factor=5.0):
    p = pyaudio.PyAudio()

    stream = p.open(
        format=pyaudio.paFloat32,
        channels=1,
        rate=sample_rate,
        output=True
    )

    t = 0

    while True:
        data = np.array([bytebeat(t) * amplification_factor for t in range(t, t + 1024)], dtype=np.float32)
        stream.write(data.tobytes())
        t += len(data)

if __name__ == "__main__":
    play_bytebeat4(amplification_factor=5.0)
