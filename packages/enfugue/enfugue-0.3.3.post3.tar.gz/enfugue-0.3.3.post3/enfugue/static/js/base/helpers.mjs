export let every=e=>{for(let t of e)if(!t)return!1;return!0};export let none=e=>{for(let t of e)if(t)return!1;return!0};export let any=e=>{for(let t of e)if(t)return!0;return!1};export let flatten=e=>e.reduce(((e,t)=>e.concat(Array.isArray(t)?flatten(t):t)),[]);export let strip=e=>{if(isEmpty(e))return e;let t=e.match(/^[\ \t\r\n\'\"]*(.*?)[\ \t\r\n\'\"]*$/);return null===t?"":t[1]};export let sleep=e=>new Promise((t=>{setTimeout(t,e)}));export let waitFor=async(e,t)=>{let r=(t=t||{}).interval||50,o=t.timeout,n=new Date,l=0;for(;!e();)if(await sleep(r),l=new Date-n,!isEmpty(o)&&l>o)throw"Timeout"};export let guessCase=e=>(e=strip(e),/^$/.test(e)?"EMPTY":/^[a-z09]+$/.test(e)?"LOWER":/^[A-Z09]+$/.test(e)?"UPPER":/^[A-Za-z0-9]+(_[A-Za-z0-9]+)+$/.test(e)?"SNAKE":/^[A-Za-z0-9]+(-[A-Za-z0-9]+)+$/.test(e)?"KEBAB":/^[a-z]+([A-Z][a-z0-9]+)+$/.test(e)?"CAMEL":/^([A-Z][a-z0-9]+)+$/.test(e)?"PASCAL":/^(\w+)((\W\w+)+)$/.test(e)?"SENTENCE":"UNKNOWN");export let guessStringParts=e=>{switch(e=strip(e),guessCase(e)){case"SENTENCE":return e.split(" ").map((e=>e.toLowerCase()));case"SNAKE":return e.split("_").map((e=>e.toLowerCase()));case"KEBAB":return e.split("-").map((e=>e.toLowerCase()));case"CAMEL":return e.split(/([A-Z])/g).reduce(((e,t,r)=>0==r||r%2==1?e.concat([t]):e.concat([e.splice(-1)[0]+t])),[]).map((e=>e.toLowerCase()));case"PASCAL":return e.split(/([A-Z])/g).reduce(((e,t,r)=>0==r?e:r%2==1?e.concat([t]):e.concat([e.splice(-1)[0]+t])),[]).map((e=>e.toLowerCase()));default:return[e.toLowerCase()]}};export let kebabCase=(e,t)=>(void 0===t&&(t="-"),guessStringParts(e).join(t));export let snakeCase=(e,t)=>(void 0===t&&(t="_"),guessStringParts(e).join(t));export let camelCase=(e,t)=>(void 0===t&&(t=""),guessStringParts(e).map(((e,t)=>0==t?e:e[0].toUpperCase()+e.substr(1))).join(t));export let pascalCase=(e,t)=>(void 0===t&&(t=""),guessStringParts(e).map((e=>e[0].toUpperCase()+e.substr(1))).join(t));export let titleCase=e=>pascalCase(e," ");export let caseInsensitiveMatch=(e,t)=>e.toLowerCase()===t.toLowerCase()||kebabCase(e)===kebabCase(t);export let truncate=(e,t,r="â€¦")=>{if(e.length<=t)return e;let o=e.lastIndexOf(" ",t);return-1===o&&(o=t),e.substring(0,o)+r};export let set=e=>e.filter(((t,r)=>e.indexOf(t)===r));export let filterEmpty=e=>{let t={};for(let r in e)isEmpty(e[r])||(t[r]=e[r]);return t};export let merge=function(){let e=Array.from(arguments),t={};for(let r=0;r<e.length;r++){let o=e[r],n=Object.getOwnPropertyNames(o);for(let e of n)void 0===t[e]?t[e]=o[e]:t[e].constructor==Object&&o[e].constructor==Object?t[e]=merge(t[e],o[e]):t[e]=o[e]}return t};const mouseEvents=["click","dblclick","mouseenter","mouseleave","mouseup","mousedown","mousemove","mouseover","mouseout","contextmenu"];export let createEvent=e=>"function"==typeof MouseEvent&&mouseEvents.indexOf(e)>-1?new MouseEvent(e):"function"==typeof Event?new Event(e):(()=>{let t=document.createEvent("Event");return t.initEvent(e,!0,!0),t})();export let randomInt=(e,t)=>(void 0===t?0:e)+Math.random()*(void 0===t?e:t-e)|0;export let randomHex=e=>isEmpty(e)?randomInt(16).toString(16):new Array(e).fill(null).map(randomHex).join("");export let randomChoice=e=>e[randomInt(e.length)];export let uuid=()=>`${randomHex(8)}-${randomHex(4)}-4${randomHex(3)}-${randomChoice(["8","9","a","b"])}${randomHex(3)}-${randomHex(12)}`;export let isEquivalent=(e,t)=>{if(typeof e==typeof t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!isEquivalent(e[r],t[r]))return!1;return!0}if("object"==typeof e){if(null===e)return null===t;if(null===t)return!1;let r=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(!isEquivalent(r,o))return!1;for(let o of r)if(!isEquivalent(e[o],t[o]))return!1;return!0}return e===t}return!1};export let getQueryParameters=()=>-1===window.location.href.indexOf("?")?{}:window.location.href.substring(window.location.href.indexOf("?")+1).split("&").reduce(((e,t)=>{let r=t.split("="),o=r[0],n=decodeURIComponent(r[1]).replace("+"," ");return e.hasOwnProperty(o)?(Array.isArray(e[o])||(e[o]=[e[o]]),e[o].push(n)):e[o]=n,e}),{});export let getDataParameters=e=>{let t={};for(let r=0,o=e.attributes,n=o.length;r<n;r++)o[r].nodeName.startsWith("data")&&(t[camelCase(o[r].nodeName.substr(5))]=o[r].nodeValue);return t};export let buildQueryURL=(e,t)=>{let r=e;return-1===e.indexOf("?")&&(r+="?"),r+Object.getOwnPropertyNames(t).map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&")};export let getQueryURL=e=>buildQueryURL(window.location.href,e);export let isEmpty=e=>null==e||""===e||"null"===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&"Object"===e.constructor.name&&0===Object.getOwnPropertyNames(e).length;export let removeEmpty=e=>{if(Array.isArray(e)){let t=[];for(let r of e)isEmpty(v)||t.push(v);return t}if("object"==typeof e){let t={};for(let r of Object.getOwnPropertyNames(e))isEmpty(e[r])||(t[r]=e[r]);return t}return e};export let deepClone=(e,t=!0)=>{if(null==e)return e;if("function"==typeof e){if(t)throw"Cannot clone functions.";return e}return"boolean"==typeof e?!!e:"number"==typeof e?0+e:"string"==typeof e||e instanceof String?`${e}`:Array.isArray(e)?new Array(e.length).fill(null).map(((t,r)=>deepClone(e[r],!1))):"object"==typeof e||e===Object(e)?"RegExp"===e.constructor.name?e:Object.getOwnPropertyNames(e).reduce(((t,r)=>(t[r]=deepClone(e[r],!1),t)),new Object):(console.warn("Unknown clone type for",e),e)};const byteSuffixes=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];export let humanSize=(e,t)=>{void 0===t&&(t=2);let r=0;for(;e>1e3;)e/=1e3,r++;return`${e.toFixed(t)} ${byteSuffixes[r]}`};const secondsPerMinute=60,secondsPerHour=3600,secondsPerDay=86400;export let humanDuration=(e,t=!0,r=!1)=>{let o=0,n=0,l=0;e>86400&&(o=Math.floor(e/86400),e-=86400*o),e>3600&&(n=Math.floor(e/3600),e-=3600*n),e>60&&(l=Math.floor(e/60),e-=60*l),e=Math.floor(e);let s=r?":":", ",a=r?`${o}:${n.toString().padStart(o>0?2:1,"0")}:${l.toString().padStart(n>0?2:1,"0")}:${e.toString().padStart(2,"0")}`:`${o} day${1!=o?"s":""}, ${n} hour${1!=n?"s":""}, ${l} minute${1!=l?"s":""}, ${e} second${1!=e?"s":""}`;if(t&&0==o){let e=a.split(s);return 0==n&&0==l?r?`0:${e.slice(-1)[0]}`:e.slice(3).join(s):0==n?e.slice(2).join(s):e.slice(1).join(s)}return a};export let getCookies=()=>document.cookie.split(";").reduce(((e,t)=>{let r=strip(t).split("=");return e[r[0]]=r[1],e}),{});export let getCookie=e=>getCookies()[e];export let levenshtein=(e,t)=>{if(e===t)return 0;var r=e.length,o=t.length;if(0===r||0===o)return r+o;var n,l,s,a,i,u,p,c=0,d=new Uint16Array(r),f=new Uint32Array(r);for(n=0;n<r;)f[n]=e.charCodeAt(n),d[n]=++n;for(;c+3<o;c+=4){var m=t.charCodeAt(c),h=t.charCodeAt(c+1),x=t.charCodeAt(c+2),g=t.charCodeAt(c+3);for(a=c,s=c+1,i=c+2,u=c+3,p=c+4,n=0;n<r;n++)(l=d[n])<a||s<a?a=l>s?s+1:l+1:m!==f[n]&&a++,a<s||i<s?s=a>i?i+1:a+1:h!==f[n]&&s++,s<i||u<i?i=s>u?u+1:s+1:x!==f[n]&&i++,i<u||p<u?u=i>p?p+1:i+1:g!==f[n]&&u++,d[n]=p=u,u=i,i=s,s=a,a=l}for(;c<o;){var w=t.charCodeAt(c);for(a=c,i=++c,n=0;n<r;n++)i=(l=d[n])<a||i<a?l>i?i+1:l+1:w!==f[n]?a+1:a,d[n]=i,a=l;p=i}return p};export let jaroWinkler=(e,t,r)=>{let o,n,l=0;if(0===e.length||0===t.length)return 0;if(e===t)return 1;let s=Math.floor(Math.max(e.length,t.length)/2)-1,a=new Array(e.length),i=new Array(t.length);for(o=0;o<e.length;o++){let r=o>=s?o-s:0,u=o+s<=t.length-1?o+s:t.length-1;for(n=r;n<=u;n++)if(!0!==a[o]&&!0!==i[n]&&e[o]===t[n]){++l,a[o]=i[n]=!0;break}}if(0===l)return 0;let u=0,p=0;for(o=0;o<e.length;o++)if(!0===a[o]){for(n=u;n<t.length;n++)if(!0===i[n]){u=n+1;break}e[o]!==t[n]&&++p}let c=(l/e.length+l/t.length+(l-p/2)/l)/3,d=0;if(null==r&&(r=.1),c>.7){for(;e[d]===t[d]&&d<4;)++d;c+=d*r*(1-c)}return c};export let getPermutations=e=>{let t,r,o=e.length,n=[e.slice()],l=new Array(o).fill(0),s=1;for(;s<o;)l[s]<s?(t=s%2&&l[s],r=e[s],e[s]=e[t],e[t]=r,++l[s],s=1,n.push(e.slice())):(l[s]=0,++s);return n};export let permutedSentenceJaroWinkler=(e,t)=>{let r=0;for(let o of getPermutations(e.split(" ")))for(let e of getPermutations(t.split(" ")))r=Math.max(r,jaroWinkler(o.join(" "),e.join(" ")));return r};export let ceilingTo=(e,t)=>Math.ceil(e/t)*t;export let floorTo=(e,t)=>Math.floor(e/t)*t;export let roundTo=(e,t)=>Math.round(e/t)*t;export let roundToFactor=(e,t)=>roundTo(e,10**t);export let roundToPrecision=(e,t)=>{return r=10**t,Math.round(e*r)/r;var r};export let clamp=(e,t=0,r=1)=>Math.max(Math.min(isNaN(e)?0:e,r),t);export let parseSelector=e=>{let t={};return e.split(/(?=\.)|(?=#)|(?=\[)/).forEach((e=>{switch(e[0]){case"#":void 0===t.ids&&(t.ids=[]),t.ids.push(e.slice(1));break;case".":void 0===t.classes&&(t.classes=[]),t.classes.push(e.slice(1));break;case"[":void 0===t.attributes&&(t.attributes={});let[r,o]=e.slice(1,-1).split("=");t.attributes[r]=strip(o);break;default:void 0===t.tags&&(t.tags=[]),t.tags.push(e)}})),t};export function*shiftingFrameIterator(e,t){for(let r=0;r<e.length-t+1;r++)yield e.slice(r,r+t)}export function*zip(...e){let t=Math.min(...e.map((e=>e.length)));for(let r=0;r<t;r++)yield e.map((e=>e[r]))}export let hslToRgb=(e,t,r)=>{let o,n,l;if(0===t)o=n=l=r;else{let s=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),a=r<.5?r*(1+t):r+t-r*t,i=2*r-a;o=s(i,a,e+1/3),n=s(i,a,e),l=s(i,a,e-1/3)}return[Math.round(255*o),Math.round(255*n),Math.round(255*l)]};export let rgbToHsl=(e,t,r)=>{e/=255,t/=255,r/=255;let o,n,l=Math.max(e,t,r),s=Math.min(e,t,r),a=(l+s)/2;if(l===s)o=n=0;else{let i=l-s;switch(n=a>.5?i/(2-l-s):i/(l+s),l){case e:o=(t-r)/i+(t<r?6:0);break;case t:o=(r-e)/i+2;break;case r:o=(e-t)/i+4}o/=6}return[o,n,a]};export let rgbToHex=(e,t,r)=>{let o=e=>(e<16?"0":"")+e.toString(16);return`#${o(e)}${o(t)}${o(r)}`};export let hslToHex=(e,t,r)=>rgbToHex(...hslToRgb(e,t,r));export let hexToRgb=e=>(e.startsWith("#")&&(e=e.substr(1)),[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4),16)]);export let hexToHsl=e=>rgbToHsl(...hexToRgb(e));const pluralRules=new Intl.PluralRules("en-US",{type:"ordinal"}),suffixes=new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]]);export let formatOrdinal=e=>`${e}${suffixes.get(pluralRules.select(e))}`;export let promptFiles=(e="*",t=!1)=>new Promise(((r,o)=>{let n=document.createElement("input");n.type="file",n.multiple=t,n.accept=e,n.onchange=()=>{let e=Array.from(n.files);r(t?e:e[0])},n.click()}));export let stripHTML=e=>e.replace(/<[^>]*>?/gm,"");export let cleanHTML=e=>e.replace("<","&lt;").replace(">","&gt;");export let createElementsFromString=e=>{let t=document.createElement("div");return t.innerHTML=e.trim(),t.childNodes};export let getPointerEventCoordinates=(e,t=null)=>{let r={x:0,y:0};return isEmpty(t)||(r=t.getBoundingClientRect()),e.touches&&e.touches.length>0?[e.touches[0].clientX-r.x,e.touches[0].clientY-r.y]:[e.clientX-r.x,e.clientY-r.y]};export let bindPointerUntilRelease=(e,t=null)=>{let r=t=>{e(t)},o=e=>{isEmpty(t)||t(e),window.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseleave",o,!0),window.removeEventListener("touchend",o,!0),window.removeEventListener("mousemove",r,!0),window.removeEventListener("touchmove",r,!0)};window.addEventListener("mouseup",o,!0),window.addEventListener("mouseleave",o,!0),window.addEventListener("touchend",o,!0),window.addEventListener("mousemove",r,!0),window.addEventListener("touchmove",r,!0)};export let downloadAsBlob=e=>new Promise(((t,r)=>{let o=new XMLHttpRequest;o.open("GET",e,!0),o.addEventListener("load",(function(){4===this.readyState&&this.status>=200&&this.status<400?t(this.response):r(this)})),o.responseType="blob",o.send()}));export let downloadAsDataURL=e=>new Promise((async(t,r)=>{try{let r=await downloadAsBlob(e),o=new FileReader;o.onload=()=>{t(o.result)},o.readAsDataURL(r)}catch(e){r(e)}}));
