(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1173],{57595:function(e,r,t){"use strict";var n=t(90849),i=t(34896),o=t(24246);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}r.Z=function(e){return(0,o.jsx)(i.rU,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({isExternal:!0,color:"complimentary.500"},e))}},51471:function(e,r,t){"use strict";t.d(r,{Z:function(){return x}});var n=t(90849),i=t(34896),o=t(88038),s=t.n(o),c=t(86677),u=(t(27378),t(90768)),a=t(51365),l=t(29549),d=t(60709),p=t(24246),f=function(){var e=(0,c.useRouter)();return(0,p.jsx)(i.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,p.jsxs)(i.xu,{children:[(0,p.jsxs)(i.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,p.jsx)(i.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,p.jsx)(l.zx,{size:"sm",variant:"outline",onClick:function(){e.push(d.fz)},children:"Configure"})]}),(0,p.jsxs)(i.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var x=function(e){var r=e.children,t=e.title,n=e.mainProps,o=(0,u.hz)(),l=(0,c.useRouter)(),d="/privacy-requests"===l.pathname||"/datastore-connection"===l.pathname,h=!(o.flags.privacyRequestsConfiguration&&d),x=(0,a.JE)(void 0,{skip:h}).data,m=(0,a.PW)(void 0,{skip:h}).data,b=o.flags.privacyRequestsConfiguration&&(!x||!m)&&d;return(0,p.jsxs)(i.kC,{"data-testid":t,direction:"column",height:"calc(100vh - 48px)",children:[(0,p.jsxs)(s(),{children:[(0,p.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,p.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,p.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,p.jsxs)(i.kC,g(g({as:"main",direction:"column",py:6,px:10,flex:1,minWidth:0,overflow:"auto"},n),{},{children:[b?(0,p.jsx)(f,{}):null,r]}))]})}},65535:function(e,r,t){"use strict";t.d(r,{ZS:function(){return c},a4:function(){return o}});var n=t(80406),i=t(28703).u.injectEndpoints({endpoints:function(e){return{getPurposes:e.query({query:function(){return"purposes"}})}}}),o=i.useGetPurposesQuery,s={purposes:{},special_purposes:{}},c=(0,n.P1)(i.endpoints.getPurposes.select(),(function(e){return e.data||s}))},24753:function(e,r,t){"use strict";t.d(r,{MA:function(){return l},Vo:function(){return p},t5:function(){return d}});var n=t(90849),i=t(34896),o=t(24246);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u=function(e){var r=e.children;return(0,o.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",r]})},a=function(e){var r=e.children;return(0,o.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",r]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var r=(0,o.jsx)(u,{children:e});return c(c({},l),{description:r})},p=function(e){var r=(0,o.jsx)(a,{children:e});return c(c({},l),{description:r,status:"error"})}},10471:function(e,r,t){"use strict";t.r(r);var n=t(90849),i=t(73679),o=t(55732),s=t(97865),c=t(34707),u=t.n(c),a=t(34896),l=t(70409),d=t(83125),p=t(62709),f=t(29549),h=t(34090),g=t(27378),x=t(6848),m=t(57595),b=t(90768),v=t(43139),j=t(78624),y=t(51471),O=t(65535),C=t(38687),w=t(24753),_=t(44047),P=t(51365),k=t(43978),S=t(24246);function E(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?E(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var T=function(e){var r=e.children,t=e.purpose,n=e.endCol;return(0,S.jsx)(a.kC,{flex:"1",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px",borderRight:n?"solid 1px":"unset",borderColor:"gray.200",height:"100%",minWidth:"36px",children:[1,3,4,5,6].includes(t)?null:(0,S.jsx)(a.xu,{children:r})})};r.default=function(){var e=(0,_.x8)().isLoading,r=(0,b.hz)().tcf,t=(0,_.n3)(void 0,{skip:e||!r}),n=t.data,c=t.isLoading,E=(0,_.M7)(),z=(0,s.Z)(E,2),I=z[0],W=z[1].isLoading,Z=(0,P.tB)({api_set:!0}),L=Z.data,F=Z.isLoading,R=(0,P.tB)({api_set:!1}),H=R.data,q=R.isLoading,N=(0,P.L)(),A=(0,s.Z)(N,2),M=A[0],V=A[1].isLoading,$=(0,g.useMemo)((function(){return L&&null!==L&&void 0!==L&&L.consent&&"override_vendor_purposes"in L.consent?L.consent.override_vendor_purposes:!!(H&&null!==H&&void 0!==H&&H.consent&&"override_vendor_purposes"in H.consent)&&H.consent.override_vendor_purposes}),[L,H]),B=(0,O.a4)().isLoading,G=(0,x.C)(O.ZS).purposes,X=(0,l.pm)(),J=function(){var e=(0,o.Z)(u().mark((function e(r,t){var n,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){if(X.closeAll(),(0,j.D4)(e)){var n=(0,j.e$)(e.error,"An unexpected error occurred while saving vendor overrides. Please try again.");X((0,w.Vo)(n))}else X((0,w.t5)("TCF Purpose Overrides saved successfully")),t.resetForm({values:r})},o=(0,i.Z)(r.purposeOverrides.map((function(e){var r;return e.is_consent&&(r=k.I$.CONSENT),e.is_legitimate_interest&&(r=k.I$.LEGITIMATE_INTERESTS),{purpose:e.purpose,is_included:e.is_included,required_legal_basis:r}}))),e.next=4,I(o);case 4:s=e.sent,n(s);case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),U=function(){var e=(0,o.Z)(u().mark((function e(r){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){if(X.closeAll(),(0,j.D4)(e)){var r=(0,j.e$)(e.error,"An unexpected error occurred while saving vendor override settings. Please try again.");X((0,w.Vo)(r))}},e.next=3,M({consent:{override_vendor_purposes:r.target.checked}});case 3:if(i=e.sent,!r.target.checked){e.next=7;break}return e.next=7,I(n.map((function(e){return D(D({},e),{},{is_included:!0,required_legal_basis:void 0})})));case 7:t(i);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),K=(0,g.useMemo)((function(){return{purposeOverrides:n?n.map((function(e){return{purpose:e.purpose,is_included:e.is_included,is_consent:e.required_legal_basis===k.I$.CONSENT,is_legitimate_interest:e.required_legal_basis===k.I$.LEGITIMATE_INTERESTS}})):[]}}),[n]);return(0,S.jsx)(y.Z,{title:"Consent Configuration",children:e||B||c||F||q?(0,S.jsx)(a.kC,{justifyContent:"center",alignItems:"center",height:"100%",children:(0,S.jsx)(d.$,{})}):(0,S.jsxs)(a.xu,{"data-testid":"consent-configuration",children:[(0,S.jsx)(a.X6,{marginBottom:4,fontSize:"2xl",children:"Consent settings"}),(0,S.jsxs)(a.xu,{children:[(0,S.jsxs)(a.xu,{backgroundColor:"gray.50",borderRadius:"4px",padding:"14px",children:[(0,S.jsx)(a.xv,{fontSize:"md",fontWeight:"bold",lineHeight:5,color:"gray.700",children:"Transparency & Consent Framework settings"}),(0,S.jsxs)(a.xv,{mb:2,mt:3,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:["TCF status"," ",r?(0,S.jsx)(a.Ct,{backgroundColor:"green.100",children:"Enabled "}):(0,S.jsx)(a.Ct,{backgroundColor:"red.100",children:"Disabled"})]}),(0,S.jsxs)(a.xv,{fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:["To ",r?"disable":"enable"," TCF, please contact your Fides administrator or"," ",(0,S.jsx)(m.Z,{href:"mailto:support@ethyca.com",children:"Ethyca support"}),"."]})]}),(0,S.jsxs)(a.xu,{mt:"24px",backgroundColor:"gray.50",borderRadius:"4px",padding:"14px",children:[(0,S.jsx)(a.xv,{fontSize:"md",fontWeight:"bold",lineHeight:5,color:"gray.700",mb:3,children:"Vendor overrides"}),r?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(a.xv,{mb:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:"Configure overrides for TCF related purposes."}),(0,S.jsxs)(a.kC,{alignItems:"center",marginBottom:2,children:[(0,S.jsx)(p.r,{size:"sm",colorScheme:"purple",isChecked:$,onChange:U,isDisabled:V}),(0,S.jsx)(a.xv,{px:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:"Override vendor purposes"}),(0,S.jsx)(C.Z,{label:"Toggle on if you want to globally change any flexible legal bases or remove TCF purposes from your CMP"})]}),(0,S.jsx)(a.xv,{mb:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:$?"The table below allows you to adjust which TCF purposes you allow as part of your user facing notices and business activites.":null})]}):null,$&&r?(0,S.jsxs)(a.xv,{fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:["To configure this section, select the purposes you allow and where available, the appropriate legal bases (either Consent or Legitimate Interest)."," ",(0,S.jsxs)(m.Z,{href:"https://fid.es/tcf-overrides",children:["Read the guide on vendor overrides here."," "]})]}):null]})]}),$?(0,S.jsx)(a.xu,{mt:4,children:(0,S.jsx)(h.J9,{initialValues:K,enableReinitialize:!0,onSubmit:J,children:function(e){var r=e.values,t=e.dirty,n=e.isValid,i=e.setFieldValue;return(0,S.jsxs)(h.l0,{children:[(0,S.jsx)(h.F2,{name:"purposeOverrides",render:function(){return(0,S.jsxs)(a.kC,{flexDirection:"column",minWidth:"944px",children:[(0,S.jsxs)(a.kC,{width:"100%",border:"solid 1px",borderColor:"gray.200",backgroundColor:"gray.50",height:"36px",children:[(0,S.jsx)(a.kC,{width:"600px",pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",children:"TCF purpose"}),(0,S.jsx)(a.kC,{flex:"1",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",minWidth:"36px",children:(0,S.jsx)(a.xv,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Allowed"})}),(0,S.jsx)(a.kC,{flex:"1",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",children:(0,S.jsx)(a.xv,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Consent"})}),(0,S.jsx)(a.kC,{flex:"1",alignItems:"center",children:(0,S.jsx)(a.xv,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Legitimate interest"})})]}),r.purposeOverrides.map((function(e,t){return(0,S.jsxs)(a.kC,{width:"100%",height:"36px",alignItems:"center",borderBottom:"solid 1px",borderColor:"gray.200",children:[(0,S.jsxs)(a.kC,{width:"600px",borderLeft:"solid 1px",borderColor:"gray.200",p:0,alignItems:"center",height:"100%",pl:"4",fontSize:"xs",fontWeight:"normal",lineHeight:"4",children:["Purpose ",e.purpose,":"," ",G[e.purpose].name]}),(0,S.jsx)(a.kC,{flex:"1",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px",borderColor:"gray.200",height:"100%",children:(0,S.jsx)(a.xu,{children:(0,S.jsx)(v.w8,{name:"purposeOverrides[".concat(t,"].is_included"),onChange:function(e){e.target.checked||(i("purposeOverrides[".concat(t,"].is_consent"),!1),i("purposeOverrides[".concat(t,"].is_legitimate_interest"),!1))}})})}),(0,S.jsx)(T,{purpose:e.purpose,children:(0,S.jsx)(v.w8,{isDisabled:!r.purposeOverrides[t].is_included||r.purposeOverrides[t].is_legitimate_interest,name:"purposeOverrides[".concat(t,"].is_consent")})}),(0,S.jsx)(T,{purpose:e.purpose,endCol:!0,children:(0,S.jsx)(v.w8,{isDisabled:!r.purposeOverrides[t].is_included||r.purposeOverrides[t].is_consent,name:"purposeOverrides[".concat(t,"].is_legitimate_interest")})})]},e.purpose)}))]})}}),(0,S.jsx)(a.xu,{mt:6,children:(0,S.jsx)(f.zx,{type:"submit",variant:"primary",size:"sm",isDisabled:W||!t||!n,isLoading:W,"data-testid":"save-btn",children:"Save"})})]})}})}):null]})})}},67739:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/consent",function(){return t(10471)}])}},function(e){e.O(0,[7751,6432,3453,6557,9774,2888,179],(function(){return r=67739,e(e.s=r);var r}));var r=e.O();_N_E=r}]);