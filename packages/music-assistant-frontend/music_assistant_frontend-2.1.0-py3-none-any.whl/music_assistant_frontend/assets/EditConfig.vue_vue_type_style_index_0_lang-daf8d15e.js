import{p as le,g as ae,h as K,r as C,c as A,ap as ie,aI as te,l as u,n as Q,F as J,v as ue,aa as se,w as de,y as d,E as h,z as m,A as o,G as W,R as f,N as k,I as R,x as v,B as p,aS as n,aT as M}from"./index-453feba5.js";import{a as oe,b as ne,c as re,d as ve,V as me}from"./VExpansionPanel-c426e156.js";import{S as pe,i as ce,T as be,k as Ve,U as ke,w as ge,j as I,V as he}from"./forwardRefs-f9acddaf.js";import{V as Ce}from"./VForm-1d67b946.js";import{V as $e,b as Ee}from"./VCard-497dacdf.js";import{V as fe}from"./VCardText-b871e0f1.js";/* empty css              */import{h as Se}from"./VMenu-16b4a632.js";import{V as we}from"./VDialog-dafa488d.js";import{m as Ue,d as qe,u as Te,b as X,e as Y,f as Z}from"./VCheckboxBtn-76218fa8.js";import{V as D}from"./VTextField-35dffa69.js";import{V as Ie}from"./VSelect-5d6e6cf5.js";const Ae=Se("v-spacer","div","VSpacer");const Be=le({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ue(),...qe()},"VSwitch"),Re=ae()({name:"VSwitch",inheritAttrs:!1,props:Be(),emits:{"update:focused":s=>!0,"update:modelValue":s=>!0,"update:indeterminate":s=>!0},setup(s,N){let{attrs:B,slots:S}=N;const r=K(s,"indeterminate"),$=K(s,"modelValue"),{loaderClasses:P}=pe(s),{isFocused:L,focus:w,blur:c}=Te(s),x=C(),O=A(()=>typeof s.loading=="string"&&s.loading!==""?s.loading:s.color),G=ie(),z=A(()=>s.id||`switch-${G}`);function y(){r.value&&(r.value=!1)}function j(U){var E,b;U.stopPropagation(),U.preventDefault(),(b=(E=x.value)==null?void 0:E.input)==null||b.click()}return ce(()=>{const[U,E]=te(B),b=X.filterProps(s),V=Y.filterProps(s);return u(X,Q({class:["v-switch",{"v-switch--inset":s.inset},{"v-switch--indeterminate":r.value},P.value,s.class]},U,b,{modelValue:$.value,"onUpdate:modelValue":q=>$.value=q,id:z.value,focused:L.value,style:s.style}),{...S,default:q=>{let{id:l,messagesId:a,isDisabled:t,isReadonly:e,isValid:F}=q;return u(Y,Q({ref:x},V,{modelValue:$.value,"onUpdate:modelValue":[g=>$.value=g,y],id:l.value,"aria-describedby":a.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:t.value,readonly:e.value,onFocus:w,onBlur:c},E),{...S,default:g=>{let{backgroundColorClasses:i,backgroundColorStyles:T}=g;return u("div",{class:["v-switch__track",...i.value],style:T.value,onClick:j},null)},input:g=>{let{inputNode:i,icon:T,backgroundColorClasses:_,backgroundColorStyles:ee}=g;return u(J,null,[i,u("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":T||s.loading},s.inset?void 0:_.value],style:s.inset?void 0:ee.value},[u(be,null,{default:()=>[s.loading?u(ke,{name:"v-switch",active:!0,color:F.value===!1?void 0:O.value},{default:H=>S.loader?S.loader(H):u(ge,{active:H.isActive,color:H.color,indeterminate:!0,size:"16",width:"2"},null)}):T&&u(Ve,{key:T,icon:T,size:"x-small"},null)]})])])}})}})}),{}}}),Ne=p("br",null,null,-1),Pe={class:"configcolumnleft"},Le={key:0},xe=p("br",null,null,-1),Fe=p("br",null,null,-1),De=p("br",null,null,-1),Oe={key:1},Ge=p("br",null,null,-1),ze={key:2},ye=p("br",null,null,-1),je={key:0,class:"configcolumnright"},He=p("br",null,null,-1),Me=p("br",null,null,-1),tl=ue({__name:"EditConfig",props:{configEntries:{},disabled:{type:Boolean}},emits:["submit","action"],setup(s,{emit:N}){const B=s,S=se(),r=C(),$=C(!1),P=C(),L=C("basic"),w=C(!1),c=C(),x=C({}),O=A(()=>r.value?r.value.filter(l=>l.advanced&&!l.hidden).length>0:!1),G=A(()=>O.value?["basic","advanced"]:["basic"]),z=A(()=>{if(r.value){for(const l of r.value)if(l.required&&!(!b(l.value)||!b(l.default_value)||l.type==n.DIVIDER||l.type==n.LABEL))return!1;return!0}return!1});A(()=>{const l={};for(const a of B.configEntries)a.value!=null&&(a.type==n.SECURE_STRING&&a.value==M||(l[a.key]=a.value));return l}),de(()=>B.configEntries,l=>{r.value=[];for(const a of l||[])a.value!==void 0&&a.value!==null&&(x.value[a.key]=a.value),(a.value==null||a.value==null)&&(a.value=a.default_value),r.value.push(a)},{immediate:!0});const y=async function(){const{valid:l}=await P.value.validate();return l},j=async function(){await y()&&N("submit",q())},U=async function(l){N("action",l,q())},E=function(l){window.open(l,"_blank")},b=function(l){return l==null},V=function(l){var a;if(!b(l.depends_on)){const t=(a=r.value)==null?void 0:a.find(e=>e.key==l.depends_on);if(t&&t.required&&b(t)||t&&t.type==n.BOOLEAN&&!t.value)return!0}return!1},q=function(){const l={};for(const a of B.configEntries)a.value==null&&(a.value=null),!(a.type==n.SECURE_STRING&&a.value==M)&&(l[a.key]=a.value);return l};return(l,a)=>(d(),h("section",null,[r.value?(d(),m(Ce,{key:0,ref_key:"form",ref:P,modelValue:$.value,"onUpdate:modelValue":a[2]||(a[2]=t=>$.value=t),style:{"margin-right":"10px"},disabled:l.disabled},{default:o(()=>[u(oe,{modelValue:L.value,"onUpdate:modelValue":a[1]||(a[1]=t=>L.value=t),variant:"accordion",multiple:""},{default:o(()=>[(d(!0),h(J,null,W(G.value,t=>(d(),m(ne,{key:t,value:t},{default:o(()=>[t=="advanced"?(d(),m(re,{key:0},{default:o(()=>[p("h3",null,k(l.$t("settings.advanced_settings")),1)]),_:1})):R("",!0),Ne,u(ve,null,{default:o(()=>[(d(!0),h(J,null,W(r.value.filter(e=>e.advanced==(t=="advanced")&&!e.hidden),e=>{var F,g;return d(),h("div",{key:e.key,class:"configrow"},[p("div",Pe,[e.type==v(n).DIVIDER?(d(),h("div",Le,[xe,u(he),e.label?(d(),m(Z,{key:0,style:{"margin-left":"8px","margin-top":"10px","margin-bottom":"10px"}},{default:o(()=>[p("b",null,k(e.label),1)]),_:2},1024)):R("",!0),Fe,De])):e.type==v(n).LABEL?(d(),h("div",Oe,[Ge,u(Z,{style:{"margin-left":"8px","margin-top":"10px","margin-bottom":"10px"}},{default:o(()=>[f(k(l.$t(`settings.${e.key}`,e.label)),1)]),_:2},1024)])):e.type==v(n).ACTION||e.action&&!e.value?(d(),h("div",ze,[ye,u(I,{class:"actionbutton",disabled:V(e),onClick:i=>{U(e.action||e.key),e.value=e.action?null:e.key}},{default:o(()=>[f(k(l.$t(`settings.${e.action||e.key}`,e.action_label||e.label)),1)]),_:2},1032,["disabled","onClick"])])):e.type==v(n).BOOLEAN?(d(),m(Re,{key:3,modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,label:l.$t(`settings.${e.key}`,e.label),color:"primary",disabled:V(e)},null,8,["modelValue","onUpdate:modelValue","label","disabled"])):(e.type==v(n).INTEGER||e.type==v(n).FLOAT)&&e.range&&e.range.length==2?(d(),m(me,{key:4,modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,disabled:V(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,class:"align-center",min:e.range[0],max:e.range[1],step:e.type==v(n).FLOAT?.5:1,"hide-details":"",style:{"margin-top":"10px","margin-bottom":"25px"},color:"primary"},{append:o(()=>[u(D,{modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","label","required","min","max","step"])):e.type==v(n).SECURE_STRING?(d(),m(D,{key:5,modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,label:l.$t(`settings.${e.key}`,e.label),required:e.required,disabled:V(e),rules:[i=>!(!i&&e.required)||l.$t("settings.invalid_input")],type:w.value?"text":"password","append-inner-icon":w.value?"mdi-eye":typeof e.value=="string"&&e.value.includes(v(M))?"":"mdi-eye-off",variant:"outlined",clearable:"",readonly:!!e.action,"onClick:appendInner":a[0]||(a[0]=i=>w.value=!w.value),"onClick:clear":i=>e.value="#CLEAR#"},null,8,["modelValue","onUpdate:modelValue","label","required","disabled","rules","type","append-inner-icon","readonly","onClick:clear"])):e.options&&e.options.length>0?(d(),m(Ie,{key:6,modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,chips:e.multi_value,clearable:!0,multiple:e.multi_value,items:e.options,disabled:V(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[i=>!(!i&&e.required)||l.$t("settings.invalid_input")],variant:"outlined","onClick:clear":i=>e.value=null},null,8,["modelValue","onUpdate:modelValue","chips","multiple","items","disabled","label","required","rules","onClick:clear"])):e.type==v(n).INTEGER||e.type==v(n).FLOAT?(d(),m(D,{key:7,modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,placeholder:(F=e.default_value)==null?void 0:F.toString(),disabled:V(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[i=>!(!i&&e.required)||l.$t("settings.invalid_input")],variant:"outlined",clearable:!e.required,type:"number","onClick:clear":i=>e.value=null},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","label","required","rules","clearable","onClick:clear"])):(d(),m(D,{key:8,modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,placeholder:(g=e.default_value)==null?void 0:g.toString(),clearable:"",disabled:V(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[i=>!(!i&&e.required)||l.$t("settings.invalid_input")],variant:"outlined",readonly:!!e.action,"onClick:clear":i=>e.value=null},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","label","required","rules","readonly","onClick:clear"]))]),e.description||e.help_link?(d(),h("div",je,[u(I,{icon:"mdi-help-box",variant:"plain",class:"helpicon",size:"x-large",onClick:i=>e.description?c.value=e:E(e.help_link)},null,8,["onClick"])])):R("",!0)])}),128))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),He,u(I,{block:"",color:"primary",disabled:!z.value,onClick:j},{default:o(()=>[f(k(l.$t("settings.save")),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","disabled"])):R("",!0),Me,u(I,{block:"",onClick:a[3]||(a[3]=t=>v(S).back())},{default:o(()=>[f(k(l.$t("close")),1)]),_:1}),u(we,{"model-value":c.value!==void 0,width:"auto","onUpdate:modelValue":a[6]||(a[6]=t=>c.value=void 0)},{default:o(()=>[u($e,null,{default:o(()=>[u(fe,null,{default:o(()=>{var t;return[f(k((t=c.value)==null?void 0:t.description),1)]}),_:1}),u(Ee,null,{default:o(()=>{var t;return[(t=c.value)!=null&&t.help_link?(d(),m(I,{key:0,onClick:a[4]||(a[4]=e=>E(c.value.help_link))},{default:o(()=>[f(k(l.$t("read_more")),1)]),_:1})):R("",!0),u(Ae),u(I,{color:"primary",onClick:a[5]||(a[5]=e=>c.value=void 0)},{default:o(()=>[f(k(l.$t("close")),1)]),_:1})]}),_:1})]),_:1})]),_:1},8,["model-value"])]))}});export{Re as V,tl as _};
