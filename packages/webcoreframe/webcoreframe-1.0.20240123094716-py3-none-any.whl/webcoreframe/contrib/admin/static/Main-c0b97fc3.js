import{_ as $,m as M,e as B,h as E,f as N,g as q,i as z,j as F,k as J,l as K,n as P,p as Q,q as W,A as S,S as A,r as s,o,c as m,a as i,t as p,b as n,w as t,F as g,s as k,v as H,x as _,y as w,d as x,z as X,B as Y,C as Z,D as ee,G as te,u as ne,E as D,H as ae,I as le}from"./index-ff223bd6.js";const oe={data(){return{TableData:void 0}},computed:{isCollapse(){return this.$store.state.AsideCollapse},dashboardData(){return this.TableData.filter(e=>e.langname==="dashboard")},settingsData(){return this.TableData.filter(e=>e.langname==="settings")},dataManageData(){return this.TableData.filter(e=>e.langname==="data_manage")},logData(){return this.TableData.filter(e=>e.langname==="log")}},components:{IconMenu:M,IconEdit:B,IconHouse:E,IconCpu:N,IconMonitor:q,IconFolderOpened:z,IconOperation:F,IconAlarmClock:J,IconUser:K,IconLocation:P,IconHistogram:Q,IconList:W},mounted(){this.handleGetTableData()},methods:{handleRouter(e,a){this.$store.commit("ChangeHeaderList",{name:a,url:e}),this.$router.push(e)},handleGetTableData(){S.get(A.sys_menu,{get_tree:!0}).then(e=>{this.TableData=e.data.data}).catch(e=>{console.log(e)})}}},se={style:{"text-align":"center",height:"1vh"}};function re(e,a,f,y,r,u){const h=s("el-icon"),C=s("el-menu-item"),c=s("el-sub-menu"),v=s("el-menu");return o(),m(g,null,[i("h3",se,p(u.isCollapse?"后台":"后台管理系统"),1),n(v,{"default-active":"1",class:"el-menu-vertical",collapse:u.isCollapse},{default:t(()=>[r.TableData!==void 0?(o(!0),m(g,{key:0},k(u.dashboardData,l=>(o(),_(C,{onClick:d=>u.handleRouter(l.url,l.name),index:l.id,key:l.id},{default:t(()=>[n(h,null,{default:t(()=>[(o(),_(w(l.icon)))]),_:2},1024),i("span",null,p(l.name),1)]),_:2},1032,["onClick","index"]))),128)):H("",!0),r.TableData!==void 0?(o(!0),m(g,{key:1},k(u.settingsData,l=>(o(),_(c,{index:l.id,key:l.id},{title:t(()=>[n(h,null,{default:t(()=>[(o(),_(w(l.icon)))]),_:2},1024),i("span",null,p(l.name),1)]),default:t(()=>[(o(!0),m(g,null,k(l.sub_module,d=>(o(),_(C,{onClick:I=>u.handleRouter(l.url+d.url,`${l.name}/${d.name}`),index:d.id},{default:t(()=>[n(h,null,{default:t(()=>[(o(),_(w(d.icon)))]),_:2},1024),x(" "+p(d.name),1)]),_:2},1032,["onClick","index"]))),256))]),_:2},1032,["index"]))),128)):H("",!0),r.TableData!==void 0?(o(!0),m(g,{key:2},k(u.dataManageData,l=>(o(),_(c,{index:l.id,key:l.id},{title:t(()=>[n(h,null,{default:t(()=>[(o(),_(w(l.icon)))]),_:2},1024),i("span",null,p(l.name),1)]),default:t(()=>[(o(!0),m(g,null,k(l.sub_module,d=>(o(),_(C,{onClick:I=>u.handleRouter(l.url+d.url,`${l.name}/${d.name}`),index:d.id},{default:t(()=>[n(h,null,{default:t(()=>[(o(),_(w(d.icon)))]),_:2},1024),x(" "+p(d.name),1)]),_:2},1032,["onClick","index"]))),256))]),_:2},1032,["index"]))),128)):H("",!0),r.TableData!==void 0?(o(!0),m(g,{key:3},k(u.logData,l=>(o(),_(c,{index:l.id,key:l.id},{title:t(()=>[n(h,null,{default:t(()=>[(o(),_(w(l.icon)))]),_:2},1024),i("span",null,p(l.name),1)]),default:t(()=>[(o(!0),m(g,null,k(l.sub_module,d=>(o(),_(C,{onClick:I=>u.handleRouter(l.url+d.url,`${l.name}/${d.name}`),index:d.id},{default:t(()=>[n(h,null,{default:t(()=>[(o(),_(w(d.icon)))]),_:2},1024),x(" "+p(d.name),1)]),_:2},1032,["onClick","index"]))),256))]),_:2},1032,["index"]))),128)):H("",!0)]),_:1},8,["collapse"])],64)}const de=$(oe,[["render",re],["__scopeId","data-v-cae8e71c"]]),ue=X(),ie=Y(ue);const ce={data(){return{profiledialogVisible:!1,user:void 0,lightSwitch:localStorage.getItem("lightSwitch")==="true"}},components:{Menu:M,Sunny:Z,Moon:ee},watch:{lightSwitch(e,a){localStorage.setItem("lightSwitch",e)}},created(){te.GetUserInfo(this.GetUserInfo)},computed:{HeaderLink(){return this.$store.state.HeaderLink}},methods:{handleAside(){this.$store.commit("ChangeAsideCollapse")},GetUserInfo({data:e}){e.code===200?this.user=e.data:this.$router.push({name:"login"})},handleLogout(){S.post(A.userlogout,{"sign-out":!0}).then(e=>{e.data.code===200?(ne.ClearUserToken(),D({message:"退出成功",type:"success"}),this.$router.push({name:"login"})):D.error(e.data.data)})},handleSwitch(){ie()},handleUploadImg(e){S.post(A.userinfo,{upload_avatar:!0,file:e.file}).then(a=>{a.data.code===200?(this.user.avatar=a.data.data.avatar,D({message:"上传成功",type:"success"})):D.error(a.data.data)})}}},T=e=>(ae("data-v-12b0069d"),e=e(),le(),e),_e={class:"user-profile"},he=T(()=>i("span",null,"用户名：",-1)),me=T(()=>i("span",null,"用户手机：",-1)),pe=T(()=>i("span",null,"用户邮箱：",-1)),fe={class:"dialog-footer"},ge={class:"left-header"},Ce={class:"right-header"},ve={class:"dark-switch"},ke={key:0,class:"user-info"},ye={class:"user-avater"};function be(e,a,f,y,r,u){const h=s("el-avatar"),C=s("el-upload"),c=s("el-col"),v=s("el-row"),l=s("el-button"),d=s("el-dialog"),I=s("Menu"),L=s("el-icon"),O=s("el-breadcrumb-item"),j=s("el-breadcrumb"),U=s("el-switch"),V=s("el-dropdown-item"),G=s("el-dropdown-menu"),R=s("el-dropdown");return o(),m(g,null,[n(d,{modelValue:r.profiledialogVisible,"onUpdate:modelValue":a[1]||(a[1]=b=>r.profiledialogVisible=b),width:"30%","before-close":e.handleClose},{footer:t(()=>[i("span",fe,[n(l,{type:"primary",onClick:a[0]||(a[0]=b=>r.profiledialogVisible=!1)},{default:t(()=>[x(" 确 认 ")]),_:1})])]),default:t(()=>[i("div",_e,[n(v,{justify:"center"},{default:t(()=>[n(c,{span:8,style:{"text-align":"center"}},{default:t(()=>[n(C,{"http-request":u.handleUploadImg,"show-file-list":!1},{default:t(()=>[n(h,{src:r.user.avatar,size:"large"},null,8,["src"])]),_:1},8,["http-request"])]),_:1})]),_:1}),n(v,{justify:"center"},{default:t(()=>[n(c,{span:8,style:{"text-align":"center"}},{default:t(()=>[he,i("span",null,p(r.user.username),1)]),_:1})]),_:1}),n(v,{justify:"center"},{default:t(()=>[n(c,{span:8,style:{"text-align":"center"}},{default:t(()=>[me,i("span",null,p(r.user.phone),1)]),_:1})]),_:1}),n(v,{justify:"center"},{default:t(()=>[n(c,{span:8,style:{"text-align":"center"}},{default:t(()=>[pe,i("span",null,p(r.user.email),1)]),_:1})]),_:1})])]),_:1},8,["modelValue","before-close"]),i("div",ge,[n(L,{onClick:u.handleAside},{default:t(()=>[n(I)]),_:1},8,["onClick"]),n(j,{separator:"/"},{default:t(()=>[(o(!0),m(g,null,k(u.HeaderLink,b=>(o(),_(O,{to:{path:b.url}},{default:t(()=>[x(p(b.name),1)]),_:2},1032,["to"]))),256))]),_:1})]),i("div",Ce,[i("div",ve,[n(U,{modelValue:r.lightSwitch,"onUpdate:modelValue":a[2]||(a[2]=b=>r.lightSwitch=b),onChange:u.handleSwitch,style:{"--el-switch-on-color":"rgb(0, 0, 0)"},"active-action-icon":e.sunny,"inactive-action-icon":e.moon},null,8,["modelValue","onChange","active-action-icon","inactive-action-icon"])]),r.user!==void 0?(o(),m("div",ke,[i("span",ye,[n(R,null,{dropdown:t(()=>[n(G,null,{default:t(()=>[n(V,{onClick:a[3]||(a[3]=b=>r.profiledialogVisible=!0)},{default:t(()=>[x("个人中心")]),_:1}),n(V,{onClick:u.handleLogout},{default:t(()=>[x("退 出")]),_:1},8,["onClick"])]),_:1})]),default:t(()=>[n(h,{src:r.user.avatar},null,8,["src"])]),_:1})]),i("span",null,p(r.user.username),1)])):H("",!0)])],64)}const xe=$(ce,[["render",be],["__scopeId","data-v-12b0069d"]]);const we={computed:{HeaderList(){let e=this.$store.state.HeaderList;return e.forEach(a=>{this.$route.path===a.url?a.color="success":a.color="info"}),e},IndexObj(){return this.$store.state.IndexObject}},methods:{OnClick(e){this.$store.commit("ChangeHeaderList",{name:e.name,url:e.url}),this.$router.push(e.url)},OnClose(e){let a=-1;for(let y=0;y<this.HeaderList.length;y++){const r=this.HeaderList[y];if(r.name===e.name&&r.url===e.url){a=y;break}}let f={};a<this.HeaderList.length-1&&(this.$router.push(this.HeaderList[a+1].url),f.name=this.HeaderList[a+1].name,f.url=this.HeaderList[a+1].url),a===this.HeaderList.length-1&&this.HeaderList.length>1&&(this.$router.push(this.HeaderList[a-1].url),f.name=this.HeaderList[a-1].name,f.url=this.HeaderList[a-1].url),a===0&&this.HeaderList.length===1&&(this.$router.push({name:"index"}),f.name=this.IndexObj.name,f.url=this.IndexObj.url),this.$store.commit("ChangeHeaderLink",f),this.$store.commit("RemoveHeaderList",a)}}},Ie={class:"header"};function He(e,a,f,y,r,u){const h=s("el-button"),C=s("el-tag");return o(),m("div",Ie,[(o(!0),m(g,null,k(u.HeaderList,c=>(o(),_(C,{key:c.name,class:"mx-1",size:"large",closable:"",type:c.color,onClick:v=>u.OnClick(c),onClose:v=>u.OnClose(c)},{default:t(()=>[n(h,{key:"plain",type:"",link:""},{default:t(()=>[x(p(c.name),1)]),_:2},1024)]),_:2},1032,["type","onClick","onClose"]))),128))])}const Le=$(we,[["render",He],["__scopeId","data-v-296829ee"]]);const De={components:{CommonAside:de,CommonHeader:xe,CommonAsideCard:Le}},$e={class:"common-layout"};function Se(e,a,f,y,r,u){const h=s("CommonAside"),C=s("el-aside"),c=s("CommonHeader"),v=s("el-header"),l=s("CommonAsideCard"),d=s("router-view"),I=s("el-main"),L=s("el-container");return o(),m("div",$e,[n(L,null,{default:t(()=>[n(C,{width:"auto"},{default:t(()=>[n(h)]),_:1}),n(L,null,{default:t(()=>[n(v,null,{default:t(()=>[n(c)]),_:1}),i("div",null,[n(l)]),n(I,null,{default:t(()=>[n(d)]),_:1})]),_:1})]),_:1})])}const Te=$(De,[["render",Se],["__scopeId","data-v-72bd50d9"]]);export{Te as default};
