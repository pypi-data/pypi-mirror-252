"use strict";(self.webpackChunkAutoGen_Studio=self.webpackChunkAutoGen_Studio||[]).push([[263],{33311:function(e,t,l){l.d(t,{Z:function(){return x}});var a=l(67294);var r=a.forwardRef((function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))})),n=l(82313);var s=a.forwardRef((function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}));var i=a.forwardRef((function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}));var o=a.forwardRef((function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))})),c=l(63430),m=l(77068),d=l(1642),u=l(15596),v=l(91160);var g=a.forwardRef((function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))}));var p=a.forwardRef((function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}));var h=a.forwardRef((function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"}))})),f=l(89132),E=l(28893);var b=e=>{let{metadata:t}=e;const l=(0,u.RU)(),r=(t.files||[]).map(((e,t)=>a.createElement("div",{key:"metafilesrow"+t,className:"text-primary "},((e,t)=>{const r=e.extension,n=["image"].includes(e.type),s=["code"].includes(e.type),i=["pdf"].includes(e.type),o=["video"].includes(e.type),c=e.name||"unknown",m=e.path||"unknown";let d=null,u=a.createElement("div",null,"image"===e.type?a.createElement(g,{className:"h-4 mr-1 inline-block"}):a.createElement(p,{className:"h-4 mr-1 inline-block"})," ",a.createElement("span",{className:"break-all "},c)," "),v=a.createElement("div",{className:"p-2 bg-secondary rounded flex items-center justify-center   h-full"},a.createElement("div",{className:""},a.createElement("div",{style:{fontSize:"2em"},className:"  text-center mb-2"},e.extension),a.createElement("div",null,u)));return n?(d=a.createElement("div",null,a.createElement("div",{className:"mb-2"},u),a.createElement(f.S3,{src:`${l}/${m}`,className:"w-full rounded"})),v=d):o?(d=a.createElement("div",{className:"mb-2"},u,a.createElement("video",{controls:!0,className:"w-full rounded"},a.createElement("source",{src:`${l}/${m}`,type:`video/${r}`}),"Your browser does not support the video tag.")),v=a.createElement("div",{className:"   relative rounded   h-full"},a.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},u),a.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary h-full w-full rounded  flex items-center justify-center text-primary "},a.createElement(h,{className:"h-14 w-14"})))):s?(d=a.createElement("div",{className:"h"},a.createElement("div",{className:"mb-4"},u),a.createElement(f.Rc,{url:`${l}/${m}`,className:"w-full rounded"})),v=a.createElement("div",{className:"   relative rounded   h-full"},a.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},u),a.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary  h-full w-full rounded  flex items-center justify-center text-primary"},a.createElement(E.Z,{icon:"python",size:14})))):i?(d=a.createElement("div",{className:"h-full"},a.createElement("div",{className:"mb-4"},u),a.createElement(f.Xu,{url:`${l}/${m}`})),v=a.createElement("div",{className:"   relative rounded   h-full"},a.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},u),a.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary h-full w-full rounded  flex items-center justify-center text-primary "},a.createElement(E.Z,{icon:"pdf",size:14})))):d=a.createElement("span",null,"Unsupported file type."),a.createElement("div",{className:"  h-full rounded"},a.createElement(f.HS,{className:"mb-1",icon:v,title:c},d))})(e)))),n=(t.messages||[]).map(((e,t)=>{var l;return a.createElement("div",{className:"borpder-b mb-2 border-dashed",key:"messagerow"+t},a.createElement(f.Rq,{title:a.createElement("div",{className:"rounded p-1 px-2 inline-block text-xs bg-secondary"},a.createElement("span",{className:"font-semibold"},e.sender)," ( to"," ",e.recipient," )"),className:"m"},a.createElement(f.OK,{data:null===(l=e.message)||void 0===l?void 0:l.content,className:"text-sm"})))})),s=r.length>0,i=n.length>0;return a.createElement("div",null,i&&a.createElement("div",{className:"rounded bg-primary p-2"},a.createElement(f.D,{open:!1,title:`Agent Messages (${n.length} message${n.length>1?"s":""}) | ${(0,u.LU)(null==t?void 0:t.time)}`},n)),s&&a.createElement("div",{className:"rounded bg-primary p-2"},a.createElement(f.D,{open:!0,title:`Results (${r.length} file${r.length>1?"s":""})`},a.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},r))))},w=l(30240);var x=e=>{let{initMessages:t,editable:l=!0}=e;const g=(0,w.F)((e=>e.session)),p=a.useRef(null),h=a.useRef(null),{user:E}=a.useContext(v.T),x=(0,u.RU)(),[y,N]=a.useState(!1),[k,j]=a.useState(""),[L,C]=a.useState({status:!0,message:"All good"}),$=(0,w.F)((e=>e.messages)),R=(0,w.F)((e=>e.setMessages)),M=(0,w.F)((e=>e.workflowConfig));let S,z;"undefined"!=typeof window&&(S=window.innerHeight,z=S-350+"px");a.useEffect((()=>{const e=(e=>null==e?void 0:e.map((e=>{let t;try{t=JSON.parse(e.metadata)}catch(l){t=e.metadata}return{text:e.content,sender:"user"===e.role?"user":"bot",metadata:t,msg_id:e.msg_id}})))(t);R(e)}),[t]);const H=u.ae.map(((e,t)=>a.createElement(c.ZP,{key:"prompt"+t,type:"primary",className:"",onClick:()=>{Z(e.prompt)}}," ",e.title," "))),O=null==$?void 0:$.map(((e,t)=>{const n="user"===e.sender,s=n?"bg-accent text-white  ":"bg-light";let i=!1;var o,c,d;e.metadata&&(i=null!==e.metadata.code||(null===(o=e.metadata.images)||void 0===o?void 0:o.length)>0||(null===(c=e.metadata.files)||void 0===c?void 0:c.length)>0||(null===(d=e.metadata.scripts)||void 0===d?void 0:d.length)>0);let u=[];n&&u.push({label:a.createElement("div",{onClick:()=>{console.log("retrying"),Z(e.text)}},a.createElement(r,{role:"button",title:"Retry",className:"h-4 w-4 mr-1 inline-block"}),"Retry"),key:"retrymessage"});const v=a.createElement(m.Z,{menu:{items:u},trigger:["click"],placement:"bottomRight"},a.createElement("div",{role:"button",className:"float-right ml-2 duration-100 hover:bg-secondary font-semibold px-2 pb-1  rounded"},a.createElement("span",{className:"block -mt-2  "}," ...")));return a.createElement("div",{className:`align-right ${n?"text-righpt":""}  mb-2 border-b`,key:"message"+t}," ",a.createElement("div",{className:`  ${n?"":" w-full"} inline-flex gap-2`},a.createElement("div",{className:""}," "),a.createElement("div",{className:"font-semibold text-secondary text-sm w-16"},""+(n?"USER":"AGENTS")),a.createElement("div",{className:`inline-block group relative ${n?"":" w-full "} p-2 rounded  ${s}`}," ",u.length>0&&l&&a.createElement("div",{className:" group-hover:opacity-100 opacity-0 "},v),n&&a.createElement(a.Fragment,null,a.createElement("div",{className:"inline-block"},e.text)),!n&&a.createElement("div",{className:" w-full chatbox prose dark:prose-invert text-primary rounded "},a.createElement(f.OK,{className:"text-sm",data:e.text,showCode:!1})),e.metadata&&a.createElement("div",{className:""},a.createElement(b,{metadata:e.metadata})))))}));a.useEffect((()=>{setTimeout((()=>{I()}),200)}),[$]);const _="50px";a.useEffect((()=>{!1===y&&p.current&&p.current&&(null===L||L&&!1===L.status)&&(p.current.value="",p.current.style.height=_)}),[y]),a.useEffect((()=>{if(p.current){p.current.style.height=_;const e=p.current.scrollHeight;p.current.style.height=`${e}px`}}),[k]);const I=()=>{var e;null===(e=h.current)||void 0===e||e.scroll({top:h.current.scrollHeight,behavior:"smooth"})},Z=e=>{C(null);let t=Object.assign([],$);const l={text:e,sender:"user",msg_id:(0,u.M8)()};t.push(l),R(t);const a={role:"user",content:e,msg_id:l.msg_id,user_id:(null==E?void 0:E.email)||"",root_msg_id:"0",session_id:(null==g?void 0:g.id)||""},r=`${x}/messages`,n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({message:a,flow_config:M})};N(!0),fetch(r,n).then((e=>{N(!1),200===e.status?e.json().then((e=>{if(e&&e.status){const l={text:e.message,sender:"bot",metadata:e.metadata,msg_id:e.msg_id};t.push(l),t=Object.assign([],t),R(t)}else console.log("error",e),d.ZP.error(e.message)})):(e.json().then((e=>{console.log("error",e),d.ZP.error(e.message)})),d.ZP.error("Connection error. Ensure server is up and running."))})).catch((()=>{N(!1),d.ZP.error("Connection error. Ensure server is up and running.")}))};return a.createElement("div",{className:"text-primary    relative  h-full rounded  "},a.createElement("div",{style:{zIndex:100},className:" absolute right-0  text-secondary -top-8 rounded p-2"}," ",a.createElement("div",{className:"text-xs"}," ",null==g?void 0:g.flow_config.name)),a.createElement("div",{ref:h,className:"flex h-full     flex-col rounded  scroll pr-2 overflow-auto  ",style:{minHeight:"300px",maxHeight:z}},a.createElement("div",{className:"scroll-gradient h-10"}," ",a.createElement("span",{className:"  inline-block h-6"})," "),a.createElement("div",{className:"flex-1  boder mt-4"}),!$&&null!==$&&a.createElement("div",{className:"w-full text-center boder mt-4"},a.createElement("div",null," ",a.createElement(f.F8,null)),"loading messages"),$&&0===(null==$?void 0:$.length)&&a.createElement("div",{className:"ml-2 text-sm text-secondary "},a.createElement(n.Z,{className:"inline-block h-6 mr-2"}),"No messages in the current session. Start a conversation to begin."),a.createElement("div",{className:"ml-2"}," ",O),a.createElement("div",{className:"ml-2 h-6   mb-4 mt-2   "},y&&a.createElement(f.F8,null))),l&&a.createElement("div",{className:"mt-2 p-2 absolute   bg-primary  bottom-0 w-full"},a.createElement("div",{className:"rounded p-2 shadow-lg flex mb-1  gap-2 "+(y?" opacity-50 pointer-events-none":"")},a.createElement("form",{autoComplete:"on",className:"flex-1 relative",onSubmit:e=>{e.preventDefault()}},a.createElement("textarea",{id:"queryInput",name:"queryInput",autoComplete:"on",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||p.current&&!y&&(e.preventDefault(),Z(p.current.value))},onChange:e=>{j(e.target.value)},placeholder:"Write message here...",ref:p,className:"flex items-center w-full resize-none text-gray-600 bg-white p-2 ring-2 rounded-sm pl-5 pr-16",style:{maxHeight:"120px",overflowY:"auto"}}),a.createElement("div",{role:"button",style:{width:"45px",height:"35px"},title:"Send message",onClick:()=>{p.current&&!y&&Z(p.current.value)},className:"absolute right-3 bottom-2 bg-accent hover:brightness-75 transition duration-300 rounded cursor-pointer flex justify-center items-center"}," ",!y&&a.createElement("div",{className:"inline-block  "},a.createElement(s,{className:"h-6 w-6 text-white "})," "),y&&a.createElement("div",{className:"inline-block   "},a.createElement(i,{className:"text-white animate-spin rounded-full h-6 w-6"})))))," ",a.createElement("div",null,a.createElement("div",{className:"mt-2 text-xs text-secondary"},"Blank slate? Try one of the example prompts below"," "),a.createElement("div",{className:"mt-2 inline-flex gap-2 flex-wrap  "+(y?"brightness-75 pointer-events-none":"")},H)),L&&!L.status&&a.createElement("div",{className:"p-2 border rounded mt-4 text-orange-500 text-sm"}," ",a.createElement(o,{className:"h-5 text-orange-500 inline-block mr-2"})," ",L.message)))}},51446:function(e,t,l){var a=l(67294);const r=a.forwardRef((function({title:e,titleId:t,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},l),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}));t.Z=r}}]);
//# sourceMappingURL=6c05b3ab656a8bfc225a64b3d73a36a92f83c05e-cd604bbac19007063e65.js.map