import{defineComponent as B,computed as C,openBlock as l,createElementBlock as u,createElementVNode as a,withModifiers as w,toDisplayString as f,normalizeClass as A,Fragment as h,renderList as b,resolveComponent as N,createBlock as L,withCtx as Z,unref as x,ref as m,createTextVNode as P,createCommentVNode as _}from"vue";import{ContentLoader as ee}from"vue-content-loader";function kn(){import("data:text/javascript,")}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const T=3;function M(e,n=1){return[...Array(e).keys()].map(t=>t+n)}function ne(e){return M(e)}function te(e,n){return Math.min(T*2+1,e.length-2,T+n-1,T+e.length-n)}function re(e){return Math.max(e-T,2)}function oe(e,n){const t=ne(n),r=re(e);if(n<=2)return[];let o=M(te(t,e),r);return o.includes(2)||o.unshift(null),o.includes(n-1)||o.push(null),o}const U=(e,n)=>{const t=e.__vccOpts||e;for(const[r,o]of n)t[r]=o;return t},ae=B({props:{page:{type:Number,default:1},changePage:{type:Function,required:!0},pageSize:{type:Number,default:20},totalResults:{type:Number,required:!0}},setup(e){const n=C(()=>Math.ceil(e.totalResults/e.pageSize)),t=C(()=>oe(e.page,n.value));return{pageCount:n,visiblePages:t,onClick:i=>{if(i!==e.page)return e.changePage(i)},nextPage:()=>{const i=e.page+1;if(i<=n.value)return e.changePage(i)},previousPage:()=>{const i=e.page-1;if(i>0)return e.changePage(i)}}}}),ie={role:"navigation",class:"fr-pagination fr-pagination--centered","aria-label":"Pagination"},se={class:"fr-pagination__list"},le=["href"],ue=["href"],ce=["aria-current","href","title"],de=["aria-current","href","title","onClick","data-page"],fe={key:1,class:"fr-pagination__link fr-hidden fr-unhidden-lg"},pe=["aria-current","href","title","data-page"],ge=["href"],me=["href"];function he(e,n,t,r,o,s){return l(),u("nav",ie,[a("ul",se,[a("li",null,[a("a",{href:e.page===1?void 0:"#",class:"fr-pagination__link fr-pagination__link--first",onClick:n[0]||(n[0]=w(i=>e.onClick(1),["prevent"]))},f(e.$t("First page")),9,le)]),a("li",null,[a("a",{href:e.page===1?void 0:"#",class:"fr-pagination__link fr-pagination__link--prev fr-pagination__link--lg-label",onClick:n[1]||(n[1]=w((...i)=>e.previousPage&&e.previousPage(...i),["prevent"]))},f(e.$t("Previous page")),9,ue)]),a("li",null,[a("a",{"aria-current":e.page===1?"page":void 0,href:e.page===1?void 0:"#",class:A(["fr-pagination__link",{"fr-hidden fr-unhidden-sm":e.page>1}]),title:e.$t("Page",{nb:1}),onClick:n[2]||(n[2]=w(i=>e.onClick(1),["prevent"])),"data-page":1}," 1 ",10,ce)]),(l(!0),u(h,null,b(e.visiblePages,i=>(l(),u("li",null,[i?(l(),u("a",{key:0,class:A(["fr-pagination__link",{"fr-hidden fr-unhidden-lg":i<e.page-1||i>e.page+1}]),"aria-current":e.page===i?"page":void 0,href:e.page===i?void 0:"#",title:e.$t("Page",{nb:i}),onClick:w(c=>e.onClick(i),["prevent"]),"data-page":i},f(i),11,de)):(l(),u("a",fe," \u2026 "))]))),256)),a("li",null,[a("a",{class:"fr-pagination__link","aria-current":e.page===e.pageCount?"page":void 0,href:e.page===e.pageCount?void 0:"#",title:e.$t("Page",{nb:e.pageCount}),onClick:n[3]||(n[3]=w(i=>e.onClick(e.pageCount),["prevent"])),"data-page":e.pageCount},f(e.pageCount),9,pe)]),a("li",null,[a("a",{class:"fr-pagination__link fr-pagination__link--next fr-pagination__link--lg-label",href:e.page===e.pageCount?void 0:"#",onClick:n[4]||(n[4]=w((...i)=>e.nextPage&&e.nextPage(...i),["prevent"]))},f(e.$t("Next page")),9,ge)]),a("li",null,[a("a",{class:"fr-pagination__link fr-pagination__link--last",href:e.page===e.pageCount?void 0:"#",onClick:n[5]||(n[5]=w(i=>e.onClick(e.pageCount),["prevent"]))},f(e.$t("Last page")),9,me)])])])}const _e=U(ae,[["render",he]]);var G;const k=(G=globalThis.udata_front)!=null?G:{components:{},translations:[]};function F(e,n,t,r){k.components[e]||(k.components[e]=[]);const o={component:n,hook:e,module:t,name:r};return k.components[e].push(o),o}function ye(e,n){const t={messages:e,module:n};return k.translations.push(t),t}globalThis.udata_front=k;const ve=B({components:{ContentLoader:ee},setup(){return{getY(e){return 16+4+e*(16*2+24)}}}}),ze=a("rect",{x:"16",y:"16",rx:"4",ry:"4",width:"112",height:"24"},null,-1),we=a("rect",{x:"160",y:"16",rx:"4",ry:"4",width:"116",height:"24"},null,-1),$e=a("rect",{x:"308",y:"16",rx:"4",ry:"4",width:"140",height:"24"},null,-1),be=a("rect",{x:"480",y:"16",rx:"4",ry:"4",width:"106",height:"24"},null,-1),Pe=a("rect",{x:"618",y:"16",rx:"4",ry:"4",width:"140",height:"24"},null,-1),ke=a("rect",{x:"790",y:"16",rx:"4",ry:"4",width:"144",height:"24"},null,-1),Ce=a("rect",{x:"966",y:"16",rx:"4",ry:"4",width:"142",height:"24"},null,-1),Ee=a("rect",{x:"4",y:"56",rx:"4",ry:"4",width:"1116",height:"4"},null,-1),Se=["y"],Te=["y"],Ne=["y"],Le=["y"],De=["y"],Be=["y"],Ue=["y"];function Re(e,n,t,r,o,s){const i=N("ContentLoader");return l(),L(i,{width:1124,height:300,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:Z(()=>[ze,we,$e,be,Pe,ke,Ce,Ee,(l(),u(h,null,b(5,c=>(l(),u(h,null,[a("rect",{x:"16",y:e.getY(c),rx:"4",ry:"4",width:"112",height:"32"},null,8,Se),a("rect",{x:"160",y:e.getY(c),rx:"4",ry:"4",width:"116",height:"32"},null,8,Te),a("rect",{x:"308",y:e.getY(c),rx:"4",ry:"4",width:"140",height:"32"},null,8,Ne),a("rect",{x:"480",y:e.getY(c),rx:"4",ry:"4",width:"106",height:"32"},null,8,Le),a("rect",{x:"618",y:e.getY(c),rx:"4",ry:"4",width:"140",height:"32"},null,8,De),a("rect",{x:"790",y:e.getY(c),rx:"4",ry:"4",width:"144",height:"32"},null,8,Be),a("rect",{x:"966",y:e.getY(c),rx:"4",ry:"4",width:"142",height:"32"},null,8,Ue)],64))),64))]),_:1})}const V=U(ve,[["render",Re]]);let d={csvapiUrl:null,dataEndpoint:null,filters:[],page:1,pageSize:10,sortBy:null,sortDesc:!1,totalRows:0};function D(e){d={...d,...e}}function Ie(e){if(d.page=e,d.page-1<=d.totalRows/d.pageSize)return O("page")}function je(e,n=!1){return d.sortBy=e,d.sortDesc=n,O("sort")}function qe(e){let n=0;if(e&&e==="page"?n=d.pageSize*(d.page-1):d.page=1,!d.dataEndpoint)throw Error("No dataEndpoint configured. Use configure() before to add it.");const t=new URL(d.dataEndpoint);if(t.searchParams.set("_shape","objects"),t.searchParams.set("_rowid","hide"),t.searchParams.set("_size",d.pageSize.toString()),t.searchParams.set("_offset",n.toString()),d.filters.forEach(({field:r,value:o,comp:s})=>{t.searchParams.set(`${r}__${s}`,o)}),d.sortBy){const r=d.sortDesc?"_sort_desc":"_sort";t.searchParams.set(r,d.sortBy)}return t}function O(e){const n=qe(e);return fetch(n.toString()).then(t=>{const r=t.json();return t.ok||Promise.reject(r),r})}function Ae(e){if(!d.csvapiUrl)throw Error("No csvapiUrl configured. Use configure() before to add it.");const n=new URL(d.csvapiUrl);return n.pathname="/apify",n.searchParams.set("url",encodeURI(e)),n.searchParams.set("analysis","yes"),fetch(n.toString()).then(t=>{const r=t.json();return t.ok||Promise.reject(r),r})}function Oe(e,n){const t=document.querySelector(e);return t?t.getAttribute(n):null}function K(e){return Oe(`meta[name=${e}]`,"content")}const Ye=K("tabular-csvapi-url"),q=K("tabular-page-size"),Y=new Map;function Ge(e,n){let t;if(t=Y.get(e))return t;D(n);const r=Ae(e).then(o=>{if(o.ok)return n.dataEndpoint=o.endpoint,D(n),{endpoint:o.endpoint,data:O("apify")};throw new Error("Got 200 but result isn't ok")});return Y.set(e,r),r}function H(e){e=x(e);const n=m([]),t=m({}),r=m([]),o=m(null),s=m(!0),i=m(null),c=m(!1),g=m(1),y=m(0),E=m(null),S=Number.parseInt(q!=null?q:"10"),z=m(null),v=m(!1),R=C(()=>({csvapiUrl:Ye,dataEndpoint:E.value,filters:[],page:g.value,pageSize:S,sortBy:z.value,sortDesc:v.value,totalRows:y.value})),I=p=>(p.ok?(r.value=p.rows,n.value=p.columns,t.value=p.columns_infos,i.value=p.general_infos,y.value=p.total,o.value=p.columns.length):c.value=!0,p.ok),j=()=>(c.value=!0,!1),J=p=>{D(R.value);const $=Ie(p);$&&$.then(I).catch(j).finally(()=>s.value=!1),g.value=p},Q=p=>(z.value==p?v.value=!v.value:v.value=!1,z.value=p,D(R.value),je(z.value,v.value).then($=>{I($),g.value=1}).catch(j).finally(()=>s.value=!1)),W=p=>p===z.value,X=C(()=>i.value?i.value.filetype==="excel":!1);return{apifyAndGetData:()=>Ge(e.url,R.value).then(({endpoint:p,data:$})=>(E.value=p,$)).then(I).catch(j).finally(()=>{s.value=!1}),changePage:J,columns:n,columnCount:o,columnsInfos:t,currentPage:g,generalInfos:i,hasError:c,isExcel:X,isSortedBy:W,loading:s,pageSize:S,rows:r,rowCount:y,sortbyfield:Q,sortDesc:v}}const Me=B({components:{Loader:V},props:{resource:{type:Object,required:!0}},setup(e){const{apifyAndGetData:n,columns:t,columnsInfos:r,generalInfos:o,hasError:s,isExcel:i,loading:c}=H(e.resource),g=C(()=>Object.keys(r.value).length>0);return n(),{columns:t,columnsInfos:r,generalInfos:o,hasColumnInfos:g,hasError:s,isExcel:i,loading:c}}}),Fe={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mb-2w"},Ve={class:"fr-grid-row fr-m-0"},Ke=a("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1),He={key:2,class:"fr-grid-row fr-grid-row--gutters"},Je={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mb-2w"},Qe={class:"fr-grid-row fr-m-0"},We=a("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1),Xe={key:1,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mb-2w"},Ze={class:"fr-grid-row fr-m-0"},xe=a("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1),en={class:"fr-col-12 fr-col-sm-6 fr-col-md-4 fr-col-lg-3"},nn={class:"fr-text--sm fr-text--bold fr-mt-0 fr-mb-1v"},tn={class:"code"};function rn(e,n,t,r,o,s){const i=N("Loader");return l(),u(h,null,[e.hasError?(l(),u("div",Fe,[a("p",Ve,[Ke,P(" "+f(e.$t("The data structure of this file failed to load.")),1)])])):_("",!0),e.loading?(l(),L(i,{key:1})):_("",!0),!e.hasError&&!e.loading?(l(),u("div",He,[e.isExcel?(l(),u("div",Je,[a("p",Qe,[We,P(" "+f(e.$t("This is an Excel file, analysis on this type of files are limited.")),1)])])):e.hasColumnInfos?_("",!0):(l(),u("div",Xe,[a("p",Ze,[xe,P(" "+f(e.$t("No data structure found for this file.")),1)])])),e.hasColumnInfos?(l(!0),u(h,{key:2},b(e.columns,c=>(l(),u("div",en,[a("h5",nn,f(c),1),a("code",tn,f(e.columnsInfos[c].format),1)]))),256)):_("",!0)])):_("",!0)],64)}const on=U(Me,[["render",rn]]),an=B({components:{Loader:V,Pagination:_e},props:{resource:{type:Object,required:!0}},setup(e){const{apifyAndGetData:n,changePage:t,columns:r,columnCount:o,currentPage:s,hasError:i,isSortedBy:c,loading:g,pageSize:y,rows:E,rowCount:S,sortbyfield:z,sortDesc:v}=H(e.resource);return n(),{changePage:t,columns:r,columnCount:o,currentPage:s,hasError:i,isSortedBy:c,loading:g,pageSize:y,rows:E,rowCount:S,sortbyfield:z,sortDesc:v}}}),sn={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-mt-4w fr-mx-4w fr-mb-3v"},ln={class:"fr-grid-row fr-m-0"},un=a("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1),cn={class:"fr-table fr-table--no-background fr-p-0 fr-pt-0-5v fr-m-0"},dn={class:"fr-mb-3w"},fn={class:"fr-sr-only"},pn={scope:"col"},gn={class:"fr-grid-row fr-grid-row--middle no-wrap"},mn=["onClick"],hn={class:"fr-sr-only"},_n={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle fr-px-5v"},yn={class:"fr-col"},vn={class:"fr-col-auto"},zn=["href"];function wn(e,n,t,r,o,s){const i=N("Loader"),c=N("Pagination");return l(),u(h,null,[e.hasError?(l(),u("div",sn,[a("p",ln,[un,P(" "+f(e.$t("The preview of this file failed to load.")),1)])])):_("",!0),e.loading?(l(),L(i,{key:1})):_("",!0),!e.hasError&&!e.loading?(l(),u(h,{key:2},[a("div",cn,[a("table",dn,[a("caption",fn,f(e.$t("Preview of {name}",{name:e.resource.title})),1),a("thead",null,[a("tr",null,[(l(!0),u(h,null,b(e.columns,g=>(l(),u("th",pn,[a("div",gn,[a("button",{class:A(["fr-btn fr-btn--sm fr-btn--tertiary-no-outline fr-my-n1w",{"fr-btn--secondary-grey-500":!e.isSortedBy(g),"fr-btn--icon-right":e.isSortedBy(g),"fr-icon-arrow-down-line":e.isSortedBy(g)&&e.sortDesc,"fr-icon-arrow-up-line":e.isSortedBy(g)&&!e.sortDesc}]),onClick:y=>e.sortbyfield(g)},[P(f(g)+" ",1),a("span",hn,f(e.sortDesc?e.$t("Sort ascending"):e.$t("Sort descending")),1)],10,mn)])]))),256))])]),a("tbody",null,[(l(!0),u(h,null,b(e.rows,g=>(l(),u("tr",null,[(l(!0),u(h,null,b(e.columns,y=>(l(),u("td",null,f(g[y]),1))),256))]))),256))])])]),e.rowCount>e.pageSize?(l(),L(c,{key:0,class:"fr-mt-3w",page:e.currentPage,pageSize:e.pageSize,totalResults:e.rowCount,changePage:e.changePage},null,8,["page","pageSize","totalResults","changePage"])):_("",!0),a("div",_n,[a("div",yn,f(e.$t("{count} columns",e.columnCount))+" \u2014 "+f(e.$t("{count} rows",e.rowCount)),1),a("div",vn,[a("a",{href:e.resource.preview_url,class:"fr-btn fr-btn--icon-left fr-icon-test-tube-line"},f(e.$t("Explore data")),9,zn)])])],64)):_("",!0)],64)}const $n=U(an,[["render",wn]]),bn={en:{"Preview of {name}":e=>{const{normalize:n,interpolate:t,named:r}=e;return n(["Preview of ",t(r("name"))])},"{count} columns":e=>{const{normalize:n,interpolate:t,named:r,plural:o}=e;return o([n([t(r("count"))," columns"]),n([t(r("count"))," column"]),n([t(r("count"))," columns"])])},"Explore data":e=>{const{normalize:n}=e;return n(["Explore data"])},"The preview of this file failed to load.":e=>{const{normalize:n}=e;return n(["The preview of this file failed to load."])},"{count} rows":e=>{const{normalize:n,interpolate:t,named:r,plural:o}=e;return o([n([t(r("count"))," rows"]),n([t(r("count"))," row"]),n([t(r("count"))," rows"])])},"Sort ascending":e=>{const{normalize:n}=e;return n(["Sort ascending"])},"Sort descending":e=>{const{normalize:n}=e;return n(["Sort descending"])},"The data structure of this file failed to load.":e=>{const{normalize:n}=e;return n(["The data structure of this file failed to load."])},"This is an Excel file, analysis on this type of files are limited.":e=>{const{normalize:n}=e;return n(["This is an Excel file, analysis on this type of files are limited."])},"No data structure found for this file.":e=>{const{normalize:n}=e;return n(["No data structure found for this file."])}},es:{"Preview of {name}":e=>{const{normalize:n}=e;return n([])},"{count} columns":e=>{const{normalize:n}=e;return n([])},"Explore data":e=>{const{normalize:n}=e;return n([])},"The preview of this file failed to load.":e=>{const{normalize:n}=e;return n([])},"{count} rows":e=>{const{normalize:n}=e;return n([])},"Sort ascending":e=>{const{normalize:n}=e;return n([])},"Sort descending":e=>{const{normalize:n}=e;return n([])},"The data structure of this file failed to load.":e=>{const{normalize:n}=e;return n([])},"This is an Excel file, analysis on this type of files are limited.":e=>{const{normalize:n}=e;return n([])},"No data structure found for this file.":e=>{const{normalize:n}=e;return n([])}},fr:{"Preview of {name}":e=>{const{normalize:n,interpolate:t,named:r}=e;return n(["Pr\xE9visualisation de ",t(r("name"))])},"{count} columns":e=>{const{normalize:n,interpolate:t,named:r,plural:o}=e;return o([n([t(r("count"))," colonnes"]),n([t(r("count"))," colonne"]),n([t(r("count"))," colonnes"])])},"Explore data":e=>{const{normalize:n}=e;return n(["Explorer les donn\xE9es"])},"The preview of this file failed to load.":e=>{const{normalize:n}=e;return n(["La pr\xE9visualisation de ce fichier n'a pas pu \xEAtre charg\xE9e."])},"{count} rows":e=>{const{normalize:n,interpolate:t,named:r,plural:o}=e;return o([n([t(r("count"))," lignes"]),n([t(r("count"))," ligne"]),n([t(r("count"))," lignes"])])},"Sort ascending":e=>{const{normalize:n}=e;return n(["Trier par ordre croissant"])},"Sort descending":e=>{const{normalize:n}=e;return n(["Trier par ordre d\xE9croissant"])},"The data structure of this file failed to load.":e=>{const{normalize:n}=e;return n(["La structure de donn\xE9es de ce fichier n'a pas pu \xEAtre charg\xE9e."])},"This is an Excel file, analysis on this type of files are limited.":e=>{const{normalize:n}=e;return n(["Il s'agit d'un fichier Excel, l'analyse sur ce type de fichiers est limit\xE9e."])},"No data structure found for this file.":e=>{const{normalize:n}=e;return n(["Aucune structure de donn\xE9es trouv\xE9e pour ce fichier."])}},it:{"Preview of {name}":e=>{const{normalize:n}=e;return n([])},"{count} columns":e=>{const{normalize:n}=e;return n([])},"Explore data":e=>{const{normalize:n}=e;return n([])},"The preview of this file failed to load.":e=>{const{normalize:n}=e;return n([])},"{count} rows":e=>{const{normalize:n}=e;return n([])},"Sort ascending":e=>{const{normalize:n}=e;return n([])},"Sort descending":e=>{const{normalize:n}=e;return n([])},"The data structure of this file failed to load.":e=>{const{normalize:n}=e;return n([])},"This is an Excel file, analysis on this type of files are limited.":e=>{const{normalize:n}=e;return n([])},"No data structure found for this file.":e=>{const{normalize:n}=e;return n([])}},sr:{"Preview of {name}":e=>{const{normalize:n}=e;return n([])},"{count} columns":e=>{const{normalize:n}=e;return n([])},"Explore data":e=>{const{normalize:n}=e;return n([])},"The preview of this file failed to load.":e=>{const{normalize:n}=e;return n([])},"{count} rows":e=>{const{normalize:n}=e;return n([])},"Sort ascending":e=>{const{normalize:n}=e;return n([])},"Sort descending":e=>{const{normalize:n}=e;return n([])},"The data structure of this file failed to load.":e=>{const{normalize:n}=e;return n([])},"This is an Excel file, analysis on this type of files are limited.":e=>{const{normalize:n}=e;return n([])},"No data structure found for this file.":e=>{const{normalize:n}=e;return n([])}}};F("explore",$n,"udata-tabular-preview","explore");F("data-structure",on,"udata-tabular-preview","data-structure");ye(bn,"udata-tabular-preview");export{kn as __vite_legacy_guard};
