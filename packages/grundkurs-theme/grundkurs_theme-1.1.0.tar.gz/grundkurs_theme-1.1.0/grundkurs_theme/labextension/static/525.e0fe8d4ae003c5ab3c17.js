"use strict";(self.webpackChunkgrundkurs_theme=self.webpackChunkgrundkurs_theme||[]).push([[525],{525:(e,t,n)=>{n.r(t),n.d(t,{ContentFactoryWithFooterFeedback:()=>k,default:()=>b});var r=n(123),o=n(29),a=n.n(o);const s=({submit:e})=>{const[t,n]=(0,o.useState)(0),[r,s]=(0,o.useState)(!1),[c,l]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{c&&setTimeout((()=>{l(!1)}),5e3)}),[c]),a().createElement(a().Fragment,null,a().createElement("details",{className:"gk-cell-feedback-container"},a().createElement("summary",null,"Feedback?",a().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},a().createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))),a().createElement("div",{className:"rating"},["ðŸ˜œ","ðŸ˜›","ðŸ™‚","ðŸ˜•","ðŸ˜–"].map(((e,t)=>a().createElement("span",{onClick:()=>(e=>{n(e+1),s(!0)})(t),style:{margin:"10px"}},e)))),r&&a().createElement("div",{style:{display:"flex",flexDirection:"column",width:"280px",justifyContent:"space-around"}},a().createElement("div",{className:"submitted-message"},a().createElement("b",null,"You: "),a().createElement("span",null,"The exercise was ",a().createElement("b",null,["too easy","easy","good","hard","too hard"][t-1])),a().createElement("button",{className:"submit-button",onClick:()=>(async()=>{console.log(`Rating submitted: ${t}`),s(!1),e(t).then((()=>l(!0))).catch((e=>console.error(e)))})()},"Submit"))),c&&a().createElement("div",{className:"submitted-message"},a().createElement("b",null,"Us:")," Thank you for submitting your feedback ðŸ™")),a().createElement("hr",null))};class c extends r.ReactWidget{constructor(e){super(),this.commands=e}render(){var e;return(null===(e=this.parent.model.sharedModel.getMetadata().tags)||void 0===e?void 0:e.includes("exercise"))?a().createElement(s,{submit:e=>this.commands.execute("grundkurs:send-feedback",{value:e})}):a().createElement(a().Fragment,null)}}var l=n(605),i=n(801),u=n(678),d=n(108),m=n(737);const g="grundkurs_theme:plugin",h={id:g,autoStart:!0,requires:[l.INotebookTracker,r.IThemeManager,i.ISettingRegistry],activate:(e,t,n,r)=>{const{commands:o,shell:a}=e;let s="";function c(e){s=e.get("url").composite}Promise.all([e.restored,r.load(g)]).then((([,e])=>{c(e),e.changed.connect(c),o.addCommand("grundkurs:send-feedback",{label:"Send feedback for this assignment",execute:async e=>{const n=function(e,t,n){const r=e.currentWidget;return!1!==n.activate&&r&&t.activateById(r.id),r}(t,a,e);if(n&&n.content.activeCell){const t=n.content.activeCell.model.id,r=e.value,o={cellId:t,url:s,value:r};try{await async function(e="",t={}){const n=m.ServerConnection.makeSettings(),r=d.URLExt.join(n.baseUrl,"grundkurs_theme",e);let o;try{o=await m.ServerConnection.makeRequest(r,t,n)}catch(e){throw new m.ServerConnection.NetworkError(e)}const a=await o.json();if(!o.ok)throw new m.ServerConnection.ResponseError(o,a.message);return a}("feedback",{body:JSON.stringify(o),method:"POST"})}catch(e){console.error(`Error on POST /feedback ${o}.\n${e}`)}}}})})),console.log("JupyterLab extension grundkurs_theme is activated!"),n.register({name:"grundkurs_theme",isLight:!0,load:()=>n.loadCSS("grundkurs_theme/index.css"),unload:()=>Promise.resolve(void 0)})}};class k extends l.NotebookPanel.ContentFactory{constructor(e,t){super(t),this.commands=e}createCellFooter(){return new c(this.commands)}}const b=[h,{id:"jupyterlab-cellcodebtn:factory",provides:l.NotebookPanel.IContentFactory,requires:[u.IEditorServices],autoStart:!0,activate:(e,t)=>{console.log("JupyterLab extensionn grundkurs_theme","overrides default nootbook content factory");const{commands:n}=e,r=t.factoryService.newInlineEditor;return new k(n,{editorFactory:r})}}]}}]);