import{_ as e,y as a,G as l,c as s,h as n,X as t,o as r,a as o,g as i,f as u,b as c,I as v,A as f,e as g,t as d,N as p,W as x,n as m}from"./index-khtEKB45.js";import{_ as h}from"./SLLoading-vdw4_byl.js";import{F as y}from"./FuncBar-FVg9Mi0H.js";const w={class:"w-full h-full px-7 py-6 relative overflow-hidden"},k={class:"log-container"},_={class:"w-8 text-right flex-shrink-0 text-dimmest select-none"},b={class:"w-8 text-right flex-shrink-0 select-none"},L={key:1,class:"flex h-full items-center justify-center"},j=e({__name:"LogPage",setup(e){const j=a(),T=l().id,C=a(),I=s((()=>C.value.map((e=>{const a=e.substring(0,e.indexOf(" ")),l=e.substring(e.indexOf(" ")),s=""!==F.value&&l.toLowerCase().includes(F.value);return{isTarget:s,index:a,value:s?$(l,F.value):l}}))));function $(e,a){let l=e.split(new RegExp(`(${a})`,"i"));return l=l.filter((e=>""!==e)),l}const A=a([]);!async function(){const{data:e}=await n.get(`/experiment/${T}/recent_log`);C.value=e.logs,e.error&&(A.value=e.error),t((()=>{j.value.scrollTop=j.value.scrollHeight}))}();const F=a(""),O=e=>{F.value=e.toLowerCase()};return(e,a)=>{var l;return r(),o("div",w,[C.value?(r(),i(y,{key:0,class:"pb-6",onInput:O,content:null==(l=C.value)?void 0:l.join("\n"),placeholder:e.$t("experiment.func-bar.placeholder.log"),filename:"print.log"},null,8,["content","placeholder"])):u("",!0),c("section",k,[C.value?(r(),o("div",{key:0,class:"log-area",ref_key:"logAreaRef",ref:j},[(r(!0),o(v,null,f(I.value,(e=>(r(),o("div",{class:"log-line",key:e},[c("span",_,d(e.index),1),p(c("span",null,d(e.value),513),[[x,!e.isTarget]]),p(c("span",null,[(r(!0),o(v,null,f(e.value,(e=>(r(),o("span",{key:e,class:m(e.toLowerCase()===F.value?" bg-warning-dimmest":"")},d(e),3)))),128))],512),[[x,e.isTarget]])])))),128)),(r(!0),o(v,null,f(A.value,((e,a)=>(r(),o("div",{class:"log-line text-negative-default",key:e},[c("span",b,d(C.value.length+a),1),c("span",null,d(e),1)])))),128))],512)):(r(),o("div",L,[g(h)]))])])}}},[["__scopeId","data-v-cb74fa0f"]]);export{j as default};
