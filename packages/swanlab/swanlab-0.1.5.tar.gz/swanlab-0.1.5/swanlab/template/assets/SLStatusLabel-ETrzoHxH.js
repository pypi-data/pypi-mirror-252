import{_ as e,o as t,g as a,w as n,b as s,e as i,v as l,t as o,x as r,J as u,q as d,u as c,G as p,y as m,c as v,a as f,N as h,O as g,n as b,f as x,P as y,m as _,Q as $,I as w,F as j,B as S}from"./index-khtEKB45.js";import{_ as k}from"./SLLoading-vdw4_byl.js";const C={class:"text-sm flex items-center gap-2"},I={class:"md:block hidden"},L=e({__name:"DeleteButton",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:c}){const p=e,m=c,v=()=>{u(d(`common.delete.title.${p.type}`),d(`common.delete.content.${p.type}`),{}).then((()=>{m("confirm")}))};return(e,u)=>(t(),a(r,{onClick:v,theme:"negative",hollow:"","disabled-tip":e.$t("common.delete.not-allowed")},{default:n((()=>[s("div",C,[i(l,{icon:"trash",class:"w-4 h-4"}),s("span",I,o(e.$t("common.delete.button")),1)])])),_:1},8,["disabled-tip"]))}},[["__scopeId","data-v-61afeff3"]]),V={class:"text-xl font-semibold"},W={class:"relative pt-4"},z={class:"font-semibold pb-3"},E=["placeholder"],q={class:"tip text-negative-default"},A={class:"relative"},B={class:"font-semibold pt-5 pb-3"},U=["placeholder"],Z={class:"tip text-negative-default"},D={class:"flex justify-end pt-10"},N=100,F=255,G=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:l}){const u=c(),$=p(),w=e,j=l,S=m({name:"project"===w.type?u.name:$.name,description:"project"===w.type?u.description:$.description}),C=m({name:"",description:""}),I=v((()=>{const e=S.value.name;if(e.length>N)return!1;if(e.startsWith("-")||e.endsWith("-")||e.startsWith("_")||e.endsWith("_"))return!1;return/^[a-zA-Z0-9_\-\u4e00-\u9fa5]+$/.test(e)})),L=v((()=>{const e=S.value.name;return!(e.length>N)&&(!/^[_-]|[_-]$/.test(e)&&!/[^a-zA-Z0-9_-]/.test(e))})),G=v((()=>{var e;return!S.value.description||!((null==(e=S.value.description)?void 0:e.length)>F)})),J=m(!1),O=async()=>{if(C.value={name:"",description:""},"project"===w.type&&!I.value)return _.warning("invalid project name"),C.value.name="too long or invalid characters";if(!L.value)return _.warning("invalid experiment name"),C.value.name="too long or invalid characters";if(!G.value)return _.warning("invalid description"),C.value.description="invalid description";if(S.value.name===u.name&&S.value.description===u.description)return C.value.name="nothing changed in project config";if(S.value.name===$.name&&S.value.description===$.description)return C.value.name="nothing changed in experiment config";let e=!1;"experiment"===w.type&&u.experiments.forEach((t=>{S.value.name===t.name&&S.value.name!==$.name&&(e=!0,C.value.name="The experiment name is duplicated")})),e||(J.value=!0,j("confirm",S.value,(()=>{J.value=!1,_.success(d("common.config-editor.save.success"))})))};return(l,u)=>{var d;const c=r;return t(),f("form",{class:"w-full",onSubmit:y(O,["prevent"])},[s("h1",V,o(l.$t(`common.config-editor.title.${e.type}`)),1),s("div",W,[s("h2",z,o(l.$t(`common.config-editor.sub-title.${e.type}.name`)),1),h(s("input",{type:"text",class:"input","onUpdate:modelValue":u[0]||(u[0]=e=>S.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:N,pattern:"[a-zA-Z0-9_\\-\\u4e00-\\u9fa5]*",required:""},null,8,E),[[g,S.value.name]]),s("p",{class:b(["absolute bottom-[-20px] text-xs right-0",0===S.value.name.length||S.value.name.length===N?"text-negative-default":""])},o(`${S.value.name.length} / 100`),3),s("span",q,o(C.value.name),1)]),s("div",A,[s("h2",B,o(l.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),h(s("textarea",{class:"input",rows:"10","onUpdate:modelValue":u[1]||(u[1]=e=>S.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:F},null,8,U),[[g,S.value.description]]),s("p",{class:b(["absolute bottom-[-20px] text-xs right-0",(null==(d=S.value.description)?void 0:d.length)===F?"text-negative-default":""])},o(`${S.value.description?S.value.description.length:0} / 255`),3),s("span",Z,o(C.value.description),1)]),s("div",D,[i(c,{type:"submit",theme:"primary",class:"p-2 rounded flex items-center",disabled:J.value},{default:n((()=>[J.value?(t(),a(k,{key:0,size:"4"})):x("",!0),s("span",null,o(l.$t("common.config-editor.save."+(J.value?"savimg":"default"))),1)])),_:1},8,["disabled"])])],32)}}},[["__scopeId","data-v-27ab07cb"]]),J={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:a}){const s=m(!1),o=a,u=async(e,t)=>{o("modify",e,(()=>{s.value=!1,t()}))};return(a,o)=>{const d=r;return t(),f(w,null,[i(d,{class:"px-3 py-1.5 border-none !text-dimmest rounded",theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":a.$t("common.config-editor.not-allowed"),onClick:o[0]||(o[0]=e=>s.value=!0)},{default:n((()=>[i(l,{icon:"modify",class:"w-4 h-4"})])),_:1},8,["disabled","disabled-tip"]),i($,{class:"px-10 py-6","max-w":"550",modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value=e)},{default:n((()=>[i(G,{type:e.type,onConfirm:u},null,8,["type"])])),_:1},8,["modelValue"])],64)}}},O=["href"],P=e({__name:"SLStatusLabel",props:{status:{type:Number,required:!0},id:{default:null}},setup(e){const a=j(),n=e,s=v((()=>{const e=d("experiment.status."+n.status);let t,a;switch(n.status){case 0:t="running",a="circle-fill";break;case 1:t="finished",a="success";break;case-1:t="crashed",a="error"}if(!t)throw new Error("Invalid status:"+n.status+"in StatusLabel.vue");return{label:e,class:t,icon:a}})),r=v((()=>{if(n.id)return"/experiment/"+n.id})),u=()=>{r.value&&a.push(r.value)};return(e,a)=>{const n=l;return t(),f("a",{class:b(["sl-status-label",s.value.class]),href:r.value,onClick:y(u,["prevent"])},[i(n,{icon:s.value.icon},null,8,["icon"]),S(" "+o(s.value.label),1)],10,O)}}},[["__scopeId","data-v-d51e3919"]]);export{L as D,J as _,P as a};
