"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4438],{66494:(e,a,t)=>{var i=t(89793),n=t.n(i),l=t(60216),s=t.n(l),r=t(32735),d=t(12788),o=t(25591),c=t(48060),m=t(25899),u=t(67986),f=t(57176),g=t(33344),p=t(40327),b=t(19306),E=t(59090);function y(e){let{cancelURL:a,moderated:t,initialValues:i,hasPredefinedAffiliations:l,showAccountForm:s,syncedValues:d,emails:y,affiliationMeta:w,hasPendingUser:F,mandatoryFields:h,lockedFields:k,lockedFieldMessage:q}=e;return r.createElement(o.Form,{onSubmit:async(e,a)=>{const t=(0,g.hS)(e,a);let i;delete t.password_confirm,l?t.affiliation_data&&(t.affiliation=t.affiliation_data.text.trim(),t.affiliation_id=t.affiliation_data.id,delete t.affiliation_data):delete t.affiliation_data;try{i=await E.indicoAxios.post(location.href,t)}catch(e){return(0,g.qf)(e,l?{affiliation:"affiliation_data"}:{})}location.href=i.data.redirect,await new Promise((()=>{}))},initialValues:i,initialValuesEqual:n(),subscription:{submitting:!0},validate:e=>{const a={};return e.password&&e.password_confirm&&e.password_confirm!==e.password&&(a.password_confirm=b.Translate.string("Passwords must match")),a}},(e=>r.createElement(c.Z,{onSubmit:e.handleSubmit},!s&&r.createElement(o.Field,{name:"synced_fields",isEqual:n(),render:()=>null}),F&&r.createElement(m.Z,{info:!0},r.createElement(b.Translate,null,"There is already some information in Indico that concerns you. We are going to link it automatically.")),r.createElement(p.pg,{legend:b.Translate.string("User information"),active:s||t},y.length>1?r.createElement(f.xF,{name:"email",label:b.Translate.string("Email address"),options:y.map((e=>({key:e,value:e,text:e}))),syncedValues:d,lockedFields:k,lockedFieldMessage:q,required:!0}):r.createElement(f.zm,{name:"email",label:b.Translate.string("Email address"),syncedValues:d,lockedFields:k,lockedFieldMessage:q,readOnly:!0}),r.createElement(c.Z.Group,{widths:"equal"},r.createElement(f.zm,{name:"first_name",label:b.Translate.string("First name"),required:!0,syncedValues:d,lockedFields:k,lockedFieldMessage:q}),r.createElement(f.zm,{name:"last_name",label:b.Translate.string("Last name"),required:!0,syncedValues:d,lockedFields:k,lockedFieldMessage:q})),l?r.createElement(f.wp,{name:"affiliation_data",required:t&&h.includes("affiliation"),syncName:"affiliation",syncedValues:d,lockedFields:k,lockedFieldMessage:q,currentAffiliation:w}):r.createElement(f.zm,{name:"affiliation",label:b.Translate.string("Affiliation"),required:t&&h.includes("affiliation"),syncedValues:d,lockedFields:k,lockedFieldMessage:q}),"address"in d&&r.createElement(f.a0,{name:"address",label:b.Translate.string("Address"),syncedValues:d,lockedFields:k,lockedFieldMessage:q}),"phone"in d&&r.createElement(f.zm,{name:"phone",label:b.Translate.string("Phone number"),syncedValues:d,lockedFields:k,lockedFieldMessage:q})),s&&r.createElement(p.pg,{legend:b.Translate.string("Login details")},r.createElement(g._t,{name:"username",label:b.Translate.string("Username"),required:!0}),r.createElement(c.Z.Group,{widths:"equal"},r.createElement(g._t,{name:"password",type:"password",label:b.Translate.string("Password"),autoComplete:"new-password",required:!0}),r.createElement(g._t,{name:"password_confirm",type:"password",label:b.Translate.string("Confirm password"),autoComplete:"new-password",required:!0}))),t&&r.createElement(p.pg,{legend:b.Translate.string("Account moderation")},r.createElement(m.Z,{info:!0},r.createElement(b.Translate,null,"Each new account needs to be approved by an administrator. We will send you an email as soon as your request has been approved.")),r.createElement(p.wY,{required:h.includes("comment"),name:"comment",initialValue:"",label:b.Translate.string("Comment"),description:b.Translate.string("You can provide additional information or a comment for the administrators who will review your registration.")})),r.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.createElement(g.Ei,{disabledUntilChange:!1,label:t?b.Translate.string("Submit registration request"):b.Translate.string("Create my Indico profile"),className:"submit-button"}),r.createElement(c.Z.Field,{disabled:e.submitting},r.createElement(u.Z,{as:"a",href:a,disabled:e.submitting},r.createElement(b.Translate,null,"Cancel")))))))}y.propTypes={cancelURL:s().string.isRequired,moderated:s().bool.isRequired,initialValues:s().object.isRequired,hasPredefinedAffiliations:s().bool.isRequired,showAccountForm:s().bool.isRequired,syncedValues:s().object.isRequired,emails:s().arrayOf(s().string).isRequired,affiliationMeta:s().object,hasPendingUser:s().bool,mandatoryFields:s().arrayOf(s().string).isRequired,lockedFields:s().arrayOf(s().string),lockedFieldMessage:s().string},y.defaultProps={affiliationMeta:null,hasPendingUser:!1,lockedFields:[],lockedFieldMessage:""},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#signup-container");if(!e)return;const a=JSON.parse(e.dataset.config);d.render(r.createElement(y,a),e)}))}},e=>{e.O(0,[5514,3044,8592],(()=>{return a=66494,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_auth.signup.8425f349.bundle.js.map