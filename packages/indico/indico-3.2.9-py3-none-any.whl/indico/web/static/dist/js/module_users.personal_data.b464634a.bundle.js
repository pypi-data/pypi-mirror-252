"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3913],{11747:(e,a,i)=>{var s=i(63025),t=i(89793),n=i.n(t),l=i(60216),r=i.n(l),d=i(32735),c=i(12788),u=i(25591),o=i(48060),m=i(57176),f=i(33344),y=i(19306),g=i(59090);const D=s.ZP.bind(null,{endpoint:"users.user_emails",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"emails",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"emails",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),p=s.ZP.bind(null,{endpoint:"users.user_profile_update",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/");function k(e){let{userId:a,userValues:i,currentAffiliation:s,titles:t,syncedValues:l,lockedFields:r,lockedFieldMessage:c,hasPredefinedAffiliations:k}=e;const b=null!==a?{user_id:a}:{},E=t.map((e=>({key:e.name,value:e.name,text:e.title})));return d.createElement("div",null,d.createElement(u.Form,{onSubmit:async(e,a)=>{const i=(0,f.k4)(e,a);k?i.affiliation_data&&(i.affiliation=i.affiliation_data.text.trim(),i.affiliation_id=i.affiliation_data.id,delete i.affiliation_data):delete i.affiliation_data;try{await g.indicoAxios.patch(p(b),i)}catch(e){return(0,f.qf)(e)}location.reload(),await new Promise((()=>{}))},initialValues:i,initialValuesEqual:n(),subscription:{}},(e=>d.createElement(o.Z,{onSubmit:e.handleSubmit},d.createElement(u.Field,{name:"synced_fields",isEqual:n(),render:()=>null}),d.createElement(f.yZ,{name:"title",options:E,selection:!0,parse:f.fQ.nullIfEmpty,label:y.Translate.string("Title"),placeholder:y.Translate.string("None")}),d.createElement(o.Z.Group,{widths:"equal"},d.createElement(m.zm,{name:"first_name",label:y.Translate.string("First name"),required:!0,syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(m.zm,{name:"last_name",label:y.Translate.string("Last name"),required:!0,syncedValues:l,lockedFields:r,lockedFieldMessage:c})),k?d.createElement(m.wp,{name:"affiliation_data",syncName:"affiliation",currentAffiliation:s,syncedValues:l,lockedFields:r,lockedFieldMessage:c}):d.createElement(m.zm,{name:"affiliation",label:y.Translate.string("Affiliation"),syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(m.a0,{name:"address",label:y.Translate.string("Address"),syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(m.zm,{name:"phone",label:y.Translate.string("Phone number"),syncedValues:l,lockedFields:r,lockedFieldMessage:c}),d.createElement(m.zm,{name:"email",label:y.Translate.string("Email address"),syncedValues:l,lockedFields:r,lockedFieldMessage:c,readOnly:!0},d.createElement(y.Translate,null,"You can manage your email addresses"," ",d.createElement(y.Param,{name:"link",wrapper:d.createElement("a",{href:D(b)})},"here"),".")),d.createElement(f.Ei,{label:y.Translate.string("Save changes"),className:"submit-button"})))))}k.propTypes={userId:r().number,userValues:r().object.isRequired,currentAffiliation:r().object,titles:r().arrayOf(r().shape({name:r().string.isRequired,title:r().string.isRequired})).isRequired,syncedValues:r().objectOf(r().string).isRequired,lockedFields:r().arrayOf(r().string).isRequired,lockedFieldMessage:r().string.isRequired,hasPredefinedAffiliations:r().bool.isRequired},k.defaultProps={userId:null,currentAffiliation:null},window.setupPersonalDataForm=function(e,a,i,s,t,n,l,r){document.addEventListener("DOMContentLoaded",(()=>{c.render(d.createElement(k,{userId:e,userValues:a,currentAffiliation:i,titles:s,syncedValues:t,lockedFields:n,lockedFieldMessage:l,hasPredefinedAffiliations:r}),document.querySelector("#personal-details-form-container"))}))}}},e=>{e.O(0,[5514,3044,8592],(()=>{return a=11747,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_users.personal_data.b464634a.bundle.js.map