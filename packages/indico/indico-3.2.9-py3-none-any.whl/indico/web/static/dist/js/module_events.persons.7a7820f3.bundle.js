"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[399],{5722:(e,i,n)=>{n(68101);var a=n(63025),t=n(60216),s=n.n(t),r=n(32735),o=n(12788),d=n(8892),l=n(33344),c=n(19306),f=n(59090),m=n(12394);const p=a.ZP.bind(null,{endpoint:"persons.update_person",rules:[{args:["event_id","person_id"],converters:{event_id:"IntegerConverter",person_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"persons",isDynamic:!1},{data:"/",isDynamic:!1},{data:"person_id",isDynamic:!0}]}]},"/");function u(e){let{eventId:i,person:n,hasPredefinedAffiliations:a,replacePersonRow:t}=e;const[s,o]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement("a",{className:"i-link icon-edit",title:c.Translate.string("Edit person information"),onClick:()=>o(!0)}),s&&r.createElement(d.PersonDetailsModal,{person:n,hasPredefinedAffiliations:a,hideEmailField:!0,onClose:()=>o(!1),onSubmit:async(e,s)=>{const r=(0,l.k4)(e,s);let o;a?r.affiliationData&&(r.affiliation=r.affiliationData.text.trim(),r.affiliationId=r.affiliationData.id,delete r.affiliationData):delete r.affiliationData;try{o=await f.indicoAxios.patch(p({event_id:i,person_id:n.id}),(0,m.h)(r))}catch(e){return(0,l.qf)(e)}t(o.data.html),await new Promise((()=>{}))}}))}u.propTypes={eventId:s().number.isRequired,person:s().object.isRequired,hasPredefinedAffiliations:s().bool.isRequired,replacePersonRow:s().func.isRequired},window.setupEditEventPerson=(e,i,n)=>{const a=document.querySelector(`#edit-person-${i.id}`);o.render(r.createElement(u,{eventId:e,person:(0,m.k)(i),hasPredefinedAffiliations:n,replacePersonRow:e=>{o.unmountComponentAtNode(a),$(`#person-${i.id}`).html(e)}}),a)}}},e=>{e.O(0,[5514,3044,8592],(()=>{return i=5722,e(e.s=i);var i}));e.O()}]);
//# sourceMappingURL=module_events.persons.7a7820f3.bundle.js.map