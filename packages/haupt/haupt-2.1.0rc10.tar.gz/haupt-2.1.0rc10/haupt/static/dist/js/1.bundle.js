"use strict";(self.webpackChunk_polyaxon_app=self.webpackChunk_polyaxon_app||[]).push([[526],{86526:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se,mapDispatchToProps:()=>re,mapStateToProps:()=>le});var a=n(44714),l=n(7267),r=n(78622),s=n(87363),o=n(87151),i=n(10231),c=n(40335),u=n(55498),m=n(3441),E=n(36565),p=n(65125),g=n(72982),A=n(37109),h=n(18480),d=n(2003),S=n(53026),_=n(81966),P=n(46318),z=n(36968),N=n(43119),L=n(79720),F=n(6860),y=n(28066),U=n(41522),C=n(81785),T=n(88281),M=n(66928),v=n(97800),f=n(34166),R=n(80532),O=n(58163),b=n(83625),I=n(54719),w=n(66163),x=n(41689);class B extends s.Component{componentDidUpdate(){this.props.success&&this.props.onClose()}render(){const e=this.props.organization?.plan||{},t={email:e.email||"",fullname:e.fullname||""},n=s.createElement(f.J9,{initialValues:t,onSubmit:(e,t)=>{this.props.onPost(e),t.setTouched({})}},(e=>s.createElement(R.m,{error:(0,x.yc)(this.props.errors),isInvalid:(0,x.Vh)(this.props.errors)},s.createElement("form",{onSubmit:e.handleSubmit},(0,x.s8)(e,this.props.errors,"email",!1,!0,!0),s.createElement(x.nv,{props:e,errors:this.props.errors,fieldName:"fullname",label:"The fullname of the company",compressed:!1,fullWidth:!0}),s.createElement(c.v,null),s.createElement(g.Lx,{justifyContent:"flexEnd",gutterSize:"none"},s.createElement(d.oB,{type:"submit",fill:!0,size:"s",color:"primary",disabled:this.props.isLoading},"Save"))))));return s.createElement(O.G,{onClose:this.props.onClose},s.createElement(b.n,null,s.createElement(I.A,null,"Billing details")),s.createElement(w.R,null,n))}}var H=n(89898),Y=n(9530),k=n(86252),D=n(30053);const G=(0,l.EN)((0,a.$j)((function(e,t){const n=t.match.params.owner,a=(0,Y.V)(e.loadingIndicators.organizations.byUuids,n,H.a.PLAN);return{isLoading:a,errors:(0,k.Y)(e.alerts.organizations.byUuids,a,n,H.a.PLAN),success:(0,C.oA)((0,D.k)(e.alerts.organizations.byUuids,a,n,H.a.PLAN)),organization:e.organizations.byUuids[n].data,onClose:t.onClose}}),(function(e,t){return{onPost:n=>e(r.OL.postOrganizationPlan(t.match.params.owner,"billing_details",n))}}))(B));var V=n(66432),Q=n(56136);class j extends s.Component{componentDidMount(){this.props.onPost()}render(){const e=this.props.organization?.plan||{};if(!e.key||!r._G.IS_CLOUD)return null;const t=(0,Q.loadStripe)(e.key);return s.createElement(V.Elements,{stripe:t},this.props.children)}}const K=(0,l.EN)((0,a.$j)((function(e,t){const n=t.match.params.owner,a=(0,Y.V)(e.loadingIndicators.organizations.byUuids,n,H.a.PLAN);return{isLoading:a,errors:(0,k.Y)(e.alerts.organizations.byUuids,a,n,H.a.PLAN),success:(0,C.oA)((0,D.k)(e.alerts.organizations.byUuids,a,n,H.a.PLAN)),organization:e.organizations.byUuids[n].data}}),(function(e,t){return{onPost:()=>e(r.OL.postOrganizationPlan(t.match.params.owner,"billing_key",{}))}}))(j)),J=e=>{const t=(0,V.useStripe)(),n=(0,V.useElements)(),[a,l]=s.useState(!1),[r,o]=s.useState("");if(!t||!n)return null;const i={style:{base:{color:(0,C.VH)(e.theme)?"#fff":"#000",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px"}}};return s.createElement(R.m,{style:{minWidth:500}},r&&s.createElement("div",null,s.createElement(P.MU,{title:"Sorry, there was an error",color:"danger",iconType:"alert",size:"s"}),s.createElement(c.v,null)),s.createElement("form",{onSubmit:a=>{a.preventDefault(),l(!0),t.createPaymentMethod({type:"card",card:n.getElement(V.CardElement)}).then((({paymentMethod:t})=>{t&&t.id&&e.onPost({method:t.id})})).catch((e=>{console.log("got error",e)}))}},s.createElement(V.CardElement,{options:i,onChange:e=>{e.error?o(e.error.message):o("")}}),s.createElement(c.v,{size:"s"}),"Payments are processed securely through"," ",s.createElement(L.Q,{href:"https://stripe.com/",external:!0},"Stripe"),s.createElement(c.v,null),s.createElement(g.Lx,{justifyContent:"flexEnd",gutterSize:"none"},s.createElement(d.oB,{type:"submit",fill:!0,size:"s",color:"primary",disabled:!t||a||""!==r},"Save"))))};class W extends s.Component{componentDidMount(){this.props.current&&this.props.onPost({})}componentDidUpdate(){const e=this.props.organization?.plan||{};this.props.success&&"billing_method"===e.handler&&!this.props.current&&this.props.onClose()}render(){const e=this.props.organization?.plan||{};return s.createElement(O.G,{onClose:this.props.onClose},s.createElement(b.n,null,s.createElement(I.A,null,"Payment method")),s.createElement(w.R,null,this.props.errors&&s.createElement("div",null,s.createElement(P.MU,{title:"Sorry, there was an error",color:"danger",iconType:"alert",size:"s"},s.createElement("p",null,this.props.errors)),s.createElement(c.v,null)),this.props.current?(()=>{const t=(e.payment_method||{}).card||{};return s.createElement(g.Lx,{justifyContent:"spaceAround",gutterSize:"none"},s.createElement(c.v,{size:"xxl"}),Object.keys(t).length&&s.createElement(z.h,{size:"m"},s.createElement("strong",null,t.brand)," **** ",s.createElement("strong",null,t.last4)),s.createElement(c.v,{size:"xxl"}))})():s.createElement(K,null,s.createElement(J,{onPost:e=>this.props.onPost(e),theme:this.props.theme}))))}}const $=(0,l.EN)((0,a.$j)((function(e,t){const n=t.match.params.owner,a=(0,Y.V)(e.loadingIndicators.organizations.byUuids,n,H.a.PLAN);return{isLoading:a,errors:(0,k.Y)(e.alerts.organizations.byUuids,a,n,H.a.PLAN),success:(0,C.oA)((0,D.k)(e.alerts.organizations.byUuids,a,n,H.a.PLAN)),theme:(0,C.gh)(e.users.currentUser),current:t.current,organization:e.organizations.byUuids[n].data,onClose:t.onClose}}),(function(e,t){return{onPost:n=>e(r.OL.postOrganizationPlan(t.match.params.owner,"billing_method",n))}}))(W));class q extends s.Component{constructor(e){super(e),this.state={isEditing:!0}}render(){const e=C.z5.getQuotaFeature(this.props.orgPlan,C.z5.PLAN_MEMBERS_QUOTA),t=C.z5.getQuotaFeature(this.props.orgPlan,C.z5.PLAN_MEMBERS_RO_QUOTA),n=C.z5.getQuotaFeature(this.props.orgPlan,C.z5.PLAN_AGENTS_QUOTA),a=C.z5.getKeyFeature(this.props.orgPlan,C.z5.PLAN_KEYS_NAME),l=C.z5.getKeyFeature(this.props.orgPlan,C.z5.PLAN_KEYS_CYCLE),r=C.z5.getKeyFeature(this.props.orgPlan,C.z5.PLAN_KEYS_USAGE)||"",o=C.z5.hasFlagFeature(this.props.orgPlan,C.z5.PLAN_KEYS_PRO),i=o||C.z5.hasFlagFeature(this.props.orgPlan,C.z5.PLAN_CAN_ACTIVATE_PRO),u=C.z5.hasFlagFeature(this.props.orgPlan,C.z5.PLAN_CAN_ACTIVATE_COUPON),m=this.props.orgPlan.new_price,E=s=>s.cycle===l&&s.plan===a&&s.pro===o&&s.usage===r&&parseInt(s.seats,10)===e&&parseInt(s.seats_ro,10)===t&&parseInt(s.agents,10)===n,p=e=>!!this.props.isLoading||!C.z5.ShouldConfirmPayment(this.props.orgPlan.status)&&E(e),S=e=>{if(this.props.isLoading)return!0;const t=(0,C.kK)(e.confirmation)||m!==parseInt(e.confirmation,10);return C.z5.ShouldConfirmPayment(this.props.orgPlan.status)?t:!!E(e)||t},_={cycle:l||C.z5.PLAN_KEYS_PRICE_MONTHLY,plan:a||C.z5.PLAN_NAMES_STARTER,pro:o,usage:r,seats:e||3,seats_ro:t||0,agents:n||1},z=e=>{const t={};t.cycle=e.cycle,t.plan=e.plan,t.pro=e.plan===C.z5.PLAN_NAMES_PLATFORM&&e.pro,t.usage=e.usage,t.seats=parseInt(e.seats,10),t.seats_ro=parseInt(e.seats_ro,10),t.agents=parseInt(e.agents,10),e.coupon&&(t.coupon=e.coupon),this.state.isEditing?this.setState({isEditing:!1},(()=>this.props.onPreview(t))):this.props.onPost(t)},N=e=>e===C.z5.PLAN_NAMES_PLATFORM?3:e===C.z5.PLAN_NAMES_BUSINESS?6:1;return s.createElement(f.J9,{initialValues:_,onSubmit:(e,t)=>{e.pro&&(e.plan===C.z5.PLAN_NAMES_PLATFORM&&e.cycle===C.z5.PLAN_KEYS_PRICE_YEARLY||delete e.pro),e.plan===C.z5.PLAN_NAMES_STARTER&&(delete e.seats_ro,delete e.usage,delete e.agents),z(e),t.setTouched({})}},(e=>{return s.createElement(R.m,{error:(0,x.yc)(this.props.errors),isInvalid:(0,x.Vh)(this.props.errors),style:{minWidth:400}},s.createElement("form",{onSubmit:e.handleSubmit},this.state.isEditing&&s.createElement(s.Fragment,null,s.createElement(x.mg,{props:e,errors:this.props.errors,fieldName:"plan",options:[{value:C.z5.PLAN_NAMES_PLATFORM,text:"Platform"},{value:C.z5.PLAN_NAMES_BUSINESS,text:"Business"}],fullWidth:!0}),s.createElement(x.mg,{props:e,errors:this.props.errors,fieldName:"cycle",options:[{value:C.z5.PLAN_KEYS_PRICE_MONTHLY,text:"Monthly"},{value:C.z5.PLAN_KEYS_PRICE_YEARLY,text:"Yearly"}],fullWidth:!0}),s.createElement(x.sU,{props:e,errors:this.props.errors,fieldName:"seats",helpText:"All developer seats, including the developer seats that come with the plan",minValue:(t=e.values.plan,t===C.z5.PLAN_NAMES_STARTER||t===C.z5.PLAN_NAMES_PLATFORM?3:t===C.z5.PLAN_NAMES_BUSINESS?6:3),compressed:!0,fullWidth:!0}),e.values.plan!==C.z5.PLAN_NAMES_STARTER&&s.createElement(x.sU,{props:e,errors:this.props.errors,fieldName:"seats_ro",label:"Read-Only Seats",helpText:"Read only seats",minValue:0,compressed:!0,fullWidth:!0}),e.values.plan===C.z5.PLAN_NAMES_PLATFORM&&i&&e.values.cycle===C.z5.PLAN_KEYS_PRICE_YEARLY&&s.createElement(x.KV,{name:"pro",label:"[Legacy] optional flag to enable pro features",helpText:"Advanced restrictions, activity logs, teams management & roles, extended analytics, ..."}),e.values.plan!==C.z5.PLAN_NAMES_STARTER&&s.createElement(x.sU,{props:e,errors:this.props.errors,fieldName:"agents",helpText:"All agents, including the agent that comes with the plan",minValue:1,maxValue:N(e.values.plan),compressed:!0,fullWidth:!0}),e.values.plan!==C.z5.PLAN_NAMES_STARTER&&s.createElement(x.mg,{props:e,errors:this.props.errors,fieldName:"usage",label:"additional usage",helpText:"Optional additional concurrency, queues, and schedules",options:[{value:"",text:"None"},{value:C.z5.PLAN_NAMES_USAGE_S,text:"S"},{value:C.z5.PLAN_NAMES_USAGE_M,text:"M"},{value:C.z5.PLAN_NAMES_USAGE_L,text:"L"},{value:C.z5.PLAN_NAMES_USAGE_XL,text:"XL"}],fullWidth:!0}),u&&s.createElement(x.nv,{props:e,errors:this.props.errors,fieldName:"coupon",label:"coupon",helpText:"Optional discount code",compressed:!0,fullWidth:!0})),s.createElement(c.v,null),this.state.isEditing?s.createElement(s.Fragment,null,!p(e.values)&&s.createElement(P.MU,{size:"s",title:"Review plan price",iconType:"pin"},s.createElement("p",null,"In order to confirm the changes you need to review the price first")),s.createElement(c.v,null),s.createElement(d.oB,{fullWidth:!0,fill:!0,color:"primary",size:"s",type:"submit",disabled:p(e.values)},"Review plan changes")):s.createElement(s.Fragment,null,s.createElement(P.MU,{size:"s",title:"Please note that by confirming a new invoice will be generated",iconType:"pin"},s.createElement("ul",null,s.createElement("li",null,"The subscription price for this configuration is ",s.createElement("strong",null,`$${m}`)," billed"," ",s.createElement("strong",null,e.values.cycle===C.z5.PLAN_KEYS_PRICE_MONTHLY?"monthly":"annually")),s.createElement("li",null,"Stripe will automatically collect a payment or make proration adjustments based on your current balance"))),s.createElement(c.v,null),s.createElement(x.Ki,{props:e,errors:this.props.errors,fieldName:"confirmation",label:"confirmation",helpText:"Please confirm the changes by entering the plan's price",compressed:!0,fullWidth:!0}),s.createElement(c.v,null),s.createElement(g.Lx,{gutterSize:"s",justifyContent:"spaceBetween"},s.createElement(A.U,{grow:!1},s.createElement(h.Yd,{onClick:()=>this.setState({isEditing:!0})},"Keep editing")),s.createElement(A.U,{grow:!1},s.createElement(d.oB,{type:"submit",fill:!0,color:"success",disabled:S(e.values)},"Confirm plan"))))));var t}))}}var X=n(3205);const Z=e=>{const t=(0,V.useStripe)(),[n,a]=s.useState(!1),[l,r]=s.useState({});return t?s.createElement(R.m,{style:{minWidth:500}},s.createElement("form",{onSubmit:n=>{n.preventDefault(),a(!0),t.confirmCardPayment(e.intent.client_secret).then((t=>{t.error?(r(t.error),e.onCleanIntent()):"succeeded"===t.paymentIntent?.status&&e.onPost()})).catch((e=>{r(e)}))}},s.createElement(c.v,{size:"s"}),"Subscription payment authentication",s.createElement(c.v,{size:"s"}),l&&(e=>{if(!e)return null;let t="";return"message"in e?t=e.message:"code"in e?t=e.code:"status"in e&&(t=e.status),t?s.createElement(X.q,null,t):null})(l),s.createElement(c.v,null),s.createElement(g.Lx,{justifyContent:"flexEnd",gutterSize:"none"},s.createElement(d.oB,{type:"submit",fill:!0,size:"s",color:"primary",disabled:!t||n},"Authenticate Payment")))):null};class ee extends s.Component{componentDidMount(){const e=this.props.organization?.plan||{};C.z5.isFailedPayment(e.status)&&this.props.onPostInvoice()}componentDidUpdate(){const e=this.props.organization?.plan||{};this.props.success&&"billing_subscription"===e.handler&&e.status&&e.status.toString()===C.z5.PLAN_STATUS_ACTIVE&&this.props.onClose()}render(){const e=this.props.organization?.plan||{};return s.createElement(O.G,{onClose:this.props.onClose},s.createElement(b.n,null,s.createElement(I.A,null,"Subscription management")),s.createElement(w.R,null,C.z5.isFailedPayment(e.status)?s.createElement(K,null,s.createElement(Z,{intent:e.payment_intent,onPost:this.props.onPostInvoice,onCleanIntent:this.props.onCleanIntent})):s.createElement(q,{orgPlan:e,isLoading:this.props.isLoading,errors:this.props.errors,success:this.props.success,onPost:this.props.onPostSubscription,onPreview:this.props.onPostPreview,onCleanPreview:this.props.onCleanPreview,onClose:this.props.onClose})))}}const te=(0,l.EN)((0,a.$j)((function(e,t){const n=t.match.params.owner,a=(0,Y.V)(e.loadingIndicators.organizations.byUuids,n,H.a.PLAN);return{isLoading:a,errors:(0,k.Y)(e.alerts.organizations.byUuids,a,n,H.a.PLAN),success:(0,C.oA)((0,D.k)(e.alerts.organizations.byUuids,a,n,H.a.PLAN)),organization:e.organizations.byUuids[n].data,onClose:t.onClose}}),(function(e,t){return{onPostSubscription:n=>e(r.OL.postOrganizationPlan(t.match.params.owner,"billing_subscription",n)),onPostInvoice:()=>e(r.OL.postOrganizationPlan(t.match.params.owner,"billing_subscription",{})),onPostPreview:n=>e(r.OL.postOrganizationPlan(t.match.params.owner,"billing_preview",n)),onCleanIntent:()=>e(r.OL.initOrganizationPlanCleanIntent(t.match.params.owner)),onCleanPreview:()=>e(r.OL.initOrganizationPlanNewPrice(t.match.params.owner))}}))(ee));var ne=n(97753);class ae extends s.Component{constructor(e){super(e),this.state={billingModal:void 0}}setBillingModal=e=>{this.setState({billingModal:e})};closeModal=()=>{this.setBillingModal(void 0)};getFeatureFlag=(e,t,n)=>({color:!n||C.z5.hasFlagFeature(e,n)?"success":"danger",title:t});getFeaturePlan=(e,t,n)=>({color:C.z5.hasPlan(e,n)?"success":"danger",title:t});getFlagBilling=e=>s.createElement("div",null,e.map((e=>s.createElement(s.Fragment,{key:e.title},s.createElement(i.O,{color:e.color},e.title),s.createElement(c.v,null)))));render(){const e=this.props.organization,t=e?.plan||{},n=[C.z5.PLAN_NAMES_TEAM,C.z5.PLAN_NAMES_ENTERPRISE].indexOf(t.name)>-1,a=t.discount||0,l=e?.usage||{},i=t.payment_method||{},f=(0,ne.Ou)(e.role),R=(e,n,a,r)=>{const i=C.z5.hasQuotaFeature(t,n),p=a?C.z5.getUsageFeature(l,a):0,g=a?C.z5.getUsageFeature(l,a):"-",A=C.z5.getQuotaFeature(t,n),h=C.z5.hasQuotaFeature(t,n,p>0?p-1:0),d=i?h?"success":"accent":"danger",S=i?h?"check":"alert":"minusInCircleFilled",_=a?p/A*100:100;return s.createElement(u.JB,null,s.createElement(m.Tn,{title:`${g}/${A}`,description:e,titleColor:d,textAlign:"left",isLoading:this.props.isLoading},s.createElement(o.Yd,{type:S,color:d}),s.createElement(c.v,{size:"s"}),i?s.createElement(E.Fo,{valueText:!!a||"-",max:100,color:d,size:"s",value:_.toFixed(2)}):r?"No quota":"Feature not enabled",s.createElement(c.v,{size:"m"})))},O=[this.getFeatureFlag(t,"Archives",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Bookmarks",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Unlimited Projects",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Unlimited Runs",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Project Level Searches",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Project Level Dashboards",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Organization Level Searches",C.z5.PLAN_HAS_SEARCHES),this.getFeatureFlag(t,"Organization Level Dashboards",C.z5.PLAN_HAS_DASHBOARDS),this.getFeatureFlag(t,"Organization Level Scheduling Presets",C.z5.PLAN_HAS_PRESETS),this.getFeatureFlag(t,"Component Hub",C.z5.PLAN_HAS_HUB),this.getFeatureFlag(t,"Model Registry",C.z5.PLAN_HAS_REGISTRY),this.getFeatureFlag(t,"Optimization Engine",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Flow Engine",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Automation Helpers",C.z5.PLAN_HAS_PROJECTS)],b=[this.getFeatureFlag(t,"Unlimited Connections",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Connections Viewer",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Connections Manager",C.z5.PLAN_HAS_PROJECTS),this.getFeaturePlan(t,"Multi-Agent Support",[C.z5.PLAN_NAMES_PLATFORM,C.z5.PLAN_NAMES_BUSINESS,C.z5.PLAN_NAMES_TEAM,C.z5.PLAN_NAMES_ENTERPRISE])],I=[this.getFeatureFlag(t,"Basic Stats",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Advanced Analytics",C.z5.PLAN_HAS_ANALYTICS),this.getFeatureFlag(t,"Consumption Breakdown",C.z5.PLAN_HAS_ANALYTICS),this.getFeatureFlag(t,"Cross-Project Runs Management",C.z5.PLAN_HAS_ANALYTICS)],w=[this.getFeatureFlag(t,"Developer Seats",C.z5.PLAN_HAS_PROJECTS),this.getFeaturePlan(t,"Read Only Seats",[C.z5.PLAN_NAMES_PLATFORM,C.z5.PLAN_NAMES_BUSINESS,C.z5.PLAN_NAMES_TEAM,C.z5.PLAN_NAMES_ENTERPRISE]),this.getFeaturePlan(t,"Billing Seat",[C.z5.PLAN_NAMES_PLATFORM,C.z5.PLAN_NAMES_BUSINESS,C.z5.PLAN_NAMES_TEAM,C.z5.PLAN_NAMES_ENTERPRISE]),this.getFeatureFlag(t,"Owner, Admin, Member, & Viewer Roles",C.z5.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Manager, Outsider, & Billing Roles",C.z5.PLAN_HAS_TEAMS),this.getFeatureFlag(t,"Service Accounts",C.z5.PLAN_HAS_SERVICE_ACCOUNTS),this.getFeatureFlag(t,"Scopes & Services Restrictions",C.z5.PLAN_HAS_RESTRICTIONS),this.getFeatureFlag(t,"Advanced Restrictions",C.z5.PLAN_HAS_RESTRICTIONS),this.getFeatureFlag(t,"Teams Management",C.z5.PLAN_HAS_TEAMS),this.getFeatureFlag(t,"Teams Spaces",C.z5.PLAN_HAS_TEAMS_SPACES),this.getFeatureFlag(t,"Activity Logs (3 mths retention)",C.z5.PLAN_HAS_ACTIVITIES),this.getFeatureFlag(t,"IP Addresses Allow List",C.z5.PLAN_HAS_IP_RESTRICTIONS)],x=[this.getFeatureFlag(t,"Tokens Management"),this.getFeatureFlag(t,"User/Password"),this.getFeatureFlag(t,"Google Auth"),this.getFeatureFlag(t,"Github Organizations"),this.getFeatureFlag(t,"SAML Support",C.z5.PLAN_HAS_SAML)],B=[this.getFeatureFlag(t,"Community Support"),this.getFeatureFlag(t,"Email Support"),this.getFeatureFlag(t,"Priority Support",C.z5.PLAN_HAS_PRIORITY_SUPPORT),this.getFeatureFlag(t,"SLAs",C.z5.PLAN_HAS_SLAS)],H=s.createElement(N.I,null,!r._G.IS_CLOUD&&!n&&s.createElement(g.Lx,null,s.createElement(A.U,null,s.createElement(P.MU,{size:"s",color:"warning",title:s.createElement("p",null,"This is a read-only view! You can manage payment related details using your account on"," ",s.createElement(L.Q,{href:"https://cloud.polyaxon.com",external:!0},"https://cloud.polyaxon.com")),iconType:"pin"}))),s.createElement(g.Lx,{direction:"column"},s.createElement(A.U,null,s.createElement(F.sK,{columns:3},s.createElement(A.U,null,(()=>{const l=C.z5.ShouldConfirmPayment(t.status)||C.z5.isFailedPayment(t.status)?"success":"primary",o=C.z5.ShouldConfirmPayment(t.status)?"Setup Subscription":C.z5.isFailedPayment(t.status)?"Authenticate Payment":"Manage";return s.createElement(p.P1,{textAlign:"left",title:"Current Plan",footer:s.createElement(g.Lx,{justifyContent:"flexEnd"},!n&&s.createElement(A.U,{grow:!1},s.createElement(h.Yd,{href:"https://polyaxon.com/pricing",iconType:"popout",target:"_blank",iconSide:"right"},"See pricing")),s.createElement(A.U,{grow:!1},s.createElement(d.oB,{onClick:()=>this.setBillingModal("subscription"),disabled:!r._G.IS_CLOUD||0===Object.keys(i).length,color:l},o)))},s.createElement(S.Rc,null,s.createElement("h1",null,s.createElement("span",{style:t.status.toString()===C.z5.PLAN_STATUS_SPONSORED?{textDecoration:"line-through"}:{}},s.createElement(_.Q,{color:"success"},`$${t.price||"-"}`)))),s.createElement(c.v,{size:"xs"}),a>0&&s.createElement(v.oB,{icon:"tagApp",name:"Discount",value:s.createElement(_.Q,{color:"success"},`-$${a}`)}),s.createElement(v.oB,{icon:"apps",name:"Name",value:(0,C.kC)(t.name)}),s.createElement(v.oB,{icon:"wrench",name:"Cycle",value:t.cycle===C.z5.PLAN_KEYS_PRICE_YEARLY?"Yearly":"Monthly"}),s.createElement(v.QR,{name:"Started",value:e.created_at}),s.createElement(v.xN,{value:t.status.toString()}),s.createElement(c.v,{size:"xs"}))})()),s.createElement(A.U,null,(()=>s.createElement(p.P1,{textAlign:"left",title:"Billing Email",footer:s.createElement(g.Lx,{justifyContent:"flexEnd"},s.createElement(A.U,{grow:!1},s.createElement(d.oB,{onClick:()=>this.setBillingModal("email"),disabled:!r._G.IS_CLOUD},"Update")))},t.email?s.createElement(s.Fragment,null,s.createElement(P.MU,{size:"s",title:"All billing related information will be sent to:",color:"primary",iconType:"email"}),s.createElement("br",null),s.createElement(z.h,{size:"m"},s.createElement("strong",null,"Email:")," ",t.email),s.createElement(z.h,{size:"m"},s.createElement("strong",null,"Fullname:")," ",t.fullname)):s.createElement(P.MU,{size:"s",title:"Your billing information is not set correctly.",color:"warning",iconType:"email"},"Please set a billing email!")))()),s.createElement(A.U,null,(()=>{const e=Object.keys(i).length>0,t=e&&i.type?i.type:void 0;return s.createElement(p.P1,{textAlign:"left",title:"Payment Information",footer:s.createElement(g.Lx,{justifyContent:"flexEnd"},e&&"invoice"!==t&&s.createElement(A.U,{grow:!1},s.createElement(h.Yd,{onClick:()=>this.setBillingModal("methodView"),iconType:"eye"},"View details")),s.createElement(A.U,{grow:!1},s.createElement(d.oB,{onClick:()=>this.setBillingModal("method"),disabled:!r._G.IS_CLOUD},"Update")))},e?s.createElement(s.Fragment,null,s.createElement(P.MU,{title:"You are all set.",color:"success",iconType:"check",size:"s"}),s.createElement("br",null),t&&s.createElement(z.h,{size:"m"},s.createElement("strong",null,"Type:")," ",t)):s.createElement(P.MU,{title:"Payment method not set.",color:"warning",iconType:"alert",size:"s"},"We could not find any payment details associated with this account."))})()))),s.createElement(c.v,{size:"m"}),s.createElement(A.U,null,s.createElement(A.U,{grow:!1},s.createElement(M.i,{title:"Features Usage",icon:"controlsVertical"}))),s.createElement(A.U,null,s.createElement(F.sK,{columns:4,gutterSize:"l"},s.createElement(A.U,null,R("Concurrency",C.z5.PLAN_CONCURRENCY_QUOTA,C.z5.PLAN_CONCURRENCY_USAGE)),s.createElement(A.U,null,R("Agents",C.z5.PLAN_AGENTS_QUOTA,C.z5.PLAN_AGENTS_USAGE)),s.createElement(A.U,null,R("Queues",C.z5.PLAN_QUEUES_QUOTA,C.z5.PLAN_QUEUES_USAGE)),s.createElement(A.U,null,R("Schedules",C.z5.PLAN_SCHEDULES_QUOTA,C.z5.PLAN_SCHEDULES_USAGE)))),s.createElement(c.v,{size:"m"}),s.createElement(A.U,null,s.createElement(A.U,{grow:!1},s.createElement(M.i,{title:"Members",icon:"user"}))),s.createElement(A.U,null,s.createElement(F.sK,{columns:4,gutterSize:"l"},s.createElement(A.U,null,R("Developer Seats",C.z5.PLAN_MEMBERS_QUOTA,C.z5.PLAN_MEMBERS_USAGE)),C.z5.hasFlagFeature(t,C.z5.PLAN_HAS_DIFFERENT_SEATS)&&s.createElement(s.Fragment,null,s.createElement(A.U,null,R("Read Only Seats",C.z5.PLAN_MEMBERS_RO_QUOTA,C.z5.PLAN_MEMBERS_RO_USAGE,C.z5.hasPlan(t,[C.z5.PLAN_NAMES_PLATFORM,C.z5.PLAN_NAMES_BUSINESS]))),s.createElement(A.U,null,R("Billing Seats",C.z5.PLAN_MEMBERS_BILL_QUOTA,C.z5.PLAN_MEMBERS_BILL_USAGE))))),s.createElement(c.v,{size:"m"}),s.createElement(A.U,null,s.createElement(g.Lx,{gutterSize:"xl",justifyContent:"spaceEvenly"},s.createElement(A.U,null,s.createElement(A.U,{grow:!1},s.createElement(M.i,{title:"Enabled Features",icon:"checkInCircleFilled"})),s.createElement(c.v,{size:"l"}),s.createElement(A.U,null,this.getFlagBilling(O))),s.createElement(A.U,null,s.createElement(A.U,{grow:!1},s.createElement(M.i,{title:"Agent Features",icon:"logoKubernetes"})),s.createElement(c.v,{size:"l"}),s.createElement(A.U,null,this.getFlagBilling(b))),s.createElement(A.U,null,s.createElement(A.U,{grow:!1},s.createElement(M.i,{title:"Analytics Features",icon:"analyticsApp"})),s.createElement(c.v,{size:"l"}),s.createElement(A.U,null,this.getFlagBilling(I))),s.createElement(A.U,null,s.createElement(A.U,{grow:!1},s.createElement(M.i,{title:"Security Features",icon:"securityApp"})),s.createElement(c.v,{size:"l"}),s.createElement(A.U,null,this.getFlagBilling(w))),s.createElement(A.U,null,s.createElement(A.U,{grow:!1},s.createElement(M.i,{title:"Auth Options",icon:"exit"})),s.createElement(c.v,{size:"l"}),s.createElement(A.U,null,this.getFlagBilling(x))),s.createElement(A.U,null,s.createElement(A.U,{grow:!1},s.createElement(M.i,{title:"Support Options",icon:"help"})),s.createElement(c.v,{size:"l"}),s.createElement(A.U,null,this.getFlagBilling(B)))),s.createElement(c.v,{size:"xl"}))),"email"===this.state.billingModal&&s.createElement(G,{onClose:this.closeModal}),"method"===this.state.billingModal&&s.createElement($,{current:!1,onClose:this.closeModal}),"methodView"===this.state.billingModal&&s.createElement($,{current:!0,onClose:this.closeModal}),"subscription"===this.state.billingModal&&s.createElement(te,{onClose:this.closeModal}));return s.createElement(s.Fragment,null,s.createElement(y.F,null,s.createElement(U.e,null,s.createElement(T.Z,{organization:e}))),f?H:null)}}function le(e,t){const n=t.match.params.owner;return{isLoading:(0,Y.V)(e.loadingIndicators.organizations.byUuids,n,H.a.GET),organization:e.organizations.byUuids[n].data}}function re(e,t){return{onDelete:()=>e(r.OL.deleteOrganization(t.match.params.owner)),onUpdate:n=>e(r.OL.updateOrganization(t.match.params.owner,n))}}const se=(0,l.EN)((0,a.$j)(le,re)(ae))}}]);